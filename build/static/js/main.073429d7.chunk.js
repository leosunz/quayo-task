/*! For license information please see main.073429d7.chunk.js.LICENSE.txt */
(this["webpackJsonpquayo-task"]=this["webpackJsonpquayo-task"]||[]).push([[0],{101:function(e,t,n){e.exports={taskListWrapper:"task-list-table_taskListWrapper__1EUXr",taskListTableRow:"task-list-table_taskListTableRow__13-oo",taskListCell:"task-list-table_taskListCell__3O3uL",taskListNameWrapper:"task-list-table_taskListNameWrapper__3jQ4G",taskListExpander:"task-list-table_taskListExpander__36RGQ",taskListEmptyExpander:"task-list-table_taskListEmptyExpander__1KtgS"}},113:function(e,t,n){e.exports={ganttTable:"task-list-header_ganttTable__2x3sC",ganttTable_Header:"task-list-header_ganttTable_Header__QPKk0",ganttTable_HeaderSeparator:"task-list-header_ganttTable_HeaderSeparator__2RrFo",ganttTable_HeaderItem:"task-list-header_ganttTable_HeaderItem__YPyrh"}},128:function(e,t,n){e.exports={ganttVerticalContainer:"gantt_ganttVerticalContainer__bGebq",horizontalContainer:"gantt_horizontalContainer__NvENZ",wrapper:"gantt_wrapper__wOYFO"}},132:function(e,t,n){e.exports={projectWrapper:"project_projectWrapper__2ysfk",projectBackground:"project_projectBackground__9mcMb",projectTop:"project_projectTop__2qBqa"}},184:function(e,t,n){e.exports={gridRow:"grid_gridRow__1b1hT",gridRowLine:"grid_gridRowLine__36-48",gridTick:"grid_gridTick__3GwZz"}},185:function(e,t,n){e.exports={barLabel:"task-list_barLabel__BGe98",barLabelOutside:"task-list_barLabelOutside__fO1SA"}},207:function(e,t,n){e.exports={tooltipDefaultContainer:"tooltip_tooltipDefaultContainer__1oDoG",tooltipDefaultContainerParagraph:"tooltip_tooltipDefaultContainerParagraph__2YXlS",tooltipDetailsContainer:"tooltip_tooltipDetailsContainer__3IK_5",tooltipDetailsContainerHidden:"tooltip_tooltipDetailsContainerHidden__1afk4"}},208:function(e,t,n){e.exports={milestoneWrapper:"milestone_milestoneWrapper__32nBY",milestoneBackground:"milestone_milestoneBackground__jPEx5"}},264:function(e,t,n){e.exports={scroll:"vertical-scroll_scroll__3yV99"}},265:function(e,t,n){e.exports={calendarBottomText:"calendar_calendarBottomText__3sGef",calendarTopTick:"calendar_calendarTopTick__Lnx-L",calendarTopText:"calendar_calendarTopText__2SDGG",calendarHeader:"calendar_calendarHeader__AvpMU"}},266:function(e,t,n){e.exports={scroll:"horizontal-scroll_scroll__2y1Bu"}},305:function(e,t,n){},306:function(e,t,n){},350:function(e,t){},356:function(e,t,n){"use strict";n.r(t);var r,a=n(1),i=n.n(a),c=n(99),o=n.n(c),l=(n(305),n(306),n(51)),s=n(17),u=n(5),d=n.n(u),j=n(8),b=n(2),p=n(15),h=n(52),f=n(66),v=n(67),O=n(85),x=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return n}(Object(O.a)(Error)),m=(Error,function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return n}(Object(O.a)(Error))),g=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return n}(Object(O.a)(Error)),y=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return n}(Object(O.a)(Error)),k=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return n}(Object(O.a)(Error)),_=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return n}(Object(O.a)(Error)),w=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return n}(Object(O.a)(Error));function C(e,t,n,r,a){return S.apply(this,arguments)}function S(){return S=Object(j.a)(d.a.mark((function e(t,n,r,a,i){var c,o,l,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=!(s.length>5&&void 0!==s[5])||s[5],e.next=3,fetch(t,{method:n,body:r?JSON.stringify(r):null,headers:Object(p.a)(Object(p.a)({},a),{},{"Content-Type":"application/json"})});case 3:if((o=e.sent).ok){e.next=15;break}return e.prev=5,e.next=8,o.json();case 8:l=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),l={error_message:null!==i&&void 0!==i?i:"Something went wrong",error_code:"500"};case 14:T(o.status,l);case 15:if(!c){e.next=29;break}return e.prev=16,console.log("resp",o),e.next=20,o.json();case 20:return e.abrupt("return",e.sent);case 23:throw e.prev=23,e.t1=e.catch(16),console.log(e.t1),new _("An error occurred");case 27:e.next=30;break;case 29:return e.abrupt("return",void 0);case 30:case"end":return e.stop()}}),e,null,[[5,11],[16,23]])}))),S.apply(this,arguments)}function T(e,t){var n=t.error_message;throw 404===e?new k(n):401===e?new x(n):400===e?new m(n):409===e?new g(n):403===e?new y(n):e>=700&&e<=799||418===e?new w(n):new _("An error occurred")}!function(e){e.Get="GET",e.Post="POST",e.Patch="PATCH",e.Delete="DELETE"}(r||(r={}));var D="http://87.98.220.129:1515",N="SONACO - AL RABIH Task Management",I=D+"/api/user/login",P=n(199),L=n(0),A=Object(a.createContext)(null);var E=function(e){var t=e.children,n=Object(a.useState)((function(){var e=localStorage.getItem("token");if(e){var t=Object(P.a)(e),n=Date.now()/1e3;if(t&&t.exp>n)return{token:t,username:t.sub,tokenStr:e}}return null})),i=Object(b.a)(n,2),c=i[0],o=i[1];function l(){var e=localStorage.getItem("token");if(e){var t=Object(P.a)(e),n=Date.now()/1e3;if(t&&t.exp>n)return{token:t,username:t.sub,tokenStr:e}}o(null)}function s(){return(s=Object(j.a)(d.a.mark((function e(t,n,a){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(I,r.Post,{username:t,password:n,force_logout:a},{},"Incorrect username/password.");case 2:(i=e.sent)&&localStorage.setItem("token",i.access_token),l();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(D+"/api/user/logout",r.Get,null,{Authorization:"Bearer ".concat(null===c||void 0===c?void 0:c.tokenStr)},"Something went wrong.",!1);case 3:localStorage.removeItem("token"),l(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),localStorage.removeItem("token"),l();case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(L.jsx)(A.Provider,{value:{login:function(e,t,n){return s.apply(this,arguments)},isAuthenticated:function(){return null!==c},user:c,logout:function(){return u.apply(this,arguments)}},children:t})};function M(e){var t=e.children,n=Object(a.useContext)(A),r=Object(s.g)();return(null===n||void 0===n?void 0:n.isAuthenticated())?t:Object(L.jsx)(s.a,{to:"/login",state:{from:r}})}function W(e){var t=e.children,n=Object(a.useContext)(A),r=Object(s.g)();return(null===n||void 0===n?void 0:n.isAuthenticated())?Object(L.jsx)(s.a,{to:"/",state:{from:r}}):t}var R=n(4),F=n(6),B=n(42),q=n(418),z=n(459),H=n(431),U=n(458),G=n(453),Y=n(454),V=n(78),X=n(432),J=n(452),K=n(244),Q=n.n(K),$=n(245),Z=n.n($),ee=n(246),te=n.n(ee),ne=n(445),re=n(433),ae=n(434),ie=n(272),ce=n(26),oe=n(227),le=n.n(oe),se=n(228),ue=n.n(se),de=n(224),je=n.n(de),be=n(229),pe=n.n(be),he=n(226),fe=n.n(he),ve=n(230),Oe=n.n(ve),xe=n(232),me=n.n(xe),ge=n(130),ye=n(110),ke=n(414),_e=n(111),we=n(49),Ce=n(65),Se=n(55),Te=n(415),De=n(112),Ne=n(231),Ie=n.n(Ne),Pe=n(233),Le=n.n(Pe),Ae=n(234),Ee=n.n(Ae),Me=n(235),We=n.n(Me),Re=n(236),Fe=n.n(Re),Be=function(e){return[{title:"Dashboard",icon:Object(L.jsx)(je.a,{style:{color:"#ff7043"}}),route:"/",desc:""},{title:"Projects",icon:Object(L.jsx)(fe.a,{style:{color:ge.a[700]}}),route:"/projects",desc:"Create, view, and edit your projects list.",cardColor:"light"===e?"#ffad42":"#bb4d00"}]},qe=function(e,t){return e.roles.includes("ADMIN")?[{title:"Clients",icon:Object(L.jsx)(le.a,{style:{color:ye.a[700]}}),route:"/clients",desc:"Create, view, and edit your clients list.",cardColor:"light"===t?"#63a4ff":"#004ba0"},{title:"Users",icon:Object(L.jsx)(ue.a,{style:{color:ke.a[700]}}),route:"/users",desc:"Create, view, and edit your users list.",cardColor:"light"===t?"#48a999":"#004c40"},{title:"Templates",icon:Object(L.jsx)(pe.a,{style:{color:_e.a[700]}}),route:"/tasks/templates",desc:"Create, view, and edit your template list.",cardColor:"light"===t?"#ae52d4":"#4a0072"},{title:"Currencies",icon:Object(L.jsx)(Oe.a,{style:{color:we.a[700]}}),route:"/currencies",desc:"Create, view, and edit your currencies list.",cardColor:"light"===t?"#6abf69":"#00600f"},{title:"Dropdown Values",icon:Object(L.jsx)(Ie.a,{style:{color:Ce.a[700]}}),route:"/settings/dropdown",desc:"Create, view, and edit your dropdown values.",cardColor:"light"===t?"#ba6b6c":"#9a0007"}]:[]},ze=function(e,t){return e.roles.includes("ADMIN")?[{title:"Order Status",icon:Object(L.jsx)(me.a,{style:{color:Se.a[700]}}),route:"/reports/order-status",desc:"Track your orders.",cardColor:"light"===t?"#ff7d47":"#ac0800"},{title:"Tasks By Employee",icon:Object(L.jsx)(Le.a,{style:{color:we.a[700]}}),route:"/reports/tasks-by-employee",desc:"Track your orders.",cardColor:"light"===t?"#6abf69":"#00600f"},{title:"Pipeline Orders",icon:Object(L.jsx)(Ee.a,{style:{color:Te.a[700]}}),route:"/reports/pipeline-orders",desc:"Track your orders.",cardColor:"light"===t?"#56c8d8":"#006978"},{title:"Gantt Chart",icon:Object(L.jsx)(We.a,{style:{color:De.a[700]}}),route:"/reports/gantt",desc:"Track your orders.",cardColor:"light"===t?"#5eb8ff":"#005b9f"},{title:"Cash Forecast",icon:Object(L.jsx)(Fe.a,{style:{color:we.a[700]}}),route:"/reports/cash-forecast",desc:"Track your orders.",cardColor:"light"===t?"#6abf69":"#00600f"}]:[]},He="Password must be at least 6 characters in length containing at least: 1 uppercase letter, 1 numeric value, 1 lowercase letter, 1special character (!, @, #, $, %, ^, *, -, _, +)",Ue=function(e,t){if(e.length>5&&t.length>5&&e===t){for(var n=!1,r=0;r<e.length;r++){var a=e.charAt(r);if(a===a.toUpperCase()){n=!0;break}}for(var i=!1,c=0;c<e.length;c++){var o=e.charAt(c);if(o===o.toLocaleLowerCase()){i=!0;break}}for(var l=!1,s=0;s<e.length;s++){var u=e.charAt(s);if(!Number.isNaN(u)&&[0,1,2,3,4,5,6,7,8,9].includes(Number(u))){l=!0;break}}for(var d=!1,j=0;j<e.length;j++){var b=e.charAt(j);if("!, @, #, $, %, ^, *, -, _, +".includes(b)){d=!0;break}}return n&&i&&l&&d}return!1},Ge=n(22),Ye=D+"/api/project/task/assigned",Ve=function(e){return D+"/api/project/task/".concat(e,"/start")},Xe=function(e){return D+"/api/project/task/".concat(e,"/end")},Je=function(e){var t=D+"/api/project/task/assigned/xlsx?";return e.forEach((function(e){t+="id=".concat(e,"&")})),t},Ke=n(237),Qe=n.n(Ke),$e=n(416);var Ze=function(e){var t=e.text,n=void 0===t?"Oops, something went wrong.":t;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(Qe.a,{style:{color:$e.a[800]},fontSize:"large"}),Object(L.jsx)(V.a,{children:n})]})},et=n(46),tt=Object(F.a)("div")((function(e){return{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",color:e.theme.palette.text.primary}}));function nt(e){var t=e.text,n=void 0===t?"Loading..":t,r=Object(B.a)(),a=[Object(L.jsx)(et.BounceLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.ClimbingBoxLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.BeatLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.ClockLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.DotLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.HashLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.PuffLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.RingLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.SyncLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.ScaleLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.FadeLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.BarLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.ClipLoader,{color:r.palette.primary.dark}),Object(L.jsx)(et.MoonLoader,{color:r.palette.primary.dark})];return Object(L.jsxs)(tt,{children:[a[Math.floor(Math.random()*a.length)],Object(L.jsx)(V.a,{style:{marginTop:r.spacing(1)},variant:"h6",children:n})]})}var rt=n(124),at=n.n(rt),it=n(125),ct=n.n(it),ot=n(127),lt=n.n(ot),st=n(126),ut=n.n(st),dt=n(419),jt=n(462),bt=n(463),pt=n(464),ht=n(461),ft=n(465),vt=n(442),Ot=n(417),xt=n(201),mt=Object(F.a)(Ot.a)((function(e){var t,n=e.theme;return t={},Object(R.a)(t,"&.".concat(xt.a.head),{backgroundColor:n.palette.primary.dark,color:n.palette.common.white}),Object(R.a)(t,"&.".concat(xt.a.body),{fontSize:14}),t})),gt=function(e,t){return console.log(t),null==t?"light"===e?ce.a[500]:ce.a[800]:1==t?"light"===e?Ce.a[400]:Ce.a[700]:"light"===e?$e.a[400]:$e.a[700]},yt=Object(F.a)(ht.a)((function(e){var t=e.theme,n=e.cursor,r=e.isSelected,a=e.isDelayed;return{"&:nth-of-type(odd)":{backgroundColor:r||null!=a?gt(t.palette.mode,a):t.palette.action.hover},"&:last-child td, &:last-child th":{border:0},"&:hover":{backgroundColor:gt(t.palette.mode,a),cursor:null!==n&&void 0!==n?n:"pointer"},backgroundColor:r||null!=a?gt(t.palette.mode,a):void 0}}));function kt(e){var t=Object(B.a)(),n=e.count,r=e.page,i=e.rowsPerPage,c=e.onPageChange,o=Object(a.useState)(JSON.stringify(r+1)),l=Object(b.a)(o,2),s=l[0],u=l[1];return Object(L.jsxs)(q.a,{sx:{flexShrink:0,ml:2.5},children:[Object(L.jsx)(J.a,{onClick:function(e){c(e,0),u(JSON.stringify(0))},disabled:0===r,"aria-label":"first page",children:"rtl"===t.direction?Object(L.jsx)(at.a,{}):Object(L.jsx)(ct.a,{})}),Object(L.jsx)(J.a,{onClick:function(e){c(e,r-1),u(JSON.stringify(parseInt(s)-1))},disabled:0===r,"aria-label":"previous page",children:"rtl"===t.direction?Object(L.jsx)(ut.a,{}):Object(L.jsx)(lt.a,{})}),Object(L.jsx)(dt.a,{value:s,type:"string",disableUnderline:!0,style:Ct,onChange:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0"!=t.target.value){e.next=5;break}return u("1"),e.abrupt("return");case 5:u(t.target.value);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onKeyUp:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!=t.keyCode){e.next=11;break}if(""!=s){e.next=5;break}return u("1"),c(null,0),e.abrupt("return");case 5:if(n=parseInt(s)-1,!Number.isNaN(n)&&null!=n){e.next=10;break}return u("1"),c(null,0),e.abrupt("return");case 10:c(null,n);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onKeyPress:function(e){var t=e.keyCode;(t>=48&&t<=57||t>=96&&t<=105||[8,37,39,46].includes(t)||null!=String.fromCharCode(e.charCode).match(/^[^*|\":<>[\]{}`\\()';@&$+-=]+$/g))&&e.preventDefault()}}),Object(L.jsx)(J.a,{onClick:function(e){c(e,r+1),u(JSON.stringify(parseInt(s)+1))},disabled:r>=Math.ceil(n/i)-1,"aria-label":"next page",children:"rtl"===t.direction?Object(L.jsx)(lt.a,{}):Object(L.jsx)(ut.a,{})}),Object(L.jsx)(J.a,{onClick:function(e){c(e,Math.max(0,Math.ceil(n/i)-1)),u(JSON.stringify(Math.max(0,Math.ceil(n/i)-1)))},disabled:r>=Math.ceil(n/i)-1,"aria-label":"last page",children:"rtl"===t.direction?Object(L.jsx)(ct.a,{}):Object(L.jsx)(at.a,{})})]})}function _t(e){var t=e.split("/"),n=parseInt(t[1])-1,r=parseInt(t[0]),a=parseInt(t[2]);return new Date(a,n,r)}function wt(e){var t=e.table,n=e.onRowClick,r=e.cursor,i=e.selectedRowId,c=Object(a.useState)(0),o=Object(b.a)(c,2),l=o[0],s=o[1],u=Object(a.useState)(25),d=Object(b.a)(u,2),j=d[0],p=d[1],h=Object(a.useState)("id"),f=Object(b.a)(h,2),v=f[0],O=(f[1],Object(a.useState)("ascn")),x=Object(b.a)(O,2),m=x[0];x[1],l>0&&Math.max(0,(1+l)*j-t.rows.length),Object(a.useCallback)((function(e){return function(e){var t=e.row,n=e.sortKey,r=e.reverse;if(!n)return t.cells;var a=t.cells.sort((function(e,t){return e[n]>t[n]?1:-1}));if(r)return a.reverse();return a}({row:e.row,sortKey:v,reverse:"desc"===m})}),[t.rows,v,m]);function g(e){return"Complete"!=e.cells[11]&&(new Date).getTime()>_t(e.cells[5]).getTime()?(new Date).getTime()>_t(e.cells[6]).getTime():null}return console.log("TABLE",t),console.log("DATE CHECKING",(new Date).getDate()<new Date("5/10/2022").getDate()),console.log("DATE STRING",new Date("5/1/2022"),new Date),Object(L.jsxs)(ie.a,{style:{height:"100%",display:"flex",flexDirection:"column"},sx:{width:"100%",overflow:"hidden"},children:[Object(L.jsx)(jt.a,{style:{flex:"1"},children:Object(L.jsxs)(bt.a,{stickyHeader:!0,sx:{minWidth:500},"aria-label":"custom pagination table",children:[Object(L.jsx)(pt.a,{children:Object(L.jsx)(ht.a,{children:t.customHeaders?t.customHeaders.map((function(e){return Object(L.jsx)(mt,{children:e.title},e.id)})):t.heads.map((function(e){return Object(L.jsx)(mt,{children:e},e)}))})}),Object(L.jsx)(ft.a,{children:(j>0?t.rows.slice(l*j,l*j+j):t.rows).map((function(e){return Object(L.jsx)(yt,{isSelected:i===e.id,cursor:r,onClick:function(){return n(e.id)},isDelayed:g(e),children:e.cells.map((function(e,t){return Object(L.jsx)(mt,{children:e},t+e)}))},e.id)}))})]})}),Object(L.jsx)(vt.a,{rowsPerPageOptions:[5,10,25],colSpan:3,count:t.rows.length,rowsPerPage:j,page:l,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onPageChange:function(e,t){s(t)},onRowsPerPageChange:function(e){p(parseInt(e.target.value,10)),s(0)},ActionsComponent:kt})]})}var Ct={width:"20px",backgroundColor:"transparent",borderColor:"transparent",borderBottom:"0px !important",border:"0px",outline:"0px",TextAlign:"center",color:"#0036EC",alignItems:"center"},St=n.p+"static/media/empty_temp_1.93444e21.png",Tt=n(97),Dt=n.n(Tt);function Nt(e,t){return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function It(e){return Dt()(e).format("D/M/YYYY")}function Pt(e){for(var t=""+e;t.length<6;)t="0"+t;return"#".concat(t)}var Lt=n(83),At=n.n(Lt),Et=n(168),Mt=n.n(Et),Wt=n(169),Rt=n.n(Wt),Ft=n(82);function Bt(e){if(0===e.length)return 0;for(var t=e[0],n=0;n<e.length;n++)t<e[n]&&(t=e[n]);return t}function qt(e){return Bt(e)+1}function zt(e){(e=e.sort((function(e,t){return e.sort_order-t.sort_order}))).forEach((function(e){return zt(e.children)}))}function Ht(e){e=e.sort((function(e,t){return e.sort_order-t.sort_order}))}function Ut(e,t){var n=!0;if(t.children.includes(e)){var r,a=Object(Ft.a)(t.children);try{for(a.s();!(r=a.n()).done;){if(r.value.sort_order<e.sort_order){n=!1;break}}}catch(i){a.e(i)}finally{a.f()}}else n=!1;return n}function Gt(e,t){var n=!0;if(t.children.includes(e)){var r,a=Object(Ft.a)(t.children);try{for(a.s();!(r=a.n()).done;){if(r.value.sort_order>e.sort_order){n=!1;break}}}catch(i){a.e(i)}finally{a.f()}}else n=!1;return n}function Yt(e,t){var n=t.find((function(e){return e.is_start}));return!!n&&e.task_status_id===n.id}function Vt(e,t){return Yt(e,t)||function(e,t){var n=t.find((function(e){return e.is_final}));return!!n&&e.task_status_id===n.id}(e,t)}var Xt,Jt,Kt,Qt,$t,Zt=n(109),en=n.n(Zt),tn=n(268),nn=n(427),rn=n(470),an=n(468),cn=n(469),on=n(428);!function(e){e[e.Text=1]="Text",e[e.Password=2]="Password",e[e.TextArea=3]="TextArea"}(Xt||(Xt={})),(Xt||(Xt={})).parse=function(e){switch(e){case 1:default:return Xt.Text;case 2:return Xt.Password;case 3:return Xt.TextArea}},function(e){e[e.Dropdown=1]="Dropdown"}(Jt||(Jt={})),(Jt||(Jt={})).parse=function(e){return Jt.Dropdown},function(e){e[e.Dropdown=1]="Dropdown",e[e.Text=2]="Text",e[e.Password=3]="Password",e[e.RadioGroup=4]="RadioGroup",e[e.Checkbox=5]="Checkbox",e[e.TextArea=6]="TextArea",e[e.Number=7]="Number",e[e.Date=8]="Date"}(Kt||(Kt={})),(Qt=Kt||(Kt={})).fromPropertyInputType=function(e){return e===Xt.Text?Kt.Text:e===Xt.Password?Kt.Password:e===Xt.TextArea?Kt.TextArea:void 0},Qt.fromCriteriaType=function(e){if(e===Jt.Dropdown)return Kt.Dropdown},function(e){e[e.Main=0]="Main",e[e.Property=1]="Property",e[e.Criteria=2]="Criteria",e[e.Role=3]="Role",e[e.Address=4]="Address",e[e.Currency=5]="Currency",e[e.Display=6]="Display"}($t||($t={}));var ln=n(449),sn=n(426),un=n(440),dn=n(456),jn=n(457),bn=n(455),pn=Object(F.a)("div")((function(e){return{display:"flex",flexDirection:"column",alignItems:"flex-start",margin:e.theme.spacing(1),justifyContent:"flexs-start",flex:"1"}})),hn=Object(F.a)("div")((function(){return{display:"flex",flexDirection:"row"}}));function fn(e){var t,n,r=Object(a.useState)(e.value),i=Object(b.a)(r,2),c=i[0],o=i[1],l=Object(a.useState)(!1),s=Object(b.a)(l,2),u=s[0],p=s[1],h=Object(a.useState)(!1),f=Object(b.a)(h,2),v=f[0],O=f[1];Object(a.useEffect)((function(){o(e.value),O(!1),p(!1)}),[e]);var x=function(e){O(!0),o(e)},m=function(){var t=Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c.length<1)){t.next=4;break}p(!0),t.next=8;break;case 4:return p(!1),t.next=7,e.update(c);case 7:O(!1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(L.jsxs)(pn,{children:[(e.type===Kt.Text||e.type===Kt.Number||e.type===Kt.TextArea)&&Object(L.jsx)(ln.a,{disabled:!e.editable,variant:null!==(t=e.variant)&&void 0!==t?t:"outlined",required:!0,type:e.type===Kt.Number?"number":"text",value:c,label:e.label,inputProps:{maxLength:e.maxLength},multiline:e.type===Kt.TextArea,rows:e.type===Kt.TextArea?null!==(n=e.rows)&&void 0!==n?n:3:1,color:"secondary",fullWidth:!0,error:u,onChange:function(e){return x(e.target.value)},onInput:e.type===Kt.Number?function(t){var n;t.target.value=Math.max(0,parseInt(t.target.value)).toString().slice(0,null!==(n=e.maxLength)&&void 0!==n?n:120)}:void 0}),e.type===Kt.Dropdown&&Object(L.jsx)(sn.a,{sx:{minWidth:200},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:e.label+"-label",children:e.label}),Object(L.jsx)(un.a,{fullWidth:!0,disabled:!e.editable,error:u,labelId:e.label+"-label",value:c,label:e.label,onChange:function(e){return x(e.target.value)},children:e.values.map((function(e){return Object(L.jsx)(bn.a,{value:e.id,children:e.description},e.id)}))})]})}),v&&Object(L.jsxs)(hn,{children:[Object(L.jsx)(tn.a,{style:{color:Ce.a[500]},onClick:function(){o(e.value),O(!1)},children:"Cancel"}),Object(L.jsx)(tn.a,{style:{color:we.a[500]},onClick:m,children:"Update"})]})]})}function vn(e){return Object(L.jsxs)(nn.a,{fullWidth:!0,maxWidth:"sm",open:e.isOpen,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(L.jsx)(on.a,{id:"alert-dialog-title",children:e.title}),Object(L.jsx)(an.a,{children:Object(L.jsx)(cn.a,{id:"alert-dialog-description",children:Object(L.jsx)(fn,{editable:!0,label:"Comment",type:Kt.TextArea,value:e.comment,maxLength:470,rows:5,variant:"outlined",initialValue:e.comment,update:function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.submit(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})})}),Object(L.jsx)(rn.a,{children:Object(L.jsx)(tn.a,{onClick:e.onClose,children:"Dismiss"})})]})}function On(e){var t=Object(a.useState)(e.progress),n=Object(b.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(!1),o=Object(b.a)(c,2),l=o[0],s=o[1];Object(a.useEffect)((function(){i(e.progress)}),[e]);var u=function(){var t=Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p()){t.next=3;break}return t.next=3,e.submit(r);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function p(){var t=!0;return r===e.progress||r<0&&r>100?(t=!1,s(!0)):s(!1),t}return Object(L.jsxs)(nn.a,{fullWidth:!0,maxWidth:"sm",open:e.isOpen,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(L.jsx)(on.a,{id:"alert-dialog-title",children:e.title}),Object(L.jsx)(an.a,{children:Object(L.jsxs)(cn.a,{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},id:"alert-dialog-description",children:[Object(L.jsx)(ln.a,{style:{margin:"1rem"},label:"Progress",required:!0,error:l,type:"number",value:r.toString(),onChange:function(e){var t=Number(e.target.value);!Number.isNaN(t)&&t>=0&&t<=100&&i(Number(e.target.value))}}),Object(L.jsx)(V.a,{variant:"h4",children:"%"})]})}),Object(L.jsxs)(rn.a,{children:[Object(L.jsx)(tn.a,{color:"warning",onClick:e.onClose,children:"Dismiss"}),Object(L.jsx)(tn.a,{color:"success",onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Submit"})]})]})}var xn=n(437),mn=n(429),gn=n(438),yn=n(58);function kn(e){var t=Object(a.useState)(e.start),n=Object(b.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(e.end),o=Object(b.a)(c,2),l=o[0],s=o[1],u=Object(a.useState)(null),h=Object(b.a)(u,2),f=h[0],v=h[1],O=Object(a.useState)(null),x=Object(b.a)(O,2),m=x[0],g=x[1];function y(){v(null),g(null)}return Object(a.useEffect)((function(){i(e.start),s(e.end)}),[e.start,e.end]),Object(L.jsxs)(nn.a,{fullWidth:!0,maxWidth:"sm",open:e.isOpen,onClose:function(){e.onClose(),y()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(L.jsx)(on.a,{id:"alert-dialog-title",children:e.title}),Object(L.jsx)(an.a,{children:Object(L.jsx)(cn.a,{id:"alert-dialog-description",style:{padding:"1rem",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:Object(L.jsxs)(mn.b,{dateAdapter:xn.a,locale:yn.a,children:[Object(L.jsx)(gn.a,{label:"Planned Start Date",disabled:!e.isStartEditable,openTo:"day",views:["year","month","day"],value:f?new Date(f):new Date(r),onChange:function(e){e&&v(e.getTime())},renderInput:function(e){return Object(L.jsx)(ln.a,Object(p.a)({},e))}}),Object(L.jsx)(gn.a,{label:"Planned End Date",openTo:"day",disabled:!e.isEndEditable,views:["year","month","day"],value:m?new Date(m):new Date(l),onChange:function(e){e&&g(e.getTime())},renderInput:function(e){return Object(L.jsx)(ln.a,Object(p.a)({},e))}})]})})}),Object(L.jsxs)(rn.a,{children:[Object(L.jsx)(tn.a,{onClick:function(){e.onClose(),y()},color:"warning",children:"Dismiss"}),Object(L.jsx)(tn.a,{disabled:!f&&!m,onClick:Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.submit(f,m);case 2:case"end":return t.stop()}}),t)}))),color:"success",children:"Submit"})]})]})}var _n=n(242),wn=n.n(_n),Cn=n(170),Sn=n.n(Cn),Tn=n(209),Dn=n(450),Nn=a.createContext({toggleColorMode:function(){}});function In(e){return"light"===e?ce.a[400]:ce.a[800]}function Pn(e){var t=a.useState((function(){var e;return null!==(e=localStorage.getItem("theme"))&&void 0!==e?e:"light"})),n=Object(b.a)(t,2),r=n[0],i=n[1],c=a.useMemo((function(){return{toggleColorMode:function(){localStorage.setItem("theme","light"===r?"dark":"light"),i((function(e){return"light"===e?"dark":"light"}))}}}),[]),o=a.useMemo((function(){return Object(Tn.a)({palette:Object(p.a)({mode:r},"light"===r?{primary:{main:"#7986cb",light:"#aab6fe",dark:"#49599a"},secondary:{main:"#17516b",light:"#4b7d99",dark:"#002940"},background:{paper:"#f5f5f5"}}:{primary:{main:"#5c6bc0",light:"#8e99f3",dark:"#26418f"},secondary:{main:"#17516b",light:"#4b7d99",dark:"#002940"}}),shape:{borderRadius:"4px"},typography:{fontFamily:"Poppins, sans-serif"}})}),[r]);return Object(L.jsx)(Nn.Provider,{value:c,children:Object(L.jsx)(Dn.a,{theme:o,children:e.children})})}var Ln=n(447),An=n(243),En=n.n(An),Mn=n(466);function Wn(e){var t=a.useState(null),n=Object(b.a)(t,2),r=n[0],i=n[1],c=function(){i(null)},o=Boolean(r);return Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{"aria-owns":o?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:function(e){i(e.currentTarget)},onMouseLeave:c,children:e.children}),Object(L.jsx)(Mn.a,{id:"mouse-over-popover",sx:{pointerEvents:"none"},open:o,anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:c,disableRestoreFocus:!0,children:Object(L.jsx)(V.a,{sx:{p:1},children:e.hoverText})})]})}var Rn=n(241),Fn=n.n(Rn),Bn=Object(F.a)("div")((function(e){e.theme;var t=e.loaded;return{display:"flex",flexDirection:"column",alignItems:t?"flex-start":"center",justifyContent:t?"flex-start":"center",height:"100%"}}));function qn(){var e=Object(a.useContext)(A).user,t=Object(s.h)(),n=Object(B.a)(),i=Object(a.useState)([]),c=Object(b.a)(i,2),o=c[0],l=c[1],u=Object(a.useState)([]),p=Object(b.a)(u,2),h=p[0],f=p[1],v=Object(a.useState)(!1),O=Object(b.a)(v,2),x=O[0],m=O[1],g=Object(a.useState)(null),y=Object(b.a)(g,2),k=y[0],_=y[1],w=Object(a.useState)([]),S=Object(b.a)(w,2),T=S[0],N=S[1];Object(a.useEffect)((function(){console.log("Request To",Ye),m(!0),C(Ye,r.Get,null,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},"Something went wrong",!0).then((function(e){console.log("response",e),m(!1),l(e.tasks),console.log("response",e.tasks),f(e.task_status)})).catch((function(e){console.log("err",e),m(!1),_(e.message)}))}),[]);var I=function(){var t=Object(j.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(!0),t.next=4,C(Ve(n),r.Get,null,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},"Something went wrong",!0);case 4:a=t.sent,m(!1),l(a.tasks),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),m(!1),_(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=Object(j.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(!0),t.next=4,C(Xe(n),r.Get,null,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},"Something went wrong",!0);case 4:a=t.sent,m(!1),l(a.tasks),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),m(!1),_(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();var E=function(){var t=Object(j.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,$(!1),m(!0),t.next=5,C(D+"/api/project/task/".concat(q,"/comment"),r.Post,{comment:n},{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},"Something went wrong",!0);case 5:a=t.sent,m(!1),l(a.tasks),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),m(!1),_(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=Object(j.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,be(!1),m(!0),t.next=5,C(D+"/api/project/task/".concat(te,"/progress"),r.Post,{progress:n},{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},"Something went wrong",!0);case 5:a=t.sent,m(!1),l(a.tasks),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),m(!1),_(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),W=function(){var t=Object(j.a)(d.a.mark((function t(n,a){var i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Pe(!1),m(!0),t.next=5,C(D+"/api/project/task/".concat(fe,"/reschedule"),r.Post,{request_start:n,request_end:a},{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},"Something went wrong",!0);case 5:i=t.sent,m(!1),l(i.tasks),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),m(!1),_(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}(),R=Object(a.useState)(null),F=Object(b.a)(R,2),q=F[0],z=F[1],H=Object(a.useState)(null),U=Object(b.a)(H,2),G=U[0],Y=U[1],X=Object(a.useState)(!1),K=Object(b.a)(X,2),Q=K[0],$=K[1],Z=Object(a.useState)(null),ee=Object(b.a)(Z,2),te=ee[0],ne=ee[1],re=Object(a.useState)(null),ae=Object(b.a)(re,2),ie=(ae[0],ae[1]),ce=Object(a.useState)(null),oe=Object(b.a)(ce,2),le=oe[0],se=oe[1],ue=Object(a.useState)(!1),de=Object(b.a)(ue,2),je=de[0],be=de[1],pe=Object(a.useState)(null),he=Object(b.a)(pe,2),fe=he[0],ve=(he[1],Object(a.useState)(null)),Oe=Object(b.a)(ve,2),xe=Oe[0],me=(Oe[1],Object(a.useState)(null)),ke=Object(b.a)(me,2),_e=ke[0],De=(ke[1],Object(a.useState)(!1)),Ne=Object(b.a)(De,2),Ie=Ne[0],Pe=Ne[1],Le=Object(a.useState)(!1),Ae=Object(b.a)(Le,2),Ee=Ae[0],Me=Ae[1],We=function(){var t=Object(j.a)(d.a.mark((function t(){var n,a,i,c,o,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Me(!0),t.next=4,fetch(Je(T),{method:r.Get,headers:{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr),"Content-Type":"application/json"}});case 4:if(!(n=t.sent)){t.next=17;break}return a=n.headers.get("File-Name"),i=n.headers.get("Content-Type"),t.next=10,n.blob();case 10:c=t.sent,o=new Blob([c],{type:i}),(l=document.createElement("a")).download=a,l.href=window.URL.createObjectURL(o),l.click(),l.remove();case 17:Me(!1),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),Me(!1);case 23:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(){return t.apply(this,arguments)}}();return Object(L.jsxs)(Bn,{loaded:!x&&!k,children:[x&&Object(L.jsx)(nt,{text:"Loading assigned tasks.."}),k&&Object(L.jsx)(Ze,{text:k}),!x&&!k&&0===o.length&&Object(L.jsxs)("div",{style:{alignItems:"center",justifyContent:"center",display:"flex",width:"100%",flexDirection:"column",height:"100%"},children:[Object(L.jsx)("img",{src:St}),Object(L.jsx)(V.a,{variant:"h6",children:"No assigned tasks"})]}),!x&&!k&&o.length>0&&Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},children:[Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(L.jsx)(V.a,{style:{paddingLeft:n.spacing(1)},variant:"h6",children:"Assigned Tasks"}),Object(L.jsx)(Wn,{hoverText:"Print Selected Tasks",children:Object(L.jsx)(J.a,{style:{marginLeft:n.spacing(1)},onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),disabled:0===T.length||Ee,children:Object(L.jsx)(En.a,{style:{color:0===T.length?In(n.palette.mode):n.palette.warning.main}})})})]}),Object(L.jsx)(wt,{table:function(){var e=[{id:"Select",title:Object(L.jsx)(Ln.a,{checked:0!==T.length&&o.map((function(e){return e.id})).every((function(e){return T.includes(e)})),onChange:function(){var e=0!==T.length&&o.map((function(e){return e.id})).every((function(e){return T.includes(e)}));N(e?[]:Object(Ge.a)(o.map((function(e){return e.id}))))}})},{id:"Project",title:"Project"},{id:"Client",title:"Client"},{id:"Code",title:"Code"},{id:"Name",title:"Name"},{id:"Planned Start",title:"Planned Start"},{id:"Planned End",title:"Planned End"},{id:"Actual Start",title:"Actual Start"},{id:"Actual End",title:"Actual End"},{id:"Progress",title:"Progress"},{id:"Status",title:"Status"},{id:"Actions",title:"Actions"}];return console.log("TASKS USERS",o),{heads:[],customHeaders:e,rows:o.map((function(e){var r,a,i,c;return{id:e.id,cells:[Object(L.jsx)(Ln.a,{checked:-1!==T.indexOf(e.id),onChange:function(){var t=T.indexOf(e.id);-1!==t?(T.splice(t,1),N(Object(Ge.a)(T))):(T.push(e.id),N(Object(Ge.a)(T)))}}),e.project_title,null!==(r=e.client_description)&&void 0!==r?r:"-",null!==(a=e.task_code)&&void 0!==a?a:"-",e.task_name,e.planned_start_date?It(new Date(e.planned_start_date)):"-",e.planned_end_date?It(new Date(e.planned_end_date)):"-",e.actual_start_date?It(new Date(e.actual_start_date)):"-",e.actual_end_date?It(new Date(e.actual_end_date)):"-",e.task_progress+"%",null!==(i=null===(c=h.find((function(t){return t.id===e.task_status_id})))||void 0===c?void 0:c.description)&&void 0!==i?i:"-",Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(e.id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),disabled:!Yt(e,h)||!e.can_start,children:Object(L.jsx)(At.a,{style:{color:Yt(e,h)&&e.can_start?we.a[700]:In(n.palette.mode)}})}),Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e.id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),disabled:Vt(e,h),children:Object(L.jsx)(Mt.a,{style:{color:Vt(e,h)?In(n.palette.mode):Ce.a[700]}})}),Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(100);case 2:case"end":return e.stop()}}),e)}))),disabled:!e.can_reschedule,children:Object(L.jsx)(Rt.a,{style:{color:e.can_reschedule?Te.a[800]:In(n.palette.mode)}})}),Object(L.jsx)(J.a,{onClick:function(){var t;z(e.id),Y(null!==(t=e.comment)&&void 0!==t?t:""),$(!0)},children:Object(L.jsx)(en.a,{style:{color:ge.a[700]}})}),Object(L.jsx)(J.a,{onClick:function(){ne(e.id),se(e.task_progress),be(!0)},disabled:!e.can_update_progress,children:Object(L.jsx)(Sn.a,{style:{color:e.can_update_progress?Se.a[800]:In(n.palette.mode)}})}),Object(L.jsx)(J.a,{onClick:function(){ne(e.id),ie(e.project_id),se(100),be(!0)},disabled:!e.can_update_progress,children:Object(L.jsx)(Fn.a,{style:{color:e.can_update_progress?we.a[800]:In(n.palette.mode)}})}),Object(L.jsx)(J.a,{onClick:function(){return t("projects/".concat(e.project_id,"/preview"))},children:Object(L.jsx)(wn.a,{style:{color:ye.a[700]}})})]})]}}))}}(),onRowClick:function(){},cursor:"default"}),Object(L.jsx)(vn,{isOpen:Q,onClose:function(){return $(!1)},title:"Comment",comment:G,submit:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(L.jsx)(On,{isOpen:je,onClose:function(){return be(!1)},title:"Progress",progress:null!==le&&void 0!==le?le:0,submit:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(L.jsx)(kn,{isOpen:Ie,onClose:function(){return Pe(!1)},title:"Reschedule Task",start:null!==xe&&void 0!==xe?xe:(new Date).getTime(),end:null!==_e&&void 0!==_e?_e:(new Date).getTime(),submit:function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),isStartEditable:function(){var e=o.find((function(e){return e.id===fe}));return void 0===(null===e||void 0===e?void 0:e.actual_start_date)}(),isEndEditable:function(){var e=o.find((function(e){return e.id===fe}));return void 0===(null===e||void 0===e?void 0:e.actual_end_date)}()})]})]})}var zn=Object(F.a)(ie.a)((function(e){var t=e.theme,n=e.color;return{backgroundColor:null!==n&&void 0!==n?n:ce.a[100],margin:t.spacing(2),padding:t.spacing(2),cursor:"pointer"}})),Hn=Object(F.a)("div")((function(e){var t=e.theme;return Object(p.a)(Object(p.a)({},t.typography.body2),{},{textAlign:"start",color:t.palette.text.secondary,boxShadow:"none",margin:t.spacing(1),overflowY:"scroll"})})),Un=Object(F.a)("div")((function(e){e.theme;return{height:"100%",display:"grid",gridTemplateColumns:"1fr 4fr",width:"100%"}})),Gn=Object(F.a)(ie.a)((function(e){return{padding:e.theme.spacing(1)}}));function Yn(){var e=Object(s.h)(),t=Object(a.useContext)(A).user,n=Object(B.a)();return Object(L.jsxs)(Un,{children:[Object(L.jsx)(Hn,{children:Object(L.jsxs)(Gn,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Quick Menu"}),Object(L.jsx)(L.Fragment,{children:Be(n.palette.mode).filter((function(e){return"/"!==e.route})).map((function(t){return Object(L.jsxs)(zn,{color:t.cardColor,onClick:function(){return e(t.route)},children:[Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h4",children:t.title}),Object(L.jsx)(V.a,{component:"p",variant:"subtitle1",children:t.desc})]},t.route)}))}),Object(L.jsx)(L.Fragment,{children:qe(t.token,n.palette.mode).filter((function(e){return"/"!==e.route})).map((function(t){return Object(L.jsxs)(zn,{color:t.cardColor,onClick:function(){return e(t.route)},children:[Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h4",children:t.title}),Object(L.jsx)(V.a,{component:"p",variant:"subtitle1",children:t.desc})]},t.route)}))})]})}),Object(L.jsx)(Hn,{style:{flex:"1"},children:Object(L.jsx)(qn,{})})]})}var Vn=n(435),Xn=n(248),Jn=n.n(Xn),Kn=n(247),Qn=n.n(Kn),$n=n.p+"static/media/logo.60baa8ca.png",Zn=n(249),er=n.n(Zn),tr=240,nr=function(e){return{width:tr,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}},rr=function(e){return Object(R.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(e.spacing(7)," + 1px)")},e.breakpoints.up("sm"),{width:"calc(".concat(e.spacing(9)," + 1px)")})},ar=Object(F.a)(U.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(p.a)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{marginLeft:tr,width:"calc(100% - ".concat(tr,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})})),ir=Object(F.a)("div")((function(e){var t=e.theme;return Object(p.a)(Object(p.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})})),cr=Object(F.a)(V.a)((function(e){return{color:e.theme.palette.secondary.light,fontWeight:"bold"}})),or=Object(F.a)(z.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return Object(p.a)(Object(p.a)({width:tr,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},n&&Object(p.a)(Object(p.a)({},nr(t)),{},{"& .MuiDrawer-paper":nr(t)})),!n&&Object(p.a)(Object(p.a)({},rr(t)),{},{"& .MuiDrawer-paper":rr(t)}))}));function lr(){var e=Object(B.a)(),t=Object(a.useState)(!1),n=Object(b.a)(t,2),r=n[0],i=n[1],c=Object(s.g)().pathname,o=Object(a.useContext)(A),l=o.logout,u=o.user,h=function(){return"/"===c},f=Object(s.h)(),v=function(e){f(e)},O=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=Object(a.useContext)(Nn).toggleColorMode;return Object(L.jsxs)(q.a,{sx:{display:"flex",height:"100%",overflowX:"hidden"},children:[Object(L.jsx)(H.a,{}),Object(L.jsx)(ar,{position:"fixed",open:r,children:Object(L.jsxs)(G.a,{children:[Object(L.jsx)(J.a,{color:"inherit","aria-label":"open drawer",onClick:function(){i(!0)},edge:"start",sx:Object(p.a)({marginRight:"36px"},r&&{display:"none"}),children:Object(L.jsx)(Q.a,{})}),Object(L.jsx)("img",{style:{marginRight:e.spacing(3)},src:$n,width:40,height:40}),Object(L.jsx)(V.a,{variant:"h6",noWrap:!0,component:"div",children:N})]})}),Object(L.jsxs)(or,{variant:"permanent",open:r,children:[Object(L.jsxs)(ir,{style:{justifyContent:"space-between"},children:[Object(L.jsx)(cr,{variant:"h6",children:null===u||void 0===u?void 0:u.username}),Object(L.jsx)(J.a,{onClick:function(){i(!1)},children:"ltr"===e.direction?Object(L.jsx)(Z.a,{}):Object(L.jsx)(te.a,{})})]}),Object(L.jsx)(X.a,{}),Object(L.jsx)(Y.a,{children:Be(e.palette.mode).map((function(e){return Object(L.jsxs)(ne.a,{button:!0,onClick:function(){v(e.route)},children:[Object(L.jsx)(re.a,{children:e.icon}),Object(L.jsx)(ae.a,{primary:e.title})]},e.route)}))}),qe(u.token,e.palette.mode).length>0&&Object(L.jsx)(X.a,{}),qe(u.token,e.palette.mode).length>0&&Object(L.jsx)(Y.a,{children:qe(u.token,e.palette.mode).map((function(e){return Object(L.jsxs)(ne.a,{button:!0,onClick:function(){v(e.route)},children:[Object(L.jsx)(re.a,{children:e.icon}),Object(L.jsx)(ae.a,{primary:e.title})]},e.route)}))}),ze(u.token,e.palette.mode).length>0&&Object(L.jsx)(X.a,{}),ze(u.token,e.palette.mode).length>0&&Object(L.jsx)(Y.a,{children:ze(u.token,e.palette.mode).map((function(e){return Object(L.jsxs)(ne.a,{button:!0,onClick:function(){v(e.route)},children:[Object(L.jsx)(re.a,{children:e.icon}),Object(L.jsx)(ae.a,{primary:e.title})]},e.route)}))}),Object(L.jsx)(X.a,{}),Object(L.jsxs)(ne.a,{button:!0,onClick:x,color:"inherit",children:[Object(L.jsx)(re.a,{children:"dark"===e.palette.mode?Object(L.jsx)(Qn.a,{style:{color:ye.a[700]}}):Object(L.jsx)(Jn.a,{style:{color:ye.a[700]}})}),Object(L.jsx)(ae.a,{primary:"Toggle Theme"})]},"switch-theme"),Object(L.jsxs)(ne.a,{button:!0,onClick:function(){return f("/change-password")},children:[Object(L.jsx)(re.a,{children:Object(L.jsx)(er.a,{style:{color:ye.a[400]}})}),Object(L.jsx)(ae.a,{primary:"Change Password"})]},"change-password"),Object(L.jsxs)(ne.a,{button:!0,onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:[Object(L.jsx)(re.a,{children:Object(L.jsx)(Vn.a,{style:{color:Se.a[900]}})}),Object(L.jsx)(ae.a,{primary:"Logout"})]},"logout")]}),Object(L.jsxs)(q.a,{component:"main",style:{padding:0,margin:0,height:"/reports/gantt"===c?"99%":"calc(100% - 64px)",overflowY:"/reports/gantt"===c?"hidden":void 0,overflowX:"/reports/gantt"===c?"hidden":void 0},sx:{flexGrow:1,p:3},children:[Object(L.jsx)(ir,{}),h()&&Object(L.jsx)(Yn,{}),!h()&&Object(L.jsx)(s.b,{})]})]})}function sr(e){return Object(L.jsxs)(nn.a,{fullWidth:!0,maxWidth:"sm",open:e.isOpen,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(L.jsx)(on.a,{id:"alert-dialog-title",children:e.title}),Object(L.jsx)(an.a,{children:Object(L.jsx)(cn.a,{id:"alert-dialog-description",children:e.content})}),Object(L.jsx)(rn.a,{children:Object(L.jsx)(tn.a,{onClick:e.onClose,children:"Dismiss"})})]})}var ur=Object(F.a)("div")((function(e){return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:e.theme.palette.text.primary}}));function dr(){var e=Object(B.a)();return Object(L.jsxs)(ur,{children:[Object(L.jsx)("img",{style:{marginBottom:e.spacing(3)},src:$n,width:180,height:180}),Object(L.jsx)(V.a,{variant:"h5",children:N})]})}var jr=n(460),br=n(471),pr=n(430),hr=Object(a.forwardRef)((function(e,t){return Object(L.jsx)(pr.a,Object(p.a)({direction:"up",ref:t},e))}));function fr(e){return Object(L.jsxs)(nn.a,{open:e.isOpen,TransitionComponent:hr,keepMounted:!0,onClose:e.dismiss,"aria-describedby":"alert-dialog-slide-description",children:[Object(L.jsx)(on.a,{children:e.title}),Object(L.jsx)(an.a,{children:Object(L.jsx)(cn.a,{id:"alert-dialog-slide-description",children:e.content})}),Object(L.jsxs)(rn.a,{children:[Object(L.jsx)(tn.a,{onClick:e.dismiss,children:e.negativeText}),Object(L.jsx)(tn.a,{onClick:Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.positive();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),children:e.positiveText})]})]})}var vr=Object(F.a)(ie.a)((function(e){var t=e.theme;return{backgroundColor:t.palette.background.paper,padding:t.spacing(2),display:"flex",flexDirection:"column",width:"600px",height:"350px",justifyContent:"space-between"}})),Or=Object(F.a)("div")((function(e){var t=e.theme;return{display:"flex",flexDirection:"column",height:"100%",alignItems:"center",justifyContent:e.loaded?"space-evenly":"center",backgroundColor:t.palette.background.default}})),xr=Object(F.a)(tn.a)((function(e){return{height:e.theme.spacing(6)}}));function mr(){var e=Object(a.useContext)(A),t=Object(a.useState)(!1),n=Object(b.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(!1),o=Object(b.a)(c,2),l=o[0],s=o[1],u=Object(a.useState)(""),p=Object(b.a)(u,2),h=p[0],f=p[1],v=Object(a.useState)(""),O=Object(b.a)(v,2),x=O[0],m=O[1],g=Object(a.useState)(""),y=Object(b.a)(g,2),k=y[0],_=y[1],C=Object(a.useState)(!1),S=Object(b.a)(C,2),T=S[0],D=S[1],N=Object(a.useState)(""),I=Object(b.a)(N,2),P=I[0],E=I[1],M=Object(a.useState)(!1),W=Object(b.a)(M,2),R=W[0],F=W[1],B=Object(a.useState)(!1),q=Object(b.a)(B,2),z=q[0],H=q[1],U=Object(a.useState)(!1),G=Object(b.a)(U,2),Y=G[0],X=G[1],J=function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!K()){t.next=12;break}return t.prev=1,i(!0),t.next=5,e.login(k,P,null!==n&&void 0!==n?n:z);case 5:window.location.reload(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0 instanceof w?X(!0):(s(!0),m(t.t0.message),f("Oops, something went wrong!")),i(!1);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();function K(){var e=!0;return k.length<1?(D(!0),e=!1):D(!1),P.length<1?(F(!0),e=!1):F(!1),e}return Object(L.jsxs)(Or,{loaded:!r,children:[r&&Object(L.jsx)(nt,{text:"Signing in.."}),!r&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(dr,{}),Object(L.jsxs)(vr,{children:[Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h4",children:"Login"}),Object(L.jsx)(ln.a,{label:"Username",value:k,fullWidth:!0,required:!0,error:T,type:"text",onChange:function(e){_(e.target.value)}}),Object(L.jsx)(ln.a,{required:!0,fullWidth:!0,label:"Password",value:P,error:R,type:"password",onChange:function(e){E(e.target.value)},onSubmit:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),onKeyDown:function(e){"Enter"===e.key&&J()}}),Object(L.jsx)(jr.a,{control:Object(L.jsx)(br.a,{checked:z,onChange:function(e){return H(e.target.checked)}}),label:"Force Login"}),Object(L.jsx)(xr,{onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),variant:"contained",color:"success",children:"Login"})]})]}),Object(L.jsx)(sr,{isOpen:l,onClose:function(){return s(!1)},content:x,title:h}),Object(L.jsx)(fr,{title:"Session found.",content:"Are you sure you want to terminate the other session?",negativeText:"Cancel",positiveText:"Force Login",positive:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),X(!1),e.next=4,J(!0);case 4:case"end":return e.stop()}}),e)}))),dismiss:function(){return X(!1)},isOpen:Y})]})}var gr,yr=function(e){return D+"/api/client/".concat(e)},kr=n(472),_r=(Object(F.a)("div")((function(e){e.theme;return{height:"100%",width:"100%",display:"flex",flexDirection:"column"}})),Object(F.a)(ln.a)((function(e){var t=e.theme;return{marginTop:t.spacing(1),marginBottom:t.spacing(1),display:"block"}})),Object(F.a)(kr.a)((function(e){var t=e.theme;return{position:"fixed",bottom:t.spacing(4),right:t.spacing(4)}}))),wr=Object(F.a)("div")((function(e){return{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",margin:e.theme.spacing(1)}})),Cr=(Object(F.a)(wr)((function(e){var t=e.theme,n=e.header,r=e.bg,a=e.elevation;return{borderLeft:"20px solid ".concat(n),backgroundColor:"light"===t.palette.mode?r:n,padding:"".concat(t.spacing(1.5)," ").concat(t.spacing(2)," ").concat(t.spacing(1.5)," ").concat(t.spacing(1.5)),borderRadius:t.shape.borderRadius,boxShadow:null!==a&&void 0!==a?a:t.shadows[1]}})),Object(F.a)(ie.a)((function(e){var t=e.theme;return{backgroundColor:ce.a[200],padding:t.spacing(1),margin:t.spacing(2),display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"}})),Object(F.a)("div")((function(e){var t=e.theme;return{padding:t.spacing(1),margin:t.spacing(2),display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"flex-start"}}))),Sr=Object(F.a)("div")((function(e){var t=e.theme,n=e.isDataLoaded;return{backgroundColor:t.palette.background.default,padding:t.spacing(1),height:"100%",display:"flex",flexDirection:"column",justifyContent:n?"flex-start":"center",alignItems:n?"stretch":"center"}})),Tr=Object(F.a)(X.a)((function(e){var t=e.theme;return{marginRight:t.spacing(3),marginLeft:t.spacing(3),backgroundColor:t.palette.secondary.dark}})),Dr=Object(F.a)(X.a)((function(e){var t=e.theme;return{marginRight:t.spacing(1),marginLeft:t.spacing(1),marginBottom:t.spacing(2),marginTop:t.spacing(2),backgroundColor:t.palette.secondary.light}})),Nr=n(204),Ir=n.n(Nr),Pr=n(203),Lr=n.n(Pr),Ar=n.p+"static/media/empty_search.54b419bd.png";function Er(e){var t=Object(B.a)(),n=e.pageCount,r=e.currentPage,i=e.movePage,c=Object(a.useState)(JSON.stringify(r+1)),o=Object(b.a)(c,2),l=o[0],s=o[1];return Object(L.jsx)(q.a,{sx:{flexShrink:0,ml:2.5,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},children:Object(L.jsxs)(ie.a,{elevation:"light"===t.palette.mode?0:1,style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[900],margin:t.spacing(1)},children:[Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(gr.First);case 2:s(JSON.stringify(r+1));case 3:case"end":return e.stop()}}),e)}))),disabled:0===r||null==r,"aria-label":"first page",children:"rtl"===t.direction?Object(L.jsx)(at.a,{}):Object(L.jsx)(ct.a,{})}),Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(gr.Previous);case 2:s(JSON.stringify(r+1));case 3:case"end":return e.stop()}}),e)}))),disabled:0===r||null==r,"aria-label":"previous page",children:"rtl"===t.direction?Object(L.jsx)(ut.a,{}):Object(L.jsx)(lt.a,{})}),Object(L.jsx)(dt.a,{value:l,type:"string",disableUnderline:!0,style:Wr,onChange:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0"!=t.target.value){e.next=4;break}return e.abrupt("return");case 4:s(t.target.value);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onKeyUp:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!=t.keyCode){e.next=10;break}if(""!=l){e.next=4;break}return s(JSON.stringify(r+1)),e.abrupt("return");case 4:if(NaN!==(n=parseInt(l)-1)){e.next=8;break}return s(JSON.stringify(r+1)),e.abrupt("return");case 8:return e.next=10,i(gr.Input,n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onKeyPress:function(e){var t=e.keyCode;(t>=48&&t<=57||t>=96&&t<=105||[8,37,39,46].includes(t)||null!=String.fromCharCode(e.charCode).match(/^[^*|\":<>[\]{}`\\()';@&$+-=]+$/g))&&e.preventDefault()}}),Object(L.jsx)(V.a,{children:"-"}),Object(L.jsxs)(V.a,{color:t.palette.warning.main,children:["\xa0\xa0",0===n?1:n]}),Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(gr.Next);case 2:console.log(r),s(JSON.stringify(r+1));case 4:case"end":return e.stop()}}),e)}))),disabled:r>=n-1||null==r,"aria-label":"next page",children:"rtl"===t.direction?Object(L.jsx)(lt.a,{}):Object(L.jsx)(ut.a,{})}),Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(gr.Last);case 2:s(JSON.stringify(r+1));case 3:case"end":return e.stop()}}),e)}))),disabled:r>=n-1||null==r,"aria-label":"last page",children:"rtl"===t.direction?Object(L.jsx)(ct.a,{}):Object(L.jsx)(at.a,{})})]})})}function Mr(e){var t=e.table,n=e.onRowClick,r=e.cursor,a=e.selectedRowId,i=e.pageCount,c=e.movePage,o=e.currentPage,l=e.notInProjectsView,s=Object(B.a)();return 1==l?Object(L.jsx)(ie.a,{style:{height:"100%",display:"flex",flexDirection:"column"},sx:{width:"100%",overflow:"hidden"},children:Object(L.jsxs)(jt.a,{style:{flex:"1"},children:[Object(L.jsxs)(bt.a,{stickyHeader:!0,sx:{minWidth:500},"aria-label":"custom pagination table",children:[Object(L.jsx)(pt.a,{children:Object(L.jsx)(ht.a,{children:t.heads.map((function(e){return Object(L.jsx)(mt,{children:e},e)}))})}),t.rows.length>0&&Object(L.jsx)(ft.a,{children:t.rows.map((function(e){return Object(L.jsx)(yt,{isSelected:a===e.id,cursor:r,onClick:function(){return n(e.id)},children:e.cells.map((function(e,t){return Object(L.jsx)(mt,{children:e},t+e)}))},e.id)}))})]}),0===t.rows.length&&Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:"1",alignItems:"center",justifyContent:"center",height:"80%"},children:[Object(L.jsx)("img",{src:Ar,style:{display:"flex",alignSelf:"center",justifySelf:"center",marginBottom:s.spacing(1)}}),Object(L.jsx)(V.a,{variant:"h5",children:"Sorry! No results found."})]})]})}):Object(L.jsxs)(ie.a,{style:{height:"100%",display:"flex",flexDirection:"column"},sx:{width:"100%",overflow:"hidden"},children:[Object(L.jsxs)(jt.a,{style:{flex:"1"},children:[Object(L.jsxs)(bt.a,{stickyHeader:!0,sx:{minWidth:500},"aria-label":"custom pagination table",children:[Object(L.jsx)(pt.a,{children:Object(L.jsx)(ht.a,{children:t.heads.map((function(e){return Object(L.jsx)(mt,{children:e},e)}))})}),t.rows.length>0&&Object(L.jsx)(ft.a,{children:t.rows.map((function(e){return Object(L.jsx)(yt,{isSelected:a===e.id,cursor:r,onClick:function(){return n(e.id)},children:e.cells.map((function(e,t){return Object(L.jsx)(mt,{children:e},t+e)}))},e.id)}))})]}),0===t.rows.length&&Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:"1",alignItems:"center",justifyContent:"center",height:"80%"},children:[Object(L.jsx)("img",{src:Ar,style:{display:"flex",alignSelf:"center",justifySelf:"center",marginBottom:s.spacing(1)}}),Object(L.jsx)(V.a,{variant:"h5",children:"Sorry! No results found."})]})]}),Object(L.jsx)(Er,{pageCount:i,currentPage:o,movePage:c})]})}!function(e){e[e.Next=0]="Next",e[e.Previous=1]="Previous",e[e.First=2]="First",e[e.Last=3]="Last",e[e.Input=4]="Input"}(gr||(gr={}));var Wr={width:"18px",backgroundColor:"transparent",borderColor:"transparent",borderBottom:"0px !important",border:"0px",outline:"0px",TextAlign:"center",color:"rgb(31,160,31)"},Rr=n(443),Fr=n(451),Br=n(425),qr=Object(F.a)("div")((function(e){var t=e.dataloaded;return{height:"100%",display:"flex",flexDirection:"column",justifyContent:t?"flex-start":"center",alignItems:t?"stretch":"center"}})),zr=Object(F.a)("div")((function(e){var t=e.theme;return{overfowY:"hidden",padding:t.spacing(2),height:"85%",backgroundColor:t.palette.background.default}})),Hr=Object(F.a)(ie.a)((function(e){var t=e.theme;return{padding:t.spacing(1),marginBottom:t.spacing(1),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"}})),Ur=Object(F.a)(V.a)((function(e){return{color:e.theme.palette.primary.dark}}));function Gr(e){var t=e.split(" "),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].findIndex((function(e){return e==t[1]}))+1,r=t[5],a=t[2],i=t[3].split(":"),c=parseInt(i[0]),o=parseInt(i[1]),l=parseInt(i[2]),s=new Date(parseInt(r),n,parseInt(a),c,o,l);console.log(e,s);Dt()(s).format("DD/MM/YYYY");return s}function Yr(e){var t=Object(s.h)(),n=Object(a.useContext)(A).user,i=Object(B.a)(),c=Object(a.useState)([]),o=Object(b.a)(c,2),l=o[0],u=o[1],p=Object(a.useState)([]),h=Object(b.a)(p,2),f=(h[0],h[1],Object(a.useState)(!1)),v=Object(b.a)(f,2),O=v[0],x=v[1],m=Object(a.useState)(),g=Object(b.a)(m,2),y=g[0],k=g[1],_=Object(a.useState)(""),w=Object(b.a)(_,2),S=w[0],T=w[1],D=Object(a.useState)(0),N=Object(b.a)(D,2),I=N[0],P=N[1],E=Object(a.useState)(1),M=Object(b.a)(E,2),W=M[0],R=M[1],F=Object(a.useState)(!1),q=Object(b.a)(F,2),z=q[0],H=q[1],U=Object(a.useState)("none"),G=Object(b.a)(U,2),Y=G[0],V=G[1];console.log("projects",l);var X=function(){var t=Object(j.a)(d.a.mark((function t(a){var i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,x(!0),t.next=4,C(e.url,r.Post,{page_number:a,search:S},{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!0);case 4:i=t.sent,console.log("DATAAA",i.data),u(i.data),R(i.page_count),P(i.current_page),x(!1),H(!1),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),x(!1),k(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){X(0)}),[]);var K=function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===gr.Input?3:e.t0===gr.First?9:e.t0===gr.Previous?11:e.t0===gr.Next?14:e.t0===gr.Last?17:20;break;case 3:if(null!=n&&void 0!=n&&NaN!=n){e.next=7;break}return e.abrupt("break",21);case 7:return X(n),e.abrupt("break",21);case 9:return X(0),e.abrupt("break",21);case 11:return X(z?0:I-1),e.abrupt("break",21);case 14:return X(z?0:I+1),e.abrupt("break",21);case 17:return X(z?0:W-1),e.abrupt("break",21);case 20:return e.abrupt("break",21);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();console.log("props.tableState(data)",e.tableState(l));return"Task Templates"==e.pageTitle?Object(L.jsxs)(qr,{dataloaded:!O&&!y&&null!==l,children:[O&&Object(L.jsx)(nt,{text:e.loadingLabel}),y&&Object(L.jsx)(Ze,{text:y}),!O&&!y&&l&&Object(L.jsxs)(zr,{children:[Object(L.jsxs)(Hr,{elevation:0,children:[Object(L.jsx)(Ur,{variant:"h4",children:e.pageTitle}),Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:i.spacing(3)},children:[Object(L.jsx)(ln.a,{variant:"outlined",value:S,label:e.searchLabel,onChange:function(e){H(!0),T(e.target.value)}}),Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(0),e.next=3,X(0);case 3:case"end":return e.stop()}}),e)}))),style:{marginLeft:i.spacing(1)},children:Object(L.jsx)(Lr.a,{style:{color:i.palette.primary.main}})})]})]}),Object(L.jsx)(Mr,{currentPage:I,pageCount:W,movePage:K,onRowClick:e.rowClicked,table:e.tableState(l)}),(!0===e.showNewButton||void 0===e.showNewButton)&&Object(L.jsxs)(_r,{variant:"extended",onClick:function(){t(e.newEntityUrl)},children:[Object(L.jsx)(Ir.a,{sx:{mr:1}}),e.newButtonText]})]})]}):Object(L.jsxs)(qr,{dataloaded:!O&&!y&&null!==l,children:[O&&Object(L.jsx)(nt,{text:e.loadingLabel}),y&&Object(L.jsx)(Ze,{text:y}),!O&&!y&&l&&Object(L.jsxs)(zr,{children:[Object(L.jsxs)(Hr,{elevation:0,children:[Object(L.jsx)(Ur,{variant:"h4",children:e.pageTitle}),Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginRight:i.spacing(3)},children:[Object(L.jsxs)(dn.a,{children:[Object(L.jsx)(Br.a,{id:"demo-row-radio-buttons-group-label",children:"Sort By:"}),Object(L.jsxs)(Fr.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:Y,onChange:function(e){var t;switch(V(e.target.value),e.target.value){case"none":X(0);break;case"status":console.log("DATA",l),t=l.sort((function(e,t){return console.log("a.status:",e.is_draft),1==e.is_draft&&0==t.is_draft?-1:0==e.is_draft&&1==t.is_draft?1:0})),u(t);break;case"deliveryDate":t=l.sort((function(e,t){var n=Gr(e.estimated_delivery),r=Gr(t.estimated_delivery);return console.log("dateA",Gr(t.estimated_delivery).getDate()),n<r?-1:n>r?1:0})),u(t)}},children:[Object(L.jsx)(jr.a,{value:"none",control:Object(L.jsx)(Rr.a,{}),label:"None"}),Object(L.jsx)(jr.a,{value:"status",control:Object(L.jsx)(Rr.a,{}),label:"status"}),Object(L.jsx)(jr.a,{value:"deliveryDate",control:Object(L.jsx)(Rr.a,{}),label:"Delivery Date"})]})]}),Object(L.jsx)(ln.a,{variant:"outlined",value:S,label:e.searchLabel,onChange:function(e){H(!0),T(e.target.value)}}),Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(0),e.next=3,X(0);case 3:case"end":return e.stop()}}),e)}))),style:{marginLeft:i.spacing(1)},children:Object(L.jsx)(Lr.a,{style:{color:i.palette.primary.main}})})]})]}),Object(L.jsx)(Mr,{currentPage:I,pageCount:W,movePage:K,onRowClick:e.rowClicked,table:e.tableState(l)}),(!0===e.showNewButton||void 0===e.showNewButton)&&Object(L.jsxs)(_r,{variant:"extended",onClick:function(){t(e.newEntityUrl)},children:[Object(L.jsx)(Ir.a,{sx:{mr:1}}),e.newButtonText]})]})]})}var Vr=n(35),Xr=n.n(Vr),Jr=n(73),Kr=n.n(Jr),Qr=Object(F.a)("div")((function(){return{height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"}}));function $r(){var e=Object(s.h)();return Object(L.jsx)(Qr,{children:Object(L.jsx)(Yr,{searchLabel:"Search descriptions..",loadingLabel:"Loading Clients..",url:"http://87.98.220.129:1515/api/client/all",newButtonText:"New Client",newEntityUrl:"/clients/new",tableState:function(e){return function(e){return{heads:["Code","Description","Currency","Supervisor","Status"],rows:e.map((function(e){return{id:e.client_code,cells:[e.client_code,e.description,e.currency,e.supervisor_code,e.is_active?Object(L.jsx)(Xr.a,{style:{color:we.a[700]}}):Object(L.jsx)(Kr.a,{style:{color:Ce.a[700]}})]}}))}}(e)},rowClicked:function(t){e("/clients/".concat(t))},pageTitle:"Clients"})})}var Zr=Object(F.a)("form")((function(e){var t=e.theme;return{height:"100%",width:"100%",display:"grid",gridTemplateColumns:e.tempcol,gap:t.spacing(1)}}));function ea(e){var t=Object(a.useState)((function(){var t;return null!==(t=e.formElements.map((function(e){var t;return{element:e,value:null!==(t=e.initialValue)&&void 0!==t?t:"",error:!1}})))&&void 0!==t?t:[]})),n=Object(b.a)(t,2),r=n[0],i=n[1],c=function(e,t){var n=e.target.value,a=Object(Ge.a)(r),c=a.find((function(e){return e.element.id===t}));(null===c||void 0===c?void 0:c.element.removeWhiteSpaces)&&(n=n.replace(" ","")),c.value=n,i(a)},o=function(){var t=Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.forEach((function(e){var t=Object(Ge.a)(r);t.find((function(t){return t.element.id===e.element.id})).error=e.element.required&&e.value.length<1,i(t)})),r.some((function(e){return e.error}))){t.next=4;break}return t.next=4,e.submitForm(r);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(L.jsxs)(Cr,{children:[Object(L.jsx)(Zr,{tempcol:e.gridTempCol,noValidate:!0,autoComplete:"off",children:r.map((function(e){return Object(L.jsxs)(wr,{children:[Object(L.jsxs)(V.a,{style:{flex:1},children:[e.element.label,":\xa0\xa0"]}),Object(L.jsxs)("div",{style:{flex:4},children:[e.element.type===Kt.Text&&Object(L.jsx)(ln.a,{disabled:!e.element.editable,id:e.element.id,variant:e.element.variant,required:e.element.required,type:"text",value:e.value,label:e.element.label,color:"secondary",fullWidth:e.element.fullWidth,error:e.error,onChange:function(t){return c(t,e.element.id)}}),e.element.type===Kt.Password&&Object(L.jsx)(ln.a,{disabled:!e.element.editable,id:e.element.id,variant:e.element.variant,required:e.element.required,type:"password",value:e.value,label:e.element.label,color:"secondary",fullWidth:e.element.fullWidth,error:e.error,onChange:function(t){return c(t,e.element.id)}}),e.element.type===Kt.TextArea&&Object(L.jsx)(ln.a,{multiline:!0,rows:2,disabled:!e.element.editable,id:e.element.id,variant:e.element.variant,required:e.element.required,type:"text",value:e.value,label:e.element.label,color:"secondary",fullWidth:e.element.fullWidth,error:e.error,onChange:function(t){return c(t,e.element.id)}}),e.element.type===Kt.Number&&Object(L.jsx)(ln.a,{disabled:!e.element.editable,id:e.element.id,variant:e.element.variant,required:e.element.required,type:"number",value:e.value,label:e.element.label,color:"secondary",fullWidth:e.element.fullWidth,error:e.error,onChange:function(t){return c(t,e.element.id)}}),e.element.type===Kt.Dropdown&&Object(L.jsx)(q.a,{sx:{minWidth:120},children:Object(L.jsxs)(dn.a,{fullWidth:e.element.fullWidth,children:[Object(L.jsx)(jn.a,{id:e.element.id+"-label",children:e.element.label}),Object(L.jsx)(un.a,{disabled:!e.element.editable,error:e.error,labelId:e.element.id+"-label",id:e.element.id,value:e.value,label:e.element.label,onChange:function(t){return function(e,t){var n=e.target.value,a=Object(Ge.a)(r),c=a.find((function(e){return e.element.id===t}));c.value=n,i(a)}(t,e.element.id)},children:e.element.values.map((function(e){return Object(L.jsx)(bn.a,{value:e.id,children:e.description},e.id)}))})]})})]})]},e.element.id)}))}),Object(L.jsx)(tn.a,{style:{height:"60px",width:"240px",justifySelf:"center",alignSelf:"center",marginTop:"1rem"},variant:"contained",type:"submit",onClick:function(){return o()},children:e.buttonText})]})}var ta=Object(F.a)(ie.a)((function(e){var t=e.theme;return{width:"95%",display:"flex",flexDirection:"column",alignSelf:"center",justifyContent:"flex-start",paddingTop:t.spacing(3),backgroundColor:"light"==t.palette.mode?ce.a[200]:t.palette.background.paper}})),na=Object(F.a)(V.a)((function(e){var t=e.theme;return{marginRight:t.spacing(3),marginLeft:t.spacing(3)}}));function ra(e){return Object(L.jsxs)(ta,{children:[Object(L.jsx)(na,{gutterBottom:!0,variant:"h4",children:e.title}),Object(L.jsx)(Tr,{}),Object(L.jsx)(ea,{buttonText:"Add",formElements:e.formElements,submitForm:e.submitForm,gridTempCol:e.gridTempCol})]})}var aa=function(e,t,n,r){var i=Object(a.useState)(null),c=Object(b.a)(i,2),o=c[0],l=c[1],s=Object(a.useState)(!0),u=Object(b.a)(s,2),d=u[0],j=u[1],p=Object(a.useState)(null),h=Object(b.a)(p,2),f=h[0],v=h[1];return Object(a.useEffect)((function(){C(e,t,n,r).then((function(e){l(e),j(!1),v(null)})).catch((function(e){j(!1),v(e.message)}))}),[]),{data:o,isLoading:d,error:f}};function ia(){var e=Object(a.useContext)(A).user,t=Object(s.h)(),n=aa("http://87.98.220.129:1515/api/client/init",r.Get,null,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)}),i=n.data,c=n.isLoading,o=n.error,l=Object(a.useState)(!1),u=Object(b.a)(l,2),p=u[0],h=u[1],f=Object(a.useState)(!1),v=Object(b.a)(f,2),O=v[0],x=v[1],m=Object(a.useState)(""),g=Object(b.a)(m,2),y=g[0],k=g[1],_=Object(a.useState)(""),w=Object(b.a)(_,2),S=w[0],T=w[1],D=function(){var n=Object(j.a)(d.a.mark((function n(a){var i,c,o,l;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=a.filter((function(e){return e.element.formFieldModel===$t.Main})),c=a.filter((function(e){return e.element.formFieldModel===$t.Property})),o=a.filter((function(e){return e.element.formFieldModel===$t.Criteria})),l={client_code:i.find((function(e){return"client_code"===e.element.id})).value,description:i.find((function(e){return"description"===e.element.id})).value,properties:c.map((function(e){return{property_id:e.element.db_id,description:e.value}})),criteria:o.map((function(e){return{client_criteria_value_id:Number(e.value)}})).filter((function(e){return!Number.isNaN(e.client_criteria_value_id)})),sales_representative:o.find((function(e){return"sales_representative"===e.element.id})).value,currency_code:o.find((function(e){return"currency_code"===e.element.id})).value,address_code:o.find((function(e){return"address_code"===e.element.id})).value},console.log(l),n.prev=5,h(!0),n.next=9,C("http://87.98.220.129:1515/api/client/new",r.Post,l,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},void 0,!1);case 9:t("/clients"),n.next=18;break;case 12:n.prev=12,n.t0=n.catch(5),k("Something went wrong"),T(n.t0.message),x(!0),h(!1);case 18:case"end":return n.stop()}}),n,null,[[5,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(L.jsxs)(Sr,{isDataLoaded:!c&&!p&&!o&&null!==i,children:[c&&Object(L.jsx)(nt,{text:"Loading Schema.."}),o&&Object(L.jsx)(Ze,{text:o}),p&&Object(L.jsx)(nt,{text:"Creating Client"}),i&&!p&&!c&&Object(L.jsx)(ra,{buttonText:"Add",formElements:function(){var e=[{id:"client_code",db_id:"client_code",editable:!0,formFieldModel:$t.Main,label:"Client username",required:!0,type:Kt.Text,fullWidth:!0,sortOrder:1,variant:"outlined"},{id:"description",db_id:"description",editable:!0,formFieldModel:$t.Main,label:"Description",required:!0,type:Kt.Text,fullWidth:!0,sortOrder:2,variant:"outlined"}],t=i.criteria.map((function(e,t){return{id:"criteria_"+e.criteria_id.toString(),db_id:e.criteria_id.toString(),editable:e.is_editable,formFieldModel:$t.Criteria,label:e.description,required:e.is_required,type:Kt.fromCriteriaType(Jt.parse(e.criteria_type)),fullWidth:!0,sortOrder:4+t,variant:"outlined",values:e.criteria_values.map((function(e){return{id:e.criteria_value_id.toString(),description:e.description}}))}})),n=i.properties.map((function(e,t){var n,r;return{id:"property_"+e.id.toString(),db_id:e.id.toString(),editable:e.is_editable,formFieldModel:$t.Property,label:e.description,required:e.is_required,type:Kt.fromPropertyInputType(Xt.parse(e.input_type)),fullWidth:!0,sortOrder:4+(null!==(n=null===i||void 0===i||null===(r=i.properties)||void 0===r?void 0:r.length)&&void 0!==n?n:0)+t,variant:"outlined"}})),r={id:"currency_code",db_id:"currency_code",editable:!0,formFieldModel:$t.Criteria,label:"Currency",required:!0,type:Kt.Dropdown,fullWidth:!0,sortOrder:1,variant:"outlined",values:null===i||void 0===i?void 0:i.currencies.map((function(e){return{id:e.currency_code,description:e.currency_symbol}}))},a={id:"sales_representative",db_id:"sales_representative",editable:!0,formFieldModel:$t.Criteria,label:"Sales Rep.",required:!0,type:Kt.Dropdown,fullWidth:!0,sortOrder:1,variant:"outlined",values:null===i||void 0===i?void 0:i.sales_representatives.map((function(e){return{id:e.user_code,description:e.description}}))},c={id:"address_code",db_id:"address_code",editable:!0,formFieldModel:$t.Criteria,label:"Country",required:!0,type:Kt.Dropdown,fullWidth:!0,sortOrder:1,variant:"outlined",values:null===i||void 0===i?void 0:i.addresses.map((function(e){return{id:e.address_code,description:e.description}}))};return e.push.apply(e,Object(Ge.a)(t)),e.push.apply(e,Object(Ge.a)(n)),e.push(r),e.push(a),e.push(c),e}(),gridTempCol:"1fr 1fr",submitForm:D,title:"New Client"}),Object(L.jsx)(sr,{content:S,isOpen:O,title:y,onClose:function(){return x(!1)}})]})}var ca=function(e){return D+"/api/user/".concat(e)},oa=Object(F.a)("div")((function(e){e.theme;return{height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"}}));function la(){var e=Object(s.h)(),t=Object(B.a)(),n=Object(a.useContext)(A).user,i=Object(a.useState)(!0),c=Object(b.a)(i,2),o=c[0],l=c[1],u=Object(a.useState)(""),p=Object(b.a)(u,2),h=p[0],f=p[1],v=Object(a.useState)(!1),O=Object(b.a)(v,2),x=O[0],m=O[1];return Object(L.jsxs)(oa,{children:[Object(L.jsx)(Yr,{searchLabel:"Search descriptions..",loadingLabel:"Loading Users..",url:"http://87.98.220.129:1515/api/user/all",newButtonText:"New User",newEntityUrl:"/users/new",tableState:function(e){return function(e){var t=e.map((function(e){var t,n;return{id:e.user_code,cells:[e.user_code,null!==(t=e.description)&&void 0!==t?t:"N/A",null!==(n=e.email)&&void 0!==n?n:"N/A",e.roles.map((function(e){return e.role_name})).join(","),e.is_active?Object(L.jsx)(Xr.a,{style:{color:we.a[700]}}):Object(L.jsx)(Kr.a,{style:{color:Ce.a[700]}})]}}));return{heads:["Code","Description","Email","Roles","Status"],rows:t}}(e)},rowClicked:function(t){e("/users/".concat(t))},pageTitle:"Users"}),Object(L.jsx)(tn.a,{disabled:!o,style:{alignSelf:"flex-start",margin:t.spacing(1)},onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!1),e.next=4,C(D+"/api/validation/refresh",r.Get,null,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!1);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),f(e.t0.message),m(!0);case 10:l(!0);case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),children:"Validate License"}),Object(L.jsx)(sr,{isOpen:x,content:h,title:"Validation Error",onClose:function(){return m(!1)}})]})}var sa=Object(F.a)(ie.a)((function(e){var t=e.theme;return{width:"95%",display:"flex",flexDirection:"column",alignSelf:"center",justifyContent:"flex-start",paddingTop:t.spacing(3),backgroundColor:"light"==t.palette.mode?ce.a[200]:t.palette.background.paper}})),ua=Object(F.a)(V.a)((function(e){var t=e.theme;return{marginRight:t.spacing(3),marginLeft:t.spacing(3)}}));function da(e){return Object(L.jsxs)(sa,{children:[Object(L.jsx)(ua,{gutterBottom:!0,variant:"h4",children:e.title}),Object(L.jsx)(Tr,{}),Object(L.jsx)(ea,{buttonText:"Update",formElements:e.formElements,submitForm:e.submitForm,gridTempCol:e.gridTempCol})]})}var ja=Object(a.forwardRef)((function(e,t){return Object(L.jsx)(pr.a,Object(p.a)({direction:"up",ref:t},e))})),ba=Object(F.a)(ln.a)((function(e){var t=e.theme;return{marginTop:t.spacing(1),marginBottom:t.spacing(1)}}));function pa(e){var t=Object(a.useContext)(A).user,n=Object(a.useState)(!1),i=Object(b.a)(n,2),c=i[0],o=i[1],l=Object(a.useState)(!1),s=Object(b.a)(l,2),u=s[0],p=s[1],h=Object(a.useState)(""),f=Object(b.a)(h,2),v=f[0],O=f[1],x=Object(a.useState)(""),m=Object(b.a)(x,2),g=m[0],y=m[1],k=Object(B.a)(),_=function(){var n=Object(j.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!w()){n.next=14;break}return n.prev=1,o(!0),n.next=5,C(D+"/api/user/".concat(e.userCode,"/change-password"),r.Post,{new_password:v},{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.tokenStr)},void 0,!1);case 5:o(!1),p(!0),setTimeout((function(){return S()}),200),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),o(!1),p(!1);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(){return n.apply(this,arguments)}}();function w(){return Ue(v,g)}function S(){e.dismiss(),O(""),y("")}return Object(L.jsxs)(nn.a,{open:e.isOpen,TransitionComponent:ja,keepMounted:!0,onClose:S,"aria-describedby":"alert-dialog-slide-description",children:[!c&&!u&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(on.a,{children:"Change Password"}),Object(L.jsx)(V.a,{style:{marginLeft:k.spacing(3),marginRight:k.spacing(3)},gutterBottom:!0,variant:"caption",children:He})]}),Object(L.jsxs)(an.a,{children:[c&&Object(L.jsx)(nt,{text:"Changing Password"}),!c&&u&&Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(L.jsx)(Xr.a,{style:{color:k.palette.success.main,height:"100px",width:"100px"}}),Object(L.jsx)(V.a,{children:"Password Changed Successfully"})]}),!c&&!u&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(ba,{required:!0,fullWidth:!0,label:"New Password",value:v,type:"password",onChange:function(e){O(e.target.value)}}),Object(L.jsx)(ba,{required:!0,fullWidth:!0,label:"Re-enter Password",value:g,type:"password",onChange:function(e){y(e.target.value)},onSubmit:_,onKeyDown:function(e){"Enter"===e.key&&_()}})]})]}),!c&&!u&&Object(L.jsxs)(rn.a,{children:[Object(L.jsx)(tn.a,{color:"warning",onClick:S,children:"Cancel"}),Object(L.jsx)(tn.a,{color:"success",disabled:!w(),onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Submit"})]})]})}function ha(){var e=Object(s.i)().id,t=Object(a.useContext)(A).user,n=Object(s.h)(),i=Object(B.a)(),c=aa(ca(e),r.Get,null,{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.tokenStr)}),o=c.data,l=c.isLoading,u=c.error,p=Object(a.useState)(!1),h=Object(b.a)(p,2),f=h[0],v=h[1],O=Object(a.useState)(!1),x=Object(b.a)(O,2),m=x[0],g=x[1],y=Object(a.useState)(""),k=Object(b.a)(y,2),_=k[0],w=k[1],S=Object(a.useState)(""),T=Object(b.a)(S,2),D=T[0],N=T[1],I=Object(a.useState)(!1),P=Object(b.a)(I,2),E=P[0],M=P[1],W=function(){var a=Object(j.a)(d.a.mark((function a(i){var c,o,l,s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=i.filter((function(e){return e.element.formFieldModel===$t.Main})),o=i.filter((function(e){return e.element.formFieldModel===$t.Property})),l=i.filter((function(e){return e.element.formFieldModel===$t.Criteria})),s={email:c.find((function(e){return"email"===e.element.id})).value,is_active:"1"===c.find((function(e){return"is_active"===e.element.id})).value,description:c.find((function(e){return"description"===e.element.id})).value,properties:o.map((function(e){return{property_id:e.element.db_id,description:e.value}})),criteria:l.map((function(e){return{user_criteria_value_id:Number(e.value)}}))},a.prev=4,v(!0),a.next=8,C(ca(e),r.Patch,s,{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.tokenStr)},void 0,!1);case 8:n("/users"),a.next=17;break;case 11:a.prev=11,a.t0=a.catch(4),w("Something went wrong"),N(a.t0.message),g(!0),v(!1);case 17:case"end":return a.stop()}}),a,null,[[4,11]])})));return function(e){return a.apply(this,arguments)}}();return Object(L.jsxs)(Sr,{isDataLoaded:!l&&!f&&!u&&null!==o,children:[l&&Object(L.jsx)(nt,{text:"Loading User.."}),u&&Object(L.jsx)(Ze,{text:u}),f&&Object(L.jsx)(nt,{text:"Updating User"}),o&&!f&&!l&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(da,{formElements:function(){var e,t,n,r,a,i,c,l,s,u=[{id:"user_code",db_id:"user_code",editable:!1,formFieldModel:$t.Main,label:"Username",required:!0,type:Kt.Text,fullWidth:!0,sortOrder:1,variant:"outlined",initialValue:null===o||void 0===o?void 0:o.user.user_code},{id:"description",db_id:"description",editable:!0,formFieldModel:$t.Main,label:"Description",required:!0,type:Kt.Text,fullWidth:!0,sortOrder:2,variant:"outlined",initialValue:null===o||void 0===o?void 0:o.user.description},{id:"email",db_id:"email",editable:!0,formFieldModel:$t.Main,label:"Email",required:!0,type:Kt.Text,fullWidth:!0,sortOrder:4,variant:"outlined",initialValue:null===o||void 0===o?void 0:o.user.email},{id:"is_active",db_id:"is_active",editable:!0,formFieldModel:$t.Main,label:"Status",required:!0,type:Kt.Dropdown,fullWidth:!0,sortOrder:5,variant:"outlined",initialValue:(null===o||void 0===o?void 0:o.user.is_active)?"1":"0",values:[0,1].map((function(e){return{id:e.toString(),description:0===e?"Disabled":"Active"}}))}],d=o.template.criteria.map((function(e,t){var n,r;return{id:"criteria_"+e.criteria_id.toString(),db_id:e.criteria_id.toString(),editable:e.is_editable,formFieldModel:$t.Criteria,label:e.description,required:e.is_required,type:Kt.fromCriteriaType(Jt.parse(e.criteria_type)),fullWidth:!0,sortOrder:4+t,variant:"outlined",initialValue:null===o||void 0===o||null===(n=o.user.criteria_values.find((function(t){return t.criteria_id===e.criteria_id})))||void 0===n||null===(r=n.criteria_value_id)||void 0===r?void 0:r.toString(),values:e.criteria_values.map((function(e){return{id:e.criteria_value_id.toString(),description:e.description}}))}})),j=o.template.properties.map((function(e,t){var n,r,a,i;return{id:"property_"+e.id.toString(),db_id:e.id.toString(),editable:e.is_editable,formFieldModel:$t.Property,label:e.description,required:e.is_required,type:Kt.fromPropertyInputType(Xt.parse(e.input_type)),fullWidth:!0,sortOrder:4+(null!==(n=null===o||void 0===o||null===(r=o.template)||void 0===r||null===(a=r.properties)||void 0===a?void 0:a.length)&&void 0!==n?n:0)+t,variant:"outlined",initialValue:null===o||void 0===o||null===(i=o.user.properties.find((function(t){return t.property_id===e.id})))||void 0===i?void 0:i.description}})),b={id:"role",db_id:"role",editable:!1,formFieldModel:$t.Role,label:"Role",required:!0,type:Kt.Dropdown,fullWidth:!0,sortOrder:4+(null!==(e=null===o||void 0===o||null===(t=o.template)||void 0===t||null===(n=t.properties)||void 0===n?void 0:n.length)&&void 0!==e?e:0)+(null!==(r=null===o||void 0===o||null===(a=o.template)||void 0===a||null===(i=a.criteria)||void 0===i?void 0:i.length)&&void 0!==r?r:0)+1,variant:"outlined",values:o.template.roles.map((function(e){return{id:e.role_id.toString(),description:e.role_name}})),initialValue:null===o||void 0===o||null===(c=o.user)||void 0===c||null===(l=c.roles[0])||void 0===l||null===(s=l.role_id)||void 0===s?void 0:s.toString()};return u.push.apply(u,Object(Ge.a)(d)),u.push.apply(u,Object(Ge.a)(j)),u.push(b),u}(),gridTempCol:"1fr 1fr",submitForm:W,title:"Update User"}),Object(L.jsx)(tn.a,{color:"warning",style:{alignSelf:"flex-end",margin:i.spacing(2)},onClick:function(){return M(!0)},children:"Change User Password"})]}),Object(L.jsx)(sr,{content:D,isOpen:m,title:_,onClose:function(){return g(!1)}}),Object(L.jsx)(pa,{userCode:e,dismiss:function(){return M(!1)},isOpen:E})]})}function fa(){var e=Object(a.useContext)(A).user,t=Object(s.h)(),n=aa("http://87.98.220.129:1515/api/user/init",r.Get,null,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)}),i=n.data,c=n.isLoading,o=n.error,l=Object(a.useState)(!1),u=Object(b.a)(l,2),p=u[0],h=u[1],f=Object(a.useState)(!1),v=Object(b.a)(f,2),O=v[0],x=v[1],m=Object(a.useState)(""),g=Object(b.a)(m,2),y=g[0],k=g[1],_=Object(a.useState)(""),w=Object(b.a)(_,2),S=w[0],T=w[1],D=function(){var n=Object(j.a)(d.a.mark((function n(a){var i,c,o,l,s;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=a.filter((function(e){return e.element.formFieldModel===$t.Main})),c=a.filter((function(e){return e.element.formFieldModel===$t.Property})),o=a.filter((function(e){return e.element.formFieldModel===$t.Criteria})),l=a.filter((function(e){return e.element.formFieldModel===$t.Role})),s={user_code:i.find((function(e){return"user_code"===e.element.id})).value,password:i.find((function(e){return"password"===e.element.id})).value,email:i.find((function(e){return"email"===e.element.id})).value,description:i.find((function(e){return"description"===e.element.id})).value,properties:c.map((function(e){return{property_id:e.element.db_id,description:e.value}})),criteria:o.map((function(e){return{user_criteria_value_id:Number(e.value)}})),roles:l.map((function(e){return Number(e.value)}))},n.prev=5,h(!0),n.next=9,C("http://87.98.220.129:1515/api/user/new",r.Post,s,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},void 0,!1);case 9:t("/users"),n.next=18;break;case 12:n.prev=12,n.t0=n.catch(5),k("Something went wrong"),T(n.t0.message),x(!0),h(!1);case 18:case"end":return n.stop()}}),n,null,[[5,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(L.jsxs)(Sr,{isDataLoaded:!c&&!p&&!o&&null!==i,children:[c&&Object(L.jsx)(nt,{text:"Loading Schema.."}),o&&Object(L.jsx)(Ze,{text:o}),p&&Object(L.jsx)(nt,{text:"Creating User"}),i&&!p&&!c&&Object(L.jsx)(ra,{buttonText:"Add",formElements:function(){var e,t,n,r,a=[{id:"user_code",db_id:"user_code",editable:!0,formFieldModel:$t.Main,label:"Username",required:!0,type:Kt.Text,fullWidth:!0,sortOrder:1,variant:"outlined",removeWhiteSpaces:!0},{id:"description",db_id:"description",editable:!0,formFieldModel:$t.Main,label:"Description",required:!0,type:Kt.Text,fullWidth:!0,sortOrder:2,variant:"outlined"},{id:"password",db_id:"password",editable:!0,formFieldModel:$t.Main,label:"Password",required:!0,type:Kt.Password,fullWidth:!0,sortOrder:3,variant:"outlined"},{id:"email",db_id:"email",editable:!0,formFieldModel:$t.Main,label:"Email",required:!0,type:Kt.Text,fullWidth:!0,sortOrder:4,variant:"outlined"}],c=i.criteria.map((function(e,t){return{id:"criteria_"+e.criteria_id.toString(),db_id:e.criteria_id.toString(),editable:e.is_editable,formFieldModel:$t.Criteria,label:e.description,required:e.is_required,type:Kt.fromCriteriaType(Jt.parse(e.criteria_type)),fullWidth:!0,sortOrder:4+t,variant:"outlined",values:e.criteria_values.map((function(e){return{id:e.criteria_value_id.toString(),description:e.description}}))}})),o=i.properties.map((function(e,t){var n,r;return{id:"property_"+e.id.toString(),db_id:e.id.toString(),editable:e.is_editable,formFieldModel:$t.Property,label:e.description,required:e.is_required,type:Kt.fromPropertyInputType(Xt.parse(e.input_type)),fullWidth:!0,sortOrder:4+(null!==(n=null===i||void 0===i||null===(r=i.properties)||void 0===r?void 0:r.length)&&void 0!==n?n:0)+t,variant:"outlined"}})),l={id:"role",db_id:"role",editable:!0,formFieldModel:$t.Role,label:"Role",required:!0,type:Kt.Dropdown,fullWidth:!0,sortOrder:4+(null!==(e=null===i||void 0===i||null===(t=i.properties)||void 0===t?void 0:t.length)&&void 0!==e?e:0)+(null!==(n=null===i||void 0===i||null===(r=i.criteria)||void 0===r?void 0:r.length)&&void 0!==n?n:0)+1,variant:"outlined",values:i.roles.map((function(e){return{id:e.role_id.toString(),description:e.role_name}}))};return a.push.apply(a,Object(Ge.a)(c)),a.push.apply(a,Object(Ge.a)(o)),a.push(l),a}(),gridTempCol:"1fr 1fr",submitForm:D,title:"New User"}),Object(L.jsx)(sr,{content:S,isOpen:O,title:y,onClose:function(){return x(!1)}})]})}function va(){var e=Object(s.i)().id,t=Object(a.useContext)(A).user,n=Object(s.h)(),i=aa(yr(e),r.Get,null,{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.tokenStr)}),c=i.data,o=i.isLoading,l=i.error,u=Object(a.useState)(!1),p=Object(b.a)(u,2),h=p[0],f=p[1],v=Object(a.useState)(!1),O=Object(b.a)(v,2),x=O[0],m=O[1],g=Object(a.useState)(""),y=Object(b.a)(g,2),k=y[0],_=y[1],w=Object(a.useState)(""),S=Object(b.a)(w,2),T=S[0],D=S[1],N=function(){var a=Object(j.a)(d.a.mark((function a(i){var c,o,l,s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=i.filter((function(e){return e.element.formFieldModel===$t.Main})),o=i.filter((function(e){return e.element.formFieldModel===$t.Property})),l=i.filter((function(e){return e.element.formFieldModel===$t.Criteria})),s={description:c.find((function(e){return"description"===e.element.id})).value,is_active:"1"===c.find((function(e){return"is_active"===e.element.id})).value,properties:o.map((function(e){return{property_id:e.element.db_id,description:e.value}})),criteria:l.map((function(e){return{client_criteria_value_id:Number(e.value)}})).filter((function(e){return!Number.isNaN(e.client_criteria_value_id)})),sales_representative:l.find((function(e){return"sales_representative"===e.element.id})).value,currency_code:l.find((function(e){return"currency_code"===e.element.id})).value,address_code:l.find((function(e){return"address_code"===e.element.id})).value},a.prev=4,f(!0),a.next=8,C(yr(e),r.Patch,s,{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.tokenStr)},void 0,!1);case 8:n("/clients"),a.next=17;break;case 11:a.prev=11,a.t0=a.catch(4),_("Something went wrong"),D(a.t0.message),m(!0),f(!1);case 17:case"end":return a.stop()}}),a,null,[[4,11]])})));return function(e){return a.apply(this,arguments)}}();return Object(L.jsxs)(Sr,{isDataLoaded:!o&&!h&&!l&&null!==c,children:[o&&Object(L.jsx)(nt,{text:"Loading Client.."}),l&&Object(L.jsx)(Ze,{text:l}),h&&Object(L.jsx)(nt,{text:"Updating Client"}),c&&!h&&!o&&Object(L.jsx)(da,{formElements:function(){var e=[{id:"client_code",db_id:"client_code",editable:!1,formFieldModel:$t.Main,label:"Client username",required:!1,type:Kt.Text,fullWidth:!0,sortOrder:1,variant:"outlined",initialValue:c.client.client_code},{id:"description",db_id:"description",editable:!0,formFieldModel:$t.Main,label:"Description",required:!0,type:Kt.Text,fullWidth:!0,sortOrder:2,variant:"outlined",initialValue:c.client.description},{id:"is_active",db_id:"is_active",editable:!0,formFieldModel:$t.Main,label:"Status",required:!0,type:Kt.Dropdown,fullWidth:!0,sortOrder:3,variant:"outlined",initialValue:c.client.is_active?"1":"0",values:[0,1].map((function(e){return{id:e.toString(),description:0===e?"Disabled":"Active"}}))},{id:"barcode",db_id:"barcode",editable:!1,formFieldModel:$t.Display,label:"Barcode",required:!1,type:Kt.Text,fullWidth:!0,sortOrder:4,variant:"outlined",initialValue:c.client.barcode}],t=c.template.criteria.map((function(e,t){var n,r;return{id:"criteria_"+e.criteria_id.toString(),db_id:e.criteria_id.toString(),editable:e.is_editable,formFieldModel:$t.Criteria,label:e.description,required:e.is_required,type:Kt.fromCriteriaType(Jt.parse(e.criteria_type)),fullWidth:!0,sortOrder:4+t,variant:"outlined",values:e.criteria_values.map((function(e){return{id:e.criteria_value_id.toString(),description:e.description}})),initialValue:null===(n=c.client.criteria_values.find((function(t){return t.criteria_id==e.criteria_id})))||void 0===n||null===(r=n.criteria_value_id)||void 0===r?void 0:r.toString()}})),n=c.template.properties.map((function(e,t){var n,r,a;return{id:"property_"+e.id.toString(),db_id:e.id.toString(),editable:e.is_editable,formFieldModel:$t.Property,label:e.description,required:e.is_required,type:Kt.fromPropertyInputType(Xt.parse(e.input_type)),fullWidth:!0,sortOrder:4+(null!==(n=null===c||void 0===c||null===(r=c.template)||void 0===r||null===(a=r.properties)||void 0===a?void 0:a.length)&&void 0!==n?n:0)+t,variant:"outlined",initialValue:c.client.properties.find((function(t){return t.property_id==e.id})).description}})),r={id:"currency_code",db_id:"currency_code",editable:!0,formFieldModel:$t.Criteria,label:"Currency",required:!0,type:Kt.Dropdown,fullWidth:!0,sortOrder:1,variant:"outlined",values:c.template.currencies.map((function(e){return{id:e.currency_code,description:e.currency_symbol}})),initialValue:c.client.currency_code},a={id:"sales_representative",db_id:"sales_representative",editable:!0,formFieldModel:$t.Criteria,label:"Sales Rep.",required:!0,type:Kt.Dropdown,fullWidth:!0,sortOrder:1,variant:"outlined",values:c.template.sales_representatives.map((function(e){return{id:e.user_code,description:e.description}})),initialValue:c.client.default_user},i={id:"address_code",db_id:"address_code",editable:!0,formFieldModel:$t.Criteria,label:"Country",required:!0,type:Kt.Dropdown,fullWidth:!0,sortOrder:1,variant:"outlined",values:c.template.addresses.map((function(e){return{id:e.address_code,description:e.description}})),initialValue:c.client.addresses[0].address_code};return e.push.apply(e,Object(Ge.a)(t)),e.push.apply(e,Object(Ge.a)(n)),e.push(r),e.push(a),e.push(i),e}(),gridTempCol:"1fr 1fr",submitForm:N,title:"Update Client"}),Object(L.jsx)(sr,{content:T,isOpen:x,title:k,onClose:function(){return m(!1)}})]})}var Oa=function(e,t){return D+"/api/task/template/main/".concat(e,"?flat=").concat(t)},xa=function(e){return D+"/api/task/template/".concat(e,"/rewrite")},ma=function(e){return D+"/api/task/template/main/".concat(e)},ga=function(e,t){return D+"/api/project/task/item/getItems/".concat(e,"/").concat(t)},ya=function(){return D+"/api/project/task/item/newItem"},ka=Object(F.a)("div")((function(){return{height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"}}));function _a(){var e=Object(s.h)();return Object(L.jsx)(ka,{children:Object(L.jsx)(Yr,{searchLabel:"Search names..",loadingLabel:"Loading Templates..",url:"http://87.98.220.129:1515/api/task/template/main/all/min",newButtonText:"New Template",newEntityUrl:"/tasks/templates/new",tableState:function(e){return function(e){return{heads:["Name","Task Code","No. of subtasks"],rows:e.map((function(e){return{id:e.id,cells:[e.task_name,e.task_code,e.children_count]}}))}}(e)},rowClicked:function(t){e("/tasks/templates/".concat(t))},pageTitle:"Task Templates"})})}var wa,Ca=n(172),Sa=n.n(Ca),Ta=n(446),Da=function(e){return D+"/api/project/".concat(e)},Na=function(e){return D+"/api/project/".concat(e,"/save-draft")},Ia=function(e){return D+"/api/project/".concat(e,"/start")},Pa=function(e){return D+"/api/project/".concat(e,"/table-view")};!function(e){e[e.ChangeStart=0]="ChangeStart",e[e.ChangeEnd=1]="ChangeEnd",e[e.ChangeTime=2]="ChangeTime",e[e.None=3]="None"}(wa||(wa={}));var La=Object(a.createContext)(null);function Aa(e){var t=Object(s.i)().id,n=Object(a.useContext)(A).user,i=Object(a.useState)(null),c=Object(b.a)(i,2),o=c[0],l=c[1],u=Object(a.useState)(null),p=Object(b.a)(u,2),h=p[0],f=p[1],v=Object(a.useState)(!1),O=Object(b.a)(v,2),x=O[0],m=O[1],g=Object(a.useState)(null),y=Object(b.a)(g,2),k=y[0],_=y[1],w=Object(a.useState)(null),S=Object(b.a)(w,2),T=S[0],N=S[1],I=Object(a.useState)([]),P=Object(b.a)(I,2),E=P[0],M=P[1],W=Object(a.useState)([]),R=Object(b.a)(W,2),F=R[0],B=R[1],q=(Sa.a.parse(window.location.search.replace("?","")),Object(s.h)());Object(a.useEffect)((function(){m(!0),C(Oa(t,!1),r.Get,null,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)}).then((function(e){var t=e,n=t.task,r=t.time_units,a=t.users;f(r),m(!1),_(null),z(n),M(a)})).catch((function(e){m(!1),_(e.message)}))}),[]),Object(a.useEffect)((function(){console.log("API CALLEDD SUCC"),C(function(e){return D+"/api/project/".concat(e,"/getTasks")}(t),r.Get,null,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)}).then((function(e){console.log(e),B(e)})).catch((function(e){console.log(e)}))}),[]);var z=function(e){function t(e){if(e.children.length>0){e.time_unit_id=3;var t=function(e){return e.children.map((function(e){var t,n;return e.estimated_time*(null!==(t=null===h||void 0===h||null===(n=h.find((function(t){return t.id===e.time_unit_id})))||void 0===n?void 0:n.milliseconds)&&void 0!==t?t:0)})).reduce((function(e,t){return e+t}))}(e);e.estimated_time=t/864e5}}e&&e.children.forEach((function(e){t(e),Ht(e.children)})),l(Object.assign({},e))},H=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,C(xa(t),r.Post,o,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},void 0,!1);case 4:m(!1),q("/tasks/templates"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),m(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();var U=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,C(ma(t),r.Delete,null,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!1);case 4:m(!1),q("/tasks/templates"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),m(!1),_(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),G={error:k,isLoading:x,timeUnits:h,rootTask:o,sortOrder:function(e,t,n){var r=n.children.find((function(t){return t.sort_order===e}));r&&(r.sort_order=t,t<e?n.children.forEach((function(e){e.sort_order>=t&&e!==r&&e.sort_order++})):t>e&&n.children.forEach((function(e){e.sort_order<=t&&e!==r&&e.sort_order--})),Ht(n.children),l(Object.assign({},o)))},selectedTask:T,setSelectedProjectTaskCb:function(e){(null===T||void 0===T?void 0:T.id)===(null===e||void 0===e?void 0:e.id)&&(null===T||void 0===T?void 0:T.fake_id)===(null===e||void 0===e?void 0:e.fake_id)?N(o):N(e)},addNewTask:function(e){var t,n;n=T||o,e.parent=n.id,e.sort_order=qt(null!==(t=n.children.map((function(e){return e.sort_order})))&&void 0!==t?t:[]),e.fake_id=Object(Ta.a)(),n.children.push(e),Ht(n.children),l(Object.assign({},o))},updateTask:z,saveTemplate:H,deleteTask:function(e,t){t.children.includes(e)&&(t.children=t.children.filter((function(t){return t!==e})),l(Object.assign({},o)))},canOrderUp:function(e,t){t.children.find((function(t){return t.sort_order===e.sort_order-1}));return!0},canOrderDown:function(e,t){t.children.find((function(t){return t.sort_order===e.sort_order+1}));return!0},users:E,autofillTemplates:F,deleteMainTask:U};return Object(L.jsx)(La.Provider,{value:G,children:e.children})}var Ea=n(175),Ma=n.n(Ea),Wa=n(176),Ra=n.n(Wa),Fa=n(173),Ba=n.n(Fa),qa=n(174),za=n.n(qa),Ha=n(63),Ua=n.n(Ha),Ga=Object(F.a)("div")((function(e){return{display:"flex",flexDirection:"column",alignItems:"flex-start",margin:e.theme.spacing(1),justifyContent:"flexs-start",flex:"1"}}));function Ya(e){var t,n,r,a,i,c;return Object(L.jsxs)(Ga,{children:[e.isInput&&Object(L.jsxs)(L.Fragment,{children:[(e.type===Kt.Text||e.type===Kt.Number||e.type===Kt.TextArea)&&Object(L.jsx)(ln.a,{disabled:!e.editable,variant:null!==(t=e.variant)&&void 0!==t?t:"outlined",required:!0,type:e.type===Kt.Number?"number":"text",value:e.value,label:e.label,inputProps:{maxLength:e.maxLength},multiline:e.type===Kt.TextArea,rows:e.type===Kt.TextArea?3:1,color:"secondary",fullWidth:!0,error:e.error,onChange:function(t){return e.update(t.target.value)}}),e.type===Kt.Dropdown&&Object(L.jsx)(sn.a,{sx:{minWidth:null!==(n=e.width)&&void 0!==n?n:200},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:e.label+"-label",children:e.label}),Object(L.jsx)(un.a,{fullWidth:!0,disabled:!e.editable,error:e.error,labelId:e.label+"-label",value:e.value,label:e.label,onChange:function(t){return e.update(t.target.value)},children:e.values.map((function(e){return Object(L.jsx)(bn.a,{value:e.id,children:e.description},e.id)}))})]})})]}),!e.isInput&&Object(L.jsxs)(Ga,{style:{cursor:"pointer",userSelect:"none"},children:[Object(L.jsx)(V.a,{variant:"caption",style:{cursor:"pointer",userSelect:"none"},children:e.label}),Object(L.jsxs)(V.a,{variant:"body1",style:{cursor:"pointer",userSelect:"none"},children:[(e.type===Kt.Text||e.type===Kt.Number||e.type===Kt.TextArea)&&(null!==(r=e.value)&&void 0!==r?r:"N/A"),e.type===Kt.Dropdown&&(null!==(a=null===(i=e.values)||void 0===i||null===(c=i.find((function(t){return t.id===e.value})))||void 0===c?void 0:c.description)&&void 0!==a?a:"N/A")]})]})]})}var Va=n(121),Xa=n.n(Va),Ja=Object(F.a)("div")((function(e){var t=e.theme,n=e.indent;return{display:"flex",flexDirection:"row",width:"100%",paddingLeft:t.spacing(2*n)}})),Ka=Object(F.a)("div")((function(e){var t=e.theme;return{width:"1rem",height:"1rem",background:e.selected?we.a[800]:ce.a[700],borderRadius:"3rem",margin:t.spacing(.5),cursor:"pointer",alignSelf:"center",justifySelf:"center"}})),Qa=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column",width:"100%"}})),$a=Object(F.a)("div")((function(e){return{display:"flex",flexDirection:"row",paddingRight:e.theme.spacing(4)}})),Za=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column",alignItems:"flex-end"}}));function ei(e){var t,n,r=Object(a.useContext)(La),i=r.updateTask,c=r.timeUnits,o=r.sortOrder,l=r.selectedTask,s=r.rootTask,u=r.setSelectedProjectTaskCb,d=r.deleteTask,j=r.canOrderUp,p=r.users,h=r.canOrderDown,f=Object(a.useState)(e.task.task_name),v=Object(b.a)(f,2),O=v[0],x=v[1],m=Object(a.useState)(!1),g=Object(b.a)(m,2),y=g[0],k=g[1],_=Object(a.useState)(e.task.task_code),w=Object(b.a)(_,2),C=w[0],S=w[1],T=Object(a.useState)(!1),D=Object(b.a)(T,2),N=D[0],I=(D[1],Object(a.useState)(e.task.default_assigned_to)),P=Object(b.a)(I,2),A=P[0],E=P[1],M=Object(a.useState)(e.task.estimated_time),W=Object(b.a)(M,2),R=W[0],F=W[1],B=Object(a.useState)(!1),q=Object(b.a)(B,2),z=q[0],H=q[1],U=Object(a.useState)(e.task.time_unit_id),G=Object(b.a)(U,2),Y=G[0],V=G[1],K=Object(a.useState)(!1),Q=Object(b.a)(K,2),$=Q[0],Z=Q[1],ee=Object(a.useState)(!1),te=Object(b.a)(ee,2),ne=te[0],re=te[1];Object(a.useEffect)((function(){x(e.task.task_name),F(e.task.estimated_time),V(e.task.time_unit_id)}),[s]);var ae=function(){var e=!0;return O.length<1&&(k(!0),e=!1),Number.isNaN(Y)&&(Z(!0),e=!1),Number.isNaN(R)&&(H(!0),e=!1),e};return Object(L.jsxs)(Qa,{children:[Object(L.jsxs)(Za,{children:[Object(L.jsxs)(Ja,{indent:e.indent,children:[!e.isRoot&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(J.a,{disabled:Gt(e.task,e.parent)||!h(e.task,e.parent),onClick:function(){o(e.task.sort_order,e.task.sort_order+1,e.parent)},children:Object(L.jsx)(Ba.a,{})}),Object(L.jsx)(J.a,{disabled:Ut(e.task,e.parent)||!j(e.task,e.parent),onClick:function(){o(e.task.sort_order,e.task.sort_order-1,e.parent)},children:Object(L.jsx)(za.a,{})})]}),e.isRoot&&Object(L.jsx)(Ka,{selected:e.task.id===(null===l||void 0===l?void 0:l.id)&&e.task.fake_id===l.fake_id,onClick:function(){return u(e.task)}}),Object(L.jsx)(Ya,{variant:"outlined",maxLength:40,value:C,update:function(e){S(e)},editable:!0,error:N,label:"Task Code",type:Kt.Text,isInput:ne,initialValue:C}),Object(L.jsx)(Ya,{variant:"outlined",maxLength:40,value:O,update:function(e){x(e)},editable:!0,error:y,label:"Task Name",type:Kt.Text,isInput:ne,initialValue:O}),Object(L.jsx)(Ya,{variant:"outlined",maxLength:40,error:z,value:R.toString(),update:function(e){F(Math.abs(Number(e)))},isInput:ne,editable:0===e.task.children.length,label:"Estimated Time",type:Kt.Number,initialValue:R.toString()}),Object(L.jsx)(Ya,{width:280,variant:"outlined",error:$,maxLength:40,value:Y.toString(),update:function(e){V(Number(e))},isInput:ne,editable:0===e.task.children.length,label:"Time Unit",type:Kt.Dropdown,initialValue:Y.toString(),values:null!==(t=null===c||void 0===c?void 0:c.map((function(e){return{id:e.id.toString(),description:e.description}})))&&void 0!==t?t:[]}),Object(L.jsx)(Ya,{width:280,variant:"outlined",error:!1,maxLength:50,value:A,update:function(e){E(e)},isInput:ne,editable:!0,label:"Default Assgined To",type:Kt.Dropdown,initialValue:A,values:null!==(n=null===p||void 0===p?void 0:p.map((function(e){return{id:e.user_code,description:e.user_code}})))&&void 0!==n?n:[]}),Object(L.jsx)(J.a,{onClick:function(){return d(e.task,e.parent)},children:Object(L.jsx)(Ua.a,{color:"error"})}),Object(L.jsx)(J.a,{onClick:function(){return re(!0)},children:Object(L.jsx)(Xa.a,{color:"info"})})]}),ne&&Object(L.jsxs)($a,{children:[Object(L.jsx)(J.a,{onClick:function(){ae()&&(e.task.task_name=O,e.task.estimated_time=R,e.task.time_unit_id=Y,e.task.task_code=C,e.task.default_assigned_to=A,i(s),re(!1))},children:Object(L.jsx)(Xr.a,{color:"success"})}),Object(L.jsx)(J.a,{color:"error",onClick:function(){return x(e.task.task_name),k(!1),F(e.task.estimated_time),H(!1),V(e.task.time_unit_id),Z(!1),void re(!1)},children:Object(L.jsx)(Kr.a,{})})]})]}),Object(L.jsx)(X.a,{orientation:"horizontal"}),e.task.children.map((function(t){var n;return Object(L.jsx)(ei,{isRoot:!1,indent:e.indent+1,task:t,parent:e.task},null!==(n=t.fake_id)&&void 0!==n?n:t.id)}))]})}var ti=n(441),ni=Object(F.a)("div")((function(e){return{display:"grid",gridTemplateColumns:"1fr 1fr",gap:e.theme.spacing(1)}}));function ri(e){var t=Object(a.useContext)(La),n=t.timeUnits,r=t.addNewTask,i=t.users,c=t.autofillTemplates,o=Object(a.useState)({error:!1,value:""}),l=Object(b.a)(o,2),s=l[0],u=l[1],d=Object(a.useState)({error:!1,value:""}),j=Object(b.a)(d,2),h=j[0],f=j[1],v=Object(a.useState)({error:!1,value:""}),O=Object(b.a)(v,2),x=O[0],m=O[1],g=Object(a.useState)({error:!1,value:null}),y=Object(b.a)(g,2),k=y[0],_=y[1],w=Object(a.useState)({error:!1,value:null}),C=Object(b.a)(w,2),S=C[0],T=C[1],D=Object(a.useState)({error:!1,value:""}),N=Object(b.a)(D,2),I=N[0],P=N[1],A=Object(a.useState)({error:!1,value:""}),E=Object(b.a)(A,2),M=E[0],W=E[1],R=function(){u({error:!1,value:""}),f({error:!1,value:""}),m({error:!1,value:""}),_({error:!1,value:null}),T({error:!1,value:null}),P({error:!1,value:""}),W({error:!1,value:""})};return Object(a.useEffect)((function(){if(k.value&&x.value&&h.value){var e=null===n||void 0===n?void 0:n.find((function(e){return e.id===Number(x.value)}));if(e){var t=e.milliseconds*(0===Number(h.value)?0:Number(h.value)-1);T({error:S.error,value:new Date(Number(k.value)+t)})}}}),[k.value,x.value,h.value]),Object(L.jsxs)(nn.a,{open:e.open,onClose:function(){e.handleClose(),R()},children:[Object(L.jsxs)(on.a,{children:[e.title,Object(L.jsx)(ti.a,{disablePortal:!0,id:"combo-box-demo",onChange:function(e,t){var n,r,a,i,c,o,l;P({error:I.error,value:null!==(n=null===t||void 0===t?void 0:t.task_code)&&void 0!==n?n:""}),u({error:s.error,value:null!==(r=null===t||void 0===t?void 0:t.task_name)&&void 0!==r?r:""}),f({error:h.error,value:null!==(a=null===t||void 0===t||null===(i=t.estimated_time)||void 0===i?void 0:i.toString())&&void 0!==a?a:""}),m({error:x.error,value:null!==(c=null===t||void 0===t||null===(o=t.time_unit.id)||void 0===o?void 0:o.toString())&&void 0!==c?c:""}),W({error:M.error,value:null!==(l=null===t||void 0===t?void 0:t.default_assigned_to)&&void 0!==l?l:""})},options:c,getOptionLabel:function(e){return e.task_name},sx:{width:300},renderInput:function(e){return Object(L.jsx)(ln.a,Object(p.a)(Object(p.a)({},e),{},{label:"Autofill Template"}))}})]}),Object(L.jsx)(an.a,{style:{padding:"1rem"},children:Object(L.jsx)(mn.b,{dateAdapter:xn.a,locale:yn.a,children:Object(L.jsxs)(ni,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Default Assigned To: \xa0\xa0"}),Object(L.jsx)(sn.a,{sx:{minWidth:160},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:"assigned-label",children:"Default Assigned To"}),Object(L.jsx)(un.a,{labelId:"time-unit-label",id:"time-unit-select",value:M.value,error:M.error,label:"Default Assigned To",onChange:function(e){return W({error:M.error,value:e.target.value})},children:null===i||void 0===i?void 0:i.map((function(e){return Object(L.jsx)(bn.a,{value:e.user_code,children:e.description},e.user_code)}))})]})}),Object(L.jsx)(V.a,{variant:"h6",children:"Task Code: \xa0\xa0"}),Object(L.jsx)(ln.a,{type:"text",label:"Task Code",value:I.value,error:I.error,onChange:function(e){P({error:I.error,value:e.target.value})}}),Object(L.jsx)(V.a,{variant:"h6",children:"Task name: \xa0\xa0"}),Object(L.jsx)(ln.a,{label:"Task Name",value:s.value,type:"text",error:s.error,onChange:function(e){u({error:s.error,value:e.target.value})}}),Object(L.jsx)(V.a,{variant:"h6",children:"Estimated time: \xa0\xa0"}),Object(L.jsx)(ln.a,{type:"number",label:"Estimated Time",value:h.value,error:h.error,onChange:function(e){f({error:h.error,value:Math.abs(Number(e.target.value)).toString()})}}),Object(L.jsx)(V.a,{variant:"h6",children:"Time unit: \xa0\xa0"}),Object(L.jsx)(sn.a,{sx:{minWidth:160},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:"assigned-label",children:"Time Unit"}),Object(L.jsx)(un.a,{labelId:"time-unit-label",id:"time-unit-select",value:x.value,error:x.error,label:"Time unit",onChange:function(e){return m({error:x.error,value:e.target.value})},children:null===n||void 0===n?void 0:n.map((function(e){return Object(L.jsx)(bn.a,{value:e.id,children:e.description},e.id)}))})]})})]})})}),Object(L.jsxs)(rn.a,{children:[Object(L.jsx)(tn.a,{onClick:function(){e.handleClose(),R()},children:"Cancel"}),Object(L.jsx)(tn.a,{onClick:function(){if(function(){var e=!0;return s.value.length<1&&(u({value:s.value,error:!0}),e=!1),(h.value.length<1||Number.isNaN(h.value))&&(f({value:h.value,error:!0}),e=!1),(x.value.length<1||Number.isNaN(x.value))&&(m({value:x.value,error:!0}),e=!1),e}()){var t={children:[],id:-1,estimated_time:Number(h.value),task_name:s.value,time_unit_id:Number(x.value),sort_order:1,default_assigned_to:0===M.value.length?void 0:M.value,task_code:0===I.value.length?void 0:I.value};r(t),e.handleClose(),R()}},children:"Add"})]})]})}var ai=Object(F.a)("div")((function(e){var t=e.theme,n=e.loaded;return{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:n?"flex-start":"center",alignItems:n?"flex-start":"center",overflowY:"scroll",backgroundColor:"light"===t.palette.mode?ce.a[100]:t.palette.background.default,paddingTop:t.spacing(1),paddingBottom:t.spacing(1)}}));function ii(){var e,t,n,r,i=Object(a.useContext)(La),c=i.rootTask,o=i.saveTemplate,l=Object(a.useState)(!1),s=Object(b.a)(l,2),u=s[0],p=s[1],h=Object(a.useState)(!1),f=Object(b.a)(h,2),v=f[0],O=f[1];return Object(L.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(L.jsx)(J.a,{onClick:function(){return p(!0)},style:{alignSelf:"flex-end"},children:Object(L.jsx)(Ma.a,{})}),Object(L.jsxs)(ai,{loaded:null!==(null===c||void 0===c?void 0:c.children)&&0!==(null===c||void 0===c||null===(e=c.children)||void 0===e?void 0:e.length),children:[!c||!c.children||(null===c||void 0===c?void 0:c.children)&&0===(null===c||void 0===c||null===(t=c.children)||void 0===t?void 0:t.length)&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("img",{src:St}),Object(L.jsx)(V.a,{children:"You currently have no taskTree."})]}),(null===c||void 0===c?void 0:c.children)&&(null===c||void 0===c||null===(n=c.children)||void 0===n?void 0:n.length)>0&&Object(L.jsx)(L.Fragment,{children:null===c||void 0===c||null===(r=c.children)||void 0===r?void 0:r.map((function(e){var t;return Object(L.jsx)(ei,{indent:0,isRoot:!0,task:e,parent:c},null!==(t=e.fake_id)&&void 0!==t?t:e.id)}))})]}),Object(L.jsxs)("div",{style:{padding:"0.5rem",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},children:[Object(L.jsx)(tn.a,{endIcon:Object(L.jsx)(Ra.a,{}),variant:"contained",color:"error",onClick:function(){return window.location.reload()},style:{marginRight:"2rem"},children:"Reset Changes"}),Object(L.jsx)(tn.a,{endIcon:Object(L.jsx)(At.a,{}),variant:"contained",color:"success",onClick:function(){return O(!0)},children:"Submit Changes"})]}),Object(L.jsx)(ri,{open:u,handleClose:function(){return p(!1)},title:"New Task"}),Object(L.jsx)(fr,{isOpen:v,title:"Submit changes?",content:"Are you sure you want to submit the changes?",dismiss:function(){return O(!1)},positive:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),negativeText:"Cancel",positiveText:"Submit"})]})}var ci=n(105),oi=Object(F.a)(ie.a)((function(e){var t=e.theme,n=e.color,r=e.text;return{backgroundColor:n,display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",paddingTop:t.spacing(1),paddingBottom:t.spacing(1),paddingLeft:t.spacing(4),paddingRight:t.spacing(8),borderRadius:50,color:r}}));function li(e){var t=Object(ci.a)();return Object(L.jsxs)(oi,{text:"light"===t.palette.mode?e.darkColor:e.lightColor,color:"light"===t.palette.mode?e.lightColor:e.darkColor,children:[Object(L.jsx)(V.a,{variant:"body2",children:e.title}),Object(L.jsx)(V.a,{variant:"h5",children:e.value})]})}var si=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"}})),ui=Object(F.a)(ie.a)((function(e){var t=e.theme;return{flex:"4",display:"flex",flexDirection:"column",backgroundColor:"light"===t.palette.mode?ce.a[300]:t.palette.background.paper,height:"100%",overflow:"hidden"}})),di=Object(F.a)("div")((function(e){var t=e.theme;return{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:t.spacing(1),marginBottom:t.spacing(1)}}));function ji(){var e=Object(a.useContext)(La),t=e.isLoading,n=e.error,r=e.rootTask,i=e.deleteMainTask,c=Object(a.useState)(!1),o=Object(b.a)(c,2),l=o[0],s=o[1];return Object(L.jsxs)(Sr,{isDataLoaded:!t&&!n&&null!==r,style:{},children:[t&&Object(L.jsx)(nt,{text:"Loading Template.."}),n&&Object(L.jsx)(Ze,{text:null!==n&&void 0!==n?n:"Something went wrong"}),r&&!t&&Object(L.jsxs)(si,{children:[Object(L.jsxs)(di,{children:[Object(L.jsx)(li,{title:"Title",value:r.task_name,lightColor:we.a[100],darkColor:we.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(tn.a,{color:"error",endIcon:Object(L.jsx)(Ua.a,{}),style:{borderRadius:"50px",padding:"1rem",marginLeft:"10px"},variant:"contained",onClick:function(){return s(!0)},children:"Delete Template"})]}),Object(L.jsx)(ui,{children:Object(L.jsx)(ii,{})})]}),Object(L.jsx)(fr,{content:"Are you sure you want to delete this template?",negativeText:"Cancel",positiveText:"Delete",title:"Delete Template",isOpen:l,dismiss:function(){return s(!1)},positive:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!1),e.next=3,i();case 3:case"end":return e.stop()}}),e)})))})]})}function bi(){var e=Object(a.useContext)(A).user,t=Object(s.h)(),n=Object(a.useState)(!1),i=Object(b.a)(n,2),c=i[0],o=i[1],l=Object(a.useState)(!1),u=Object(b.a)(l,2),p=u[0],h=u[1],f=Object(a.useState)(""),v=Object(b.a)(f,2),O=v[0],x=v[1],m=Object(a.useState)(""),g=Object(b.a)(m,2),y=g[0],k=g[1],_=aa("http://87.98.220.129:1515/api/task/template/time-units",r.Get,null,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)}),w=_.data,S=_.isLoading,T=_.error,D=function(){var n=Object(j.a)(d.a.mark((function n(a){var i,c,l,s;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=a.filter((function(e){return e.element.formFieldModel===$t.Main})),c={task_name:i.find((function(e){return"task_name"===e.element.id})).value,task_code:i.find((function(e){return"task_code"===e.element.id})).value,description:i.find((function(e){return"description"===e.element.id})).value,time_unit_id:Number(i.find((function(e){return"time_unit_id"===e.element.id})).value),estimated_time:Number(i.find((function(e){return"estimated_time"===e.element.id})).value),sort_order:1},n.prev=2,o(!0),n.next=6,C("http://87.98.220.129:1515/api/task/template/main/new",r.Post,c,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},void 0);case 6:l=n.sent,console.log(l),s=l?"/tasks/templates/".concat(l.id):"/tasks/templates/",t(s),n.next=18;break;case 12:n.prev=12,n.t0=n.catch(2),x("Something went wrong"),k(n.t0.message),h(!0),o(!1);case 18:case"end":return n.stop()}}),n,null,[[2,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(L.jsxs)(Sr,{isDataLoaded:!S&&!c&&!T&&null!==w,children:[S&&Object(L.jsx)(nt,{text:"Loading Schema.."}),T&&Object(L.jsx)(Ze,{text:T}),c&&Object(L.jsx)(nt,{text:"Creating Template"}),w&&!c&&!S&&Object(L.jsx)("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"stretch"},children:Object(L.jsx)(ra,{buttonText:"Create",formElements:[{id:"task_name",db_id:"task_name",editable:!0,formFieldModel:$t.Main,label:"Task Name",required:!0,type:Kt.Text,fullWidth:!0,sortOrder:1,variant:"outlined"},{id:"task_code",db_id:"task_code",editable:!0,formFieldModel:$t.Main,label:"Task Code",required:!1,type:Kt.Text,fullWidth:!0,sortOrder:1,variant:"outlined"},{id:"description",db_id:"description",editable:!0,formFieldModel:$t.Main,label:"Description",required:!1,type:Kt.TextArea,fullWidth:!0,sortOrder:2,variant:"outlined"},{id:"estimated_time",db_id:"estimated_time",editable:!0,formFieldModel:$t.Main,label:"Estimated Time",required:!0,type:Kt.Number,fullWidth:!0,sortOrder:1,variant:"outlined"},{id:"time_unit_id",db_id:"time_unit_id",editable:!0,formFieldModel:$t.Main,label:"Unit",required:!0,type:Kt.Dropdown,fullWidth:!0,sortOrder:4,variant:"outlined",values:w.map((function(e){return{id:e.id.toString(),description:e.description}}))}],gridTempCol:"1fr 1fr",submitForm:D,title:"New Template"})}),Object(L.jsx)(sr,{content:y,isOpen:p,title:O,onClose:function(){return h(!1)}})]})}n(352);var pi=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"}}));function hi(){return Object(L.jsx)(pi,{children:Object(L.jsx)(V.a,{variant:"h5",children:"Not Found"})})}var fi=Object(F.a)("div")((function(){return{height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch"}}));function vi(e){var t=e.split(" "),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].findIndex((function(e){return e==t[1]}))+1,r=t[5],a=t[2],i=t[3].split(":"),c=parseInt(i[0]),o=parseInt(i[1]),l=parseInt(i[2]),s=new Date(parseInt(r),n,parseInt(a),c,o,l);return console.log(e,s),Dt()(s).format("D/M/YYYY")}function Oi(){var e,t=Object(a.useContext)(A).user,n=Object(s.h)();return Object(L.jsx)(fi,{children:Object(L.jsx)(Yr,{searchLabel:"Search titles..",loadingLabel:"Loading Projects..",url:"http://87.98.220.129:1515/api/project/all",newButtonText:"New Project",newEntityUrl:"/projects/new",tableState:function(e){return function(e){return{heads:["Number","Title","Client","Assigned to","Delivery Date","Status"],rows:e.map((function(e){var t;return t=1==e.is_draft?"Pending":2==e.is_draft?"Complete":"Active",{id:"".concat(e.id,"&").concat(e.user_code),cells:[Pt(e.id),e.title,e.client_code,e.user_code,JSON.stringify(vi(e.estimated_delivery)).replaceAll('"',""),t]}}))}}(e)},rowClicked:function(e){var r,a,i=e.toString().split("&"),c=Object(b.a)(i,2),o=c[0],l=c[1];(null===t||void 0===t?void 0:t.username)===l||(null===t||void 0===t||null===(r=t.token)||void 0===r||null===(a=r.roles)||void 0===a?void 0:a.includes("ADMIN"))?n("/projects/".concat(o)):n("/projects/".concat(o,"/preview"))},pageTitle:"Projects",showNewButton:null===t||void 0===t||null===(e=t.token)||void 0===e?void 0:e.roles.includes("ADMIN")})})}var xi=Object(a.createContext)(null);function mi(e){var t=Object(s.h)(),n=Object(s.i)().id,i=Object(a.useContext)(A).user,c=Object(a.useState)(null),o=Object(b.a)(c,2),l=o[0],u=o[1],p=Object(a.useState)(null),h=Object(b.a)(p,2),f=h[0],v=h[1],O=Object(a.useState)(null),x=Object(b.a)(O,2),m=x[0],g=x[1],y=Object(a.useState)(null),k=Object(b.a)(y,2),_=k[0],w=k[1],S=Object(a.useState)(!1),T=Object(b.a)(S,2),D=T[0],N=T[1],I=Object(a.useState)(null),P=Object(b.a)(I,2),E=P[0],M=P[1],W=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,C(Da(n),r.Delete,null,{Authorization:"Bearer ".concat(null===i||void 0===i?void 0:i.tokenStr)},"Something went wrong",!1);case 4:N(!1),t("/projects"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),N(!1),M(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){C(Da(n),r.Get,null,{Authorization:"Bearer ".concat(null===i||void 0===i?void 0:i.tokenStr)}).then((function(e){var t=e,n=t.project,r=t.time_units,a=t.status;u(n.task_tree),v(n),w(a),g(r),N(!1),M(null)})).catch((function(e){N(!1),M(e.message)}))}),[]);var R={error:E,rootTask:l,isLoading:D,timeUnits:m,project:f,deleteProject:W,status:_};return Object(L.jsx)(xi.Provider,{value:R,children:e.children})}var gi=n(252),yi=n.n(gi),ki=n(250),_i=n.n(ki),wi=n(177),Ci=n.n(wi),Si=a.forwardRef((function(e,t){return Object(L.jsx)(pr.a,Object(p.a)({direction:"up",ref:t},e))}));function Ti(e){var t=function e(t){return t.map((function(t){var n;return{title:t.task_name,children:e(null!==(n=t.children)&&void 0!==n?n:[])}}))},n=a.useState(t(e.tasks)),r=Object(b.a)(n,2),i=r[0],c=r[1];return a.useEffect((function(){c(t(e.tasks))}),[e.tasks]),Object(L.jsxs)(nn.a,{fullScreen:!0,open:e.isOpen,onClose:e.handleClose,TransitionComponent:Si,children:[Object(L.jsx)(U.a,{sx:{position:"relative"},children:Object(L.jsxs)(G.a,{children:[Object(L.jsx)(J.a,{edge:"start",color:"inherit",onClick:e.handleClose,"aria-label":"close",children:Object(L.jsx)(_i.a,{})}),Object(L.jsx)(V.a,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Tree View"})]})}),Object(L.jsx)(Ci.a,{style:{color:"black"},canDrag:function(){return!1},canDrop:function(){return!1},onChange:function(e){c(e)},treeData:i})]})}var Di=n(178),Ni=n.n(Di),Ii=n(254),Pi=n.n(Ii),Li=n(253),Ai=n.n(Li),Ei=Object(F.a)(ie.a)((function(e){var t=e.theme;return{backgroundColor:"light"===t.palette.mode?Se.a[100]:Se.a[800],padding:t.spacing(1),margin:t.spacing(1),borderRadius:"50px"}})),Mi=Object(F.a)("div")((function(){return{display:"flex",flexDirection:"row",justifyContent:"space-between"}}));function Wi(){var e,t,n,r,i,c=Object(s.h)(),o=Object(B.a)(),l=Object(a.useContext)(A).user,u=Object(a.useContext)(xi),d=u.rootTask,j=u.project,p=Object(a.useState)(!1),h=Object(b.a)(p,2),f=h[0],v=h[1];return Object(L.jsxs)(Ei,{children:[Object(L.jsxs)(Mi,{children:[Object(L.jsx)(Wn,{hoverText:"TreeView",children:Object(L.jsx)(J.a,{onClick:function(){return v(!0)},style:{color:"light"===o.palette.mode?Se.a[800]:Se.a[100]},children:Object(L.jsx)(yi.a,{})})}),Object(L.jsx)(Wn,{hoverText:"Edit Tasks",children:Object(L.jsx)(J.a,{onClick:function(){return c("/projects/".concat(null===j||void 0===j?void 0:j.id,"/tasks/edit"))},children:Object(L.jsx)(Ai.a,{style:{color:"light"===o.palette.mode?Se.a[800]:Se.a[100]}})})}),Object(L.jsx)(Wn,{hoverText:"View Reschedule Requests",children:Object(L.jsx)(J.a,{onClick:function(){return c("/projects/".concat(null===j||void 0===j?void 0:j.id,"/reschedule"))},children:Object(L.jsx)(Ni.a,{style:{color:"light"===o.palette.mode?Se.a[800]:Se.a[100]}})})}),(null===l||void 0===l||null===(e=l.token)||void 0===e||null===(t=e.roles)||void 0===t?void 0:t.includes("ADMIN"))&&Object(L.jsx)(Wn,{hoverText:"Duration Report",children:Object(L.jsx)(J.a,{onClick:function(){return c("/projects/".concat(null===j||void 0===j?void 0:j.id,"/tasks/duration/report"))},children:Object(L.jsx)(Pi.a,{style:{color:"light"===o.palette.mode?Se.a[800]:Se.a[100]}})})}),(null===l||void 0===l||null===(n=l.token)||void 0===n||null===(r=n.roles)||void 0===r?void 0:r.includes("ADMIN"))&&Object(L.jsx)(Wn,{hoverText:"Edit Project Details",children:Object(L.jsx)(J.a,{onClick:function(){return c("/projects/".concat(null===j||void 0===j?void 0:j.id,"/edit"))},children:Object(L.jsx)(Xa.a,{style:{color:"light"===o.palette.mode?Se.a[800]:Se.a[100]}})})})]}),Object(L.jsx)(Ti,{isOpen:f,handleClose:function(){v(!1)},tasks:null!==(i=null===d||void 0===d?void 0:d.children)&&void 0!==i?i:[]})]})}var Ri=n(143),Fi=n.n(Ri),Bi=n(255),qi=n.n(Bi),zi=n(256),Hi=n.n(zi);function Ui(e){var t=Object(a.useContext)(A).user,n=Object(a.useState)({error:!1,value:e.item_number}),i=Object(b.a)(n,2),c=i[0],o=i[1],l=Object(a.useState)({error:!1,value:e.item_name}),s=Object(b.a)(l,2),u=s[0],p=s[1],h=Object(a.useState)({error:!1,value:e.quantity}),f=Object(b.a)(h,2),v=f[0],O=f[1],x=Object(a.useState)(e.open),m=Object(b.a)(x,2);m[0],m[1];function g(){var e=!0;return""==u.value?(p({error:!0,value:""}),e=!1):p({error:!1,value:u.value}),Number.isNaN(c.value)?(o({error:!0,value:""}),e=!1):o({error:!1,value:c.value}),Number.isNaN(v.value)?(O({error:!0,value:0}),e=!1):O({error:!1,value:v.value}),e}console.log("ITEM NUMBEEr",e.item_number,c),Object(a.useEffect)((function(){console.log("uxsdsdsfdfdgfs"),1==e.open&&(p({error:!1,value:e.item_name}),o({error:!1,value:e.item_number}),O({error:!1,value:e.quantity}))}),[e.open]);var y=function(){var n=Object(j.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!g()){n.next=6;break}return console.log("EDIIT BODY:",{id:e.item_id,project_id:e.projectId,task_id:e.taskId,item_name:u.value,item_number:c.value,quantity:v.value}),n.next=5,C(D+"/api/project/task/item/updateItem",r.Patch,{id:e.item_id,project_id:e.projectId,task_id:e.taskId,item_name:u.value,item_number:c.value,quantity:v.value},{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.tokenStr)},"Something went wrong",!0);case 5:n.sent;case 6:p({error:!1,value:""}),o({error:!1,value:""}),O({error:!1,value:0}),e.dismiss(),n.next=12;break;case 10:n.prev=10,n.t0=n.catch(0);case 12:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}();return Object(L.jsxs)(nn.a,{open:e.open,onClose:function(){e.handleClose()},onBackdropClick:function(){e.dismiss()},children:[Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Item Number: \xa0\xa0"}),Object(L.jsx)(ln.a,{required:!0,type:"number",label:"Item Number",value:c.value,error:c.error,onChange:function(e){o({error:c.error,value:e.target.value})}})]}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Item name: \xa0\xa0"}),Object(L.jsx)(ln.a,{required:!0,label:"Item Name",value:u.value,type:"text",error:u.error,onChange:function(e){p({error:u.error,value:e.target.value})}})]}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Quantity: \xa0\xa0"}),Object(L.jsx)(ln.a,{required:!0,type:"number",label:"Quantity",value:v.value,error:v.error,onChange:function(e){O({error:v.error,value:parseInt(e.target.value)})}})]}),Object(L.jsx)(tn.a,{onClick:y,children:"Edit"})]})}var Gi=Object(F.a)("div")((function(e){var t=e.theme;return{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:t.spacing(1),marginBottom:t.spacing(1)}}));function Yi(e){var t=Object(a.useState)(0),n=Object(b.a)(t,2),i=n[0],c=(n[1],Object(a.useState)(1)),o=Object(b.a)(c,2),l=o[0],s=(o[1],Object(a.useState)(e.data)),u=Object(b.a)(s,2),p=u[0],h=u[1],f=Object(a.useContext)(A).user,v=Object(a.useState)({error:!1,value:""}),O=Object(b.a)(v,2),x=O[0],m=O[1],g=Object(a.useState)({error:!1,value:""}),y=Object(b.a)(g,2),k=y[0],_=y[1],w=Object(a.useState)({error:!1,value:0}),S=Object(b.a)(w,2),T=S[0],N=S[1],I=Object(a.useState)(""),P=Object(b.a)(I,2),E=P[0],M=P[1],W=Object(a.useState)("testestt"),R=Object(b.a)(W,2),F=R[0],B=R[1],q=Object(a.useState)(0),z=Object(b.a)(q,2),H=z[0],U=z[1],G=Object(a.useState)(0),Y=Object(b.a)(G,2),X=Y[0],K=Y[1],Q=Object(a.useState)(!1),$=Object(b.a)(Q,2),Z=$[0],ee=$[1],te=Object(a.useState)(!1),ne=Object(b.a)(te,2),re=ne[0],ae=ne[1];Object(a.useEffect)((function(){ce()}),[re]),Object(a.useEffect)((function(){ce()}),[Z]),Object(a.useEffect)((function(){ce()}),[e.open]);var ie=function(e){return{heads:["Item Number","Item Name","Quantity","Actions"],rows:e.map((function(e){return{id:e.id,cells:[e.item_number,e.item_name,e.quantity,Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(L.jsx)(J.a,{onClick:function(){B(e.item_name),M(e.item_number),U(e.quantity),K(e.id),ae(!0),console.log("CURRENTTT NAME",e.item_name,F)},children:Object(L.jsx)(qi.a,{style:{color:ye.a[800]}})}),Object(L.jsx)(J.a,{onClick:function(){K(e.id),ee(!0)},children:Object(L.jsx)(Hi.a,{style:{color:Ce.a[500]}})})]})]}}))}},ce=function(){var t=Object(j.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("GET DATATATATATATATTA"),t.next=4,C(ga(e.projectId,e.taskId),r.Get,null,{Authorization:"Bearer ".concat(null===f||void 0===f?void 0:f.tokenStr)},"Something went wrong",!0);case 4:n=t.sent,h(n),console.log("ressss",n),console.log("PROPSSS DATA",e.data),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("ERRRR",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),oe=function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function le(){var e=!0;return""==k.value?(_({error:!0,value:""}),e=!1):_({error:!1,value:k.value}),Number.isNaN(x.value)?(m({error:!0,value:""}),e=!1):m({error:!1,value:x.value}),Number.isNaN(T.value)?(N({error:!0,value:0}),e=!1):N({error:!1,value:T.value}),e}var se=function(){var t=Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!le()){t.next=8;break}return console.log({projectId:e.projectId,taskId:e.taskId,itemName:k.value,itemNumber:x.value,quantity:T.value}),t.next=5,C(ya(),r.Post,{projectId:e.projectId,taskId:e.taskId,itemName:k.value,itemNumber:x.value,quantity:T.value},{Authorization:"Bearer ".concat(null===f||void 0===f?void 0:f.tokenStr)},"Something went wrong",!0);case 5:t.sent,ce(),_({error:!1,value:""}),m({error:!1,value:""}),N({error:!1,value:0});case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),ue=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(D+"/api/project/task/item/deleteItem/".concat(X),r.Delete,null,{Authorization:"Bearer ".concat(null===f||void 0===f?void 0:f.tokenStr)},"Something went wrong",!0);case 2:e.sent,ee(!1),console.log("DELETEDDDD");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(null===f||void 0===f?void 0:f.token.roles.includes("ADMIN"))||(null===f||void 0===f?void 0:f.token.roles.includes("CFO"))?Object(L.jsxs)(nn.a,{open:e.open,onClose:function(){e.handleClose()},fullWidth:!0,maxWidth:"xl",children:[Object(L.jsxs)(Gi,{children:[Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Item Number: \xa0\xa0"}),Object(L.jsx)(ln.a,{required:!0,type:"text",label:"Item Number",value:x.value,error:x.error,onChange:function(e){m({error:x.error,value:e.target.value})}})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Item name: \xa0\xa0"}),Object(L.jsx)(ln.a,{required:!0,label:"Item Name",value:k.value,type:"text",error:k.error,onChange:function(e){_({error:k.error,value:e.target.value})}})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Quantity: \xa0\xa0"}),Object(L.jsx)(ln.a,{required:!0,type:"number",label:"Quantity",value:T.value,error:T.error,onChange:function(e){N({error:T.error,value:parseInt(e.target.value)})}})]}),Object(L.jsx)(tn.a,{onClick:se,children:"Add"})]}),Object(L.jsx)(Mr,{currentPage:i,pageCount:l,movePage:oe,onRowClick:function(){},table:ie(p),notInProjectsView:!0}),Object(L.jsx)(Ui,{open:re,handleClose:function(){return ce()},taskId:e.taskId,projectId:e.projectId,item_number:E,item_name:F,quantity:H,item_id:X,dismiss:function(){ae(!1),ce()}}),Object(L.jsx)(fr,{isOpen:Z,title:"Delete Task Item",content:"Are You Sure You Want To Delete This Item?",dismiss:function(){return ee(!1)},positive:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),negativeText:"Cancel",positiveText:"Delete"})]}):Object(L.jsxs)(nn.a,{open:e.open,onClose:function(){e.handleClose()},children:[Object(L.jsx)(Mr,{currentPage:i,pageCount:l,movePage:oe,onRowClick:function(){},table:ie(p),notInProjectsView:!0}),Object(L.jsx)(Ui,{open:re,handleClose:function(){return ce()},taskId:e.taskId,projectId:e.projectId,item_number:E,item_name:F,quantity:H,item_id:X,dismiss:function(){ae(!1),ce()}}),Object(L.jsx)(fr,{isOpen:Z,title:"Delete Task Item",content:"Are You Sure You Want To Delete This Item?",dismiss:function(){return ee(!1)},positive:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:case"end":return e.stop()}}),e)}))),negativeText:"Cancel",positiveText:"Delete"})]})}var Vi=n(206),Xi=n.n(Vi),Ji=(Object(F.a)("div")((function(){return{display:"flex",flexDirection:"row",height:"100%",overflow:"hidden"}})),Object(F.a)("div")((function(e){var t=e.theme;return{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:t.spacing(1),marginBottom:t.spacing(1)}})));function Ki(){var e,t,n=Object(s.i)().id,i=Object(a.useContext)(A).user,c=Object(a.useContext)(xi),o=c.project,l=c.deleteProject,u=Object(s.h)(),p=Object(a.useState)(!1),h=Object(b.a)(p,2),f=h[0],v=h[1],O=Object(a.useState)(null),x=Object(b.a)(O,2),m=x[0],g=x[1],y=Object(a.useState)(null),k=Object(b.a)(y,2),_=k[0],w=k[1],S=Object(a.useState)(!1),T=Object(b.a)(S,2),D=T[0],N=T[1],I=Object(a.useState)([]),P=Object(b.a)(I,2),E=P[0],M=P[1],W=Object(a.useState)(0),R=Object(b.a)(W,2),F=R[0],B=R[1],q=Object(a.useState)(!1),z=Object(b.a)(q,2),H=z[0],U=z[1],G=Object(a.useState)("none"),Y=Object(b.a)(G,2),V=Y[0],X=Y[1],K=Object(a.useState)("Active"),Q=Object(b.a)(K,2),$=(Q[0],Q[1],Object(a.useState)([])),Z=Object(b.a)($,2),ee=Z[0],te=Z[1],ne=Object(a.useState)(!1),re=Object(b.a)(ne,2),ae=re[0],ie=re[1];Object(a.useEffect)((function(){v(!0),C(Pa(n),r.Get,null,{Authorization:"Bearer ".concat(null===i||void 0===i?void 0:i.tokenStr)},"Something went wrong",!0).then((function(e){v(!1),g(null),M(e),console.log("TASKS",E)})).catch((function(e){v(!1),g(e.message)}))}),[]);var oe=function(){var e=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("GET TASK ITEMS 2"),e.next=4,C(ga(parseInt(n),t),r.Get,null,null,"Something went wrong",!0);case 4:a=e.sent,console.log("DETAILS",a),te(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(" DETAILS ERRRR",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),le=function(e){var t;switch(X(e.target.value),e.target.value){case"none":C(Pa(n),r.Get,null,{Authorization:"Bearer ".concat(null===i||void 0===i?void 0:i.tokenStr)},"Something went wrong",!0).then((function(e){v(!1),g(null),M(e)})).catch((function(e){v(!1),g(e.message)}));break;case"status":t=E.sort((function(e,t){return console.log("a.status:",e.status),e.status-t.status})),M(t);break;case"plannedEndDate":t=E.sort((function(e,t){var n=se(It(new Date(e.planned_start_date))),r=se(It(new Date(t.planned_start_date)));return n<r?-1:n>r?1:0})),M(t);break;case"plannedStartDate":t=E.sort((function(e,t){console.log("TASKSS",E);var n=se(It(new Date(e.planned_start_date))),r=se(It(new Date(t.planned_start_date)));return n<r?-1:n>r?1:0})),M(t)}};function se(e){var t=e.split("/"),n=parseInt(t[1])-1,r=parseInt(t[0]),a=parseInt(t[2]);return new Date(a,n,r)}function ue(e){return"Complete"!=(null===e||void 0===e?void 0:e.status)&&(new Date).getTime()>new Date(null===e||void 0===e?void 0:e.planned_end_date).getTime()?function(e,t){var n=Math.abs(t-e);return Math.ceil(n/864e5)}(new Date,new Date(null===e||void 0===e?void 0:e.planned_end_date)):null}function de(){return{heads:["Assigned","Code","Name","Time","Unit","Planned Start","Planned End","Actual Start","Actual End","Progress","Progress Updated","Status","Actions"],rows:E.map((function(e){var t,n,r,a,i,c,o=!1;return 100==e.progress&&(o=!0),console.log("STATUS",e.status),o?{id:e.id,cells:[null!==(t=e.assigned_to)&&void 0!==t?t:"-",null!==(n=e.task_code)&&void 0!==n?n:"-",null!==(r=e.task_name)&&void 0!==r?r:"-",e.estimated_time,e.time_unit,e.planned_start_date?It(new Date(e.planned_start_date)):"-",e.planned_end_date?It(new Date(e.planned_end_date)):"-",e.actual_start_date?It(new Date(e.actual_start_date)):"-",e.actual_end_date?It(new Date(e.actual_end_date)):"-",e.progress+"%",e.progress_last_updated?It(new Date(e.progress_last_updated)):"-",e.status,Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(L.jsx)(J.a,{onClick:function(){var t;w(null!==(t=e.comment)&&void 0!==t?t:"No comments yet."),N(!0)},children:Object(L.jsx)(en.a,{style:{color:ye.a[800]}})}),Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe(e.id);case 2:B(e.id),U(!0);case 4:case"end":return t.stop()}}),t)}))),children:Object(L.jsx)(Xi.a,{style:{color:De.a[500]}})})]})]}:{id:e.id,cells:[null!==(a=e.assigned_to)&&void 0!==a?a:"-",null!==(i=e.task_code)&&void 0!==i?i:"-",null!==(c=e.task_name)&&void 0!==c?c:"-",e.estimated_time,e.time_unit,e.planned_start_date?It(new Date(e.planned_start_date)):"-",e.planned_end_date?It(new Date(e.planned_end_date)):"-",e.actual_start_date?It(new Date(e.actual_start_date)):"-",e.actual_end_date?It(new Date(e.actual_end_date)):"-",e.progress+"%",e.progress_last_updated?It(new Date(e.progress_last_updated)):"-",e.status,Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(L.jsx)(J.a,{onClick:function(){var t;w(null!==(t=e.comment)&&void 0!==t?t:"No comments yet."),N(!0)},children:Object(L.jsx)(en.a,{style:{color:ye.a[800]}})}),Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe(e.id);case 2:B(e.id),U(!0);case 4:case"end":return t.stop()}}),t)}))),children:Object(L.jsx)(Xi.a,{style:{color:De.a[500]}})})]})]}}))}}var je=It(new Date).split("/"),be=It(new Date(null===(e=E[E.length-1])||void 0===e?void 0:e.planned_end_date)).split("/");console.log("fetched date: ",null===(t=E[E.length-1])||void 0===t?void 0:t.planned_end_date),console.log("a",be);var pe,he,fe,ve,Oe,xe,me,Se,Te,Ne,Ie,Pe,Le,Ae,Ee,Me,We,Re,Fe,Be,qe,ze,He,Ue,Ge,Ye,Ve,Xe,Je,Ke,Qe,et,tt,rt,at,it,ct,ot=parseInt(je[0])-parseInt(be[0]);if(parseInt(je[1])>parseInt(be[1]))for(var lt=parseInt(je[1])-parseInt(be[1]),st=0;st<lt;st++)"2"==je[1]?ot+=28:"1"==je[1]||"3"==je[1]||"5"==je[1]||"7"==je[1]||"8"==je[1]||"10"==je[1]||"12"==je[1]?ot+=31:ot+=30;parseInt(je[2])>parseInt(be[2])&&(ot+=365*(parseInt(je[2])-parseInt(be[2])));return pe=1==(null===o||void 0===o?void 0:o.is_draft)?"Pending":2==(null===o||void 0===o?void 0:o.is_draft)?"Complete":"Active",null!=ue(E[E.length-1])?(null===i||void 0===i?void 0:i.token.roles.includes("ADMIN"))||(null===i||void 0===i?void 0:i.token.roles.includes("CFO"))?Object(L.jsxs)(Sr,{isDataLoaded:!f&&!m,children:[f&&Object(L.jsx)(nt,{text:"Loading Project.."}),m&&Object(L.jsx)(Ze,{text:null!==m&&void 0!==m?m:"Something went wrong"}),!f&&!m&&Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[Object(L.jsxs)(Ji,{children:[Object(L.jsx)(li,{title:"Project Number",value:JSON.stringify(null!==(he=Pt(null===o||void 0===o?void 0:o.id))&&void 0!==he?he:0).slice(1).replace('"',""),lightColor:ce.a[100],darkColor:ce.a[900]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Client",value:null!==(fe=null===o||void 0===o||null===(ve=o.client)||void 0===ve?void 0:ve.description)&&void 0!==fe?fe:"",lightColor:we.a[100],darkColor:we.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Project Owner",value:null!==(Oe=null===o||void 0===o||null===(xe=o.user)||void 0===xe?void 0:xe.description)&&void 0!==Oe?Oe:"",lightColor:ye.a[100],darkColor:ye.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Price",value:Nt(null!==(me=null===o||void 0===o?void 0:o.total_price)&&void 0!==me?me:0,null!==(Se=null===o||void 0===o?void 0:o.currency_code)&&void 0!==Se?Se:"USD"),lightColor:ke.a[100],darkColor:ke.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Paid",value:Nt(null!==(Te=null===o||void 0===o?void 0:o.paid_amount)&&void 0!==Te?Te:0,null!==(Ne=null===o||void 0===o?void 0:o.currency_code)&&void 0!==Ne?Ne:"USD"),lightColor:ge.a[100],darkColor:ge.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Delivery Date",value:(null===o||void 0===o?void 0:o.estimated_delivery)?It(new Date(o.estimated_delivery)):"N/A",lightColor:Ce.a[100],darkColor:Ce.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Status",value:pe,lightColor:_e.a[100],darkColor:_e.a[800]}),Object(L.jsx)(tn.a,{endIcon:Object(L.jsx)(Fi.a,{}),style:{borderRadius:"50px",padding:"1rem",marginLeft:"10px",backgroundColor:we.a[600]},variant:"contained",onClick:function(){return u("/projects/".concat(n,"/payments"))},children:"Payment"}),(null===i||void 0===i||null===(Ie=i.token)||void 0===Ie?void 0:Ie.roles.includes("ADMIN"))&&Object(L.jsx)(tn.a,{color:"error",endIcon:Object(L.jsx)(Ua.a,{}),style:{borderRadius:"50px",padding:"1rem",marginLeft:"10px"},variant:"contained",onClick:function(){return ie(!0)},children:"Delete Project"}),Object(L.jsx)(Wi,{}),Object(L.jsx)(li,{title:"Last Task Due Date",value:(null===(Pe=E[E.length-1])||void 0===Pe?void 0:Pe.planned_end_date)?It(new Date(null===(Le=E[E.length-1])||void 0===Le?void 0:Le.planned_end_date)):"N/A",lightColor:$e.a[100],darkColor:$e.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Number of Delayed Days",value:JSON.stringify(ue(E[E.length-1])),lightColor:Ce.a[100],darkColor:Ce.a[800]})]}),Object(L.jsxs)(dn.a,{children:[Object(L.jsx)(Br.a,{id:"demo-row-radio-buttons-group-label",children:"Sort By:"}),Object(L.jsxs)(Fr.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:V,onChange:le,children:[Object(L.jsx)(jr.a,{value:"none",control:Object(L.jsx)(Rr.a,{}),label:"None"}),Object(L.jsx)(jr.a,{value:"status",control:Object(L.jsx)(Rr.a,{}),label:"status"}),Object(L.jsx)(jr.a,{value:"plannedEndDate",control:Object(L.jsx)(Rr.a,{}),label:"Planned End Date"}),Object(L.jsx)(jr.a,{value:"plannedStartDate",control:Object(L.jsx)(Rr.a,{}),label:"Planned Start Date"})]})]}),Object(L.jsx)(wt,{table:de(),onRowClick:function(){},cursor:"default"}),Object(L.jsx)(Yi,{data:ee,open:H,handleClose:function(){return U(!1)},taskId:F,projectId:parseInt(n)}),Object(L.jsx)(sr,{content:null!==_&&void 0!==_?_:"No comments yet.",isOpen:D,title:"Comments",onClose:function(){return N(!1)}}),Object(L.jsx)(fr,{content:"Are you sure you want to delete this project?",negativeText:"Cancel",positiveText:"Delete",title:"Delete Project",isOpen:ae,dismiss:function(){return ie(!1)},positive:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!1),e.next=3,l();case 3:case"end":return e.stop()}}),e)})))})]})]}):Object(L.jsxs)(Sr,{isDataLoaded:!f&&!m,children:[f&&Object(L.jsx)(nt,{text:"Loading Project.."}),m&&Object(L.jsx)(Ze,{text:null!==m&&void 0!==m?m:"Something went wrong"}),!f&&!m&&Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[Object(L.jsxs)(Ji,{children:[Object(L.jsx)(li,{title:"Project Number",value:JSON.stringify(null!==(Ae=Pt(null===o||void 0===o?void 0:o.id))&&void 0!==Ae?Ae:0).slice(1).replace('"',""),lightColor:ce.a[100],darkColor:ce.a[900]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Client",value:null!==(Ee=null===o||void 0===o||null===(Me=o.client)||void 0===Me?void 0:Me.description)&&void 0!==Ee?Ee:"",lightColor:we.a[100],darkColor:we.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Project Owner",value:null!==(We=null===o||void 0===o||null===(Re=o.user)||void 0===Re?void 0:Re.description)&&void 0!==We?We:"",lightColor:ye.a[100],darkColor:ye.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Delivery Date",value:(null===o||void 0===o?void 0:o.estimated_delivery)?It(new Date(o.estimated_delivery)):"N/A",lightColor:Ce.a[100],darkColor:Ce.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Status",value:pe,lightColor:_e.a[100],darkColor:_e.a[800]}),Object(L.jsx)(tn.a,{endIcon:Object(L.jsx)(Fi.a,{}),style:{borderRadius:"50px",padding:"1rem",marginLeft:"10px",backgroundColor:we.a[600]},variant:"contained",onClick:function(){return u("/projects/".concat(n,"/payments"))},children:"Payment"}),(null===i||void 0===i||null===(Fe=i.token)||void 0===Fe?void 0:Fe.roles.includes("ADMIN"))&&Object(L.jsx)(tn.a,{color:"error",endIcon:Object(L.jsx)(Ua.a,{}),style:{borderRadius:"50px",padding:"1rem",marginLeft:"10px"},variant:"contained",onClick:function(){return ie(!0)},children:"Delete Project"}),Object(L.jsx)(Wi,{}),Object(L.jsx)(li,{title:"Last Task Due Date",value:(null===(Be=E[E.length-1])||void 0===Be?void 0:Be.planned_end_date)?It(new Date(null===(qe=E[E.length-1])||void 0===qe?void 0:qe.planned_end_date)):"N/A",lightColor:$e.a[100],darkColor:$e.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Number of Delayed Days",value:ot.toString()+" Days",lightColor:Ce.a[100],darkColor:Ce.a[800]})]}),Object(L.jsxs)(dn.a,{children:[Object(L.jsx)(Br.a,{id:"demo-row-radio-buttons-group-label",children:"Sort By:"}),Object(L.jsxs)(Fr.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:V,onChange:le,children:[Object(L.jsx)(jr.a,{value:"none",control:Object(L.jsx)(Rr.a,{}),label:"None"}),Object(L.jsx)(jr.a,{value:"status",control:Object(L.jsx)(Rr.a,{}),label:"status"}),Object(L.jsx)(jr.a,{value:"plannedEndDate",control:Object(L.jsx)(Rr.a,{}),label:"Planned End Date"}),Object(L.jsx)(jr.a,{value:"plannedStartDate",control:Object(L.jsx)(Rr.a,{}),label:"Planned Start Date"})]})]}),Object(L.jsx)(wt,{table:de(),onRowClick:function(){},cursor:"default"}),Object(L.jsx)(Yi,{data:ee,open:H,handleClose:function(){return U(!1)},taskId:F,projectId:parseInt(n)}),Object(L.jsx)(sr,{content:null!==_&&void 0!==_?_:"No comments yet.",isOpen:D,title:"Comments",onClose:function(){return N(!1)}}),Object(L.jsx)(fr,{content:"Are you sure you want to delete this project?",negativeText:"Cancel",positiveText:"Delete",title:"Delete Project",isOpen:ae,dismiss:function(){return ie(!1)},positive:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!1),e.next=3,l();case 3:case"end":return e.stop()}}),e)})))})]})]}):(null===i||void 0===i?void 0:i.token.roles.includes("ADMIN"))||(null===i||void 0===i?void 0:i.token.roles.includes("CFO"))?Object(L.jsxs)(Sr,{isDataLoaded:!f&&!m,children:[f&&Object(L.jsx)(nt,{text:"Loading Project.."}),m&&Object(L.jsx)(Ze,{text:null!==m&&void 0!==m?m:"Something went wrong"}),!f&&!m&&Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[Object(L.jsxs)(Ji,{children:[Object(L.jsx)(li,{title:"Project Number",value:JSON.stringify(null!==(ze=Pt(null===o||void 0===o?void 0:o.id))&&void 0!==ze?ze:0).slice(1).replace('"',""),lightColor:ce.a[100],darkColor:ce.a[900]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Client",value:null!==(He=null===o||void 0===o||null===(Ue=o.client)||void 0===Ue?void 0:Ue.description)&&void 0!==He?He:"",lightColor:we.a[100],darkColor:we.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Project Owner",value:null!==(Ge=null===o||void 0===o||null===(Ye=o.user)||void 0===Ye?void 0:Ye.description)&&void 0!==Ge?Ge:"",lightColor:ye.a[100],darkColor:ye.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Price",value:Nt(null!==(Ve=null===o||void 0===o?void 0:o.total_price)&&void 0!==Ve?Ve:0,null!==(Xe=null===o||void 0===o?void 0:o.currency_code)&&void 0!==Xe?Xe:"USD"),lightColor:ke.a[100],darkColor:ke.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Paid",value:Nt(null!==(Je=null===o||void 0===o?void 0:o.paid_amount)&&void 0!==Je?Je:0,null!==(Ke=null===o||void 0===o?void 0:o.currency_code)&&void 0!==Ke?Ke:"USD"),lightColor:ge.a[100],darkColor:ge.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Delivery Date",value:(null===o||void 0===o?void 0:o.estimated_delivery)?It(new Date(o.estimated_delivery)):"N/A",lightColor:Ce.a[100],darkColor:Ce.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Status",value:pe,lightColor:_e.a[100],darkColor:_e.a[800]}),Object(L.jsx)(tn.a,{endIcon:Object(L.jsx)(Fi.a,{}),style:{borderRadius:"50px",padding:"1rem",marginLeft:"10px",backgroundColor:we.a[600]},variant:"contained",onClick:function(){return u("/projects/".concat(n,"/payments"))},children:"Payment"}),(null===i||void 0===i||null===(Qe=i.token)||void 0===Qe?void 0:Qe.roles.includes("ADMIN"))&&Object(L.jsx)(tn.a,{color:"error",endIcon:Object(L.jsx)(Ua.a,{}),style:{borderRadius:"50px",padding:"1rem",marginLeft:"10px"},variant:"contained",onClick:function(){return ie(!0)},children:"Delete Project"}),Object(L.jsx)(Wi,{})]}),Object(L.jsxs)(dn.a,{children:[Object(L.jsx)(Br.a,{id:"demo-row-radio-buttons-group-label",children:"Sort By:"}),Object(L.jsxs)(Fr.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:V,onChange:le,children:[Object(L.jsx)(jr.a,{value:"none",control:Object(L.jsx)(Rr.a,{}),label:"None"}),Object(L.jsx)(jr.a,{value:"status",control:Object(L.jsx)(Rr.a,{}),label:"status"}),Object(L.jsx)(jr.a,{value:"plannedEndDate",control:Object(L.jsx)(Rr.a,{}),label:"Planned End Date"}),Object(L.jsx)(jr.a,{value:"plannedStartDate",control:Object(L.jsx)(Rr.a,{}),label:"Planned Start Date"})]})]}),Object(L.jsx)(wt,{table:de(),onRowClick:function(){},cursor:"default"}),Object(L.jsx)(Yi,{data:ee,open:H,handleClose:function(){return U(!1)},taskId:F,projectId:parseInt(n)}),Object(L.jsx)(sr,{content:null!==_&&void 0!==_?_:"No comments yet.",isOpen:D,title:"Comments",onClose:function(){return N(!1)}}),Object(L.jsx)(fr,{content:"Are you sure you want to delete this project?",negativeText:"Cancel",positiveText:"Delete",title:"Delete Project",isOpen:ae,dismiss:function(){return ie(!1)},positive:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!1),e.next=3,l();case 3:case"end":return e.stop()}}),e)})))})]})]}):Object(L.jsxs)(Sr,{isDataLoaded:!f&&!m,children:[f&&Object(L.jsx)(nt,{text:"Loading Project.."}),m&&Object(L.jsx)(Ze,{text:null!==m&&void 0!==m?m:"Something went wrong"}),!f&&!m&&Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[Object(L.jsxs)(Ji,{children:[Object(L.jsx)(li,{title:"Project Number",value:JSON.stringify(null!==(et=Pt(null===o||void 0===o?void 0:o.id))&&void 0!==et?et:0).slice(1).replace('"',""),lightColor:ce.a[100],darkColor:ce.a[900]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Client",value:null!==(tt=null===o||void 0===o||null===(rt=o.client)||void 0===rt?void 0:rt.description)&&void 0!==tt?tt:"",lightColor:we.a[100],darkColor:we.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Project Owner",value:null!==(at=null===o||void 0===o||null===(it=o.user)||void 0===it?void 0:it.description)&&void 0!==at?at:"",lightColor:ye.a[100],darkColor:ye.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Delivery Date",value:(null===o||void 0===o?void 0:o.estimated_delivery)?It(new Date(o.estimated_delivery)):"N/A",lightColor:Ce.a[100],darkColor:Ce.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Status",value:pe,lightColor:_e.a[100],darkColor:_e.a[800]}),Object(L.jsx)(tn.a,{endIcon:Object(L.jsx)(Fi.a,{}),style:{borderRadius:"50px",padding:"1rem",marginLeft:"10px",backgroundColor:we.a[600]},variant:"contained",onClick:function(){return u("/projects/".concat(n,"/payments"))},children:"Payment"}),(null===i||void 0===i||null===(ct=i.token)||void 0===ct?void 0:ct.roles.includes("ADMIN"))&&Object(L.jsx)(tn.a,{color:"error",endIcon:Object(L.jsx)(Ua.a,{}),style:{borderRadius:"50px",padding:"1rem",marginLeft:"10px"},variant:"contained",onClick:function(){return ie(!0)},children:"Delete Project"}),Object(L.jsx)(Wi,{})]}),Object(L.jsxs)(dn.a,{children:[Object(L.jsx)(Br.a,{id:"demo-row-radio-buttons-group-label",children:"Sort By:"}),Object(L.jsxs)(Fr.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:V,onChange:le,children:[Object(L.jsx)(jr.a,{value:"none",control:Object(L.jsx)(Rr.a,{}),label:"None"}),Object(L.jsx)(jr.a,{value:"status",control:Object(L.jsx)(Rr.a,{}),label:"status"}),Object(L.jsx)(jr.a,{value:"plannedEndDate",control:Object(L.jsx)(Rr.a,{}),label:"Planned End Date"}),Object(L.jsx)(jr.a,{value:"plannedStartDate",control:Object(L.jsx)(Rr.a,{}),label:"Planned Start Date"})]})]}),Object(L.jsx)(wt,{table:de(),onRowClick:function(){},cursor:"default"}),Object(L.jsx)(Yi,{open:H,data:ee,handleClose:function(){return U(!1)},taskId:F,projectId:parseInt(n)}),Object(L.jsx)(sr,{content:null!==_&&void 0!==_?_:"No comments yet.",isOpen:D,title:"Comments",onClose:function(){return N(!1)}}),Object(L.jsx)(fr,{content:"Are you sure you want to delete this project?",negativeText:"Cancel",positiveText:"Delete",title:"Delete Project",isOpen:ae,dismiss:function(){return ie(!1)},positive:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(!1),e.next=3,l();case 3:case"end":return e.stop()}}),e)})))})]})]})}var Qi=n(257),$i=n.n(Qi),Zi=Object(F.a)(ie.a)((function(e){var t=e.theme;return{backgroundColor:"light"===t.palette.mode?ce.a[200]:t.palette.background.paper,display:"flex",flexDirection:"column",padding:t.spacing(1)}})),ec=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}})),tc=Object(F.a)("div")((function(e){var t=e.theme;return{display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:t.spacing(2),marginBottom:t.spacing(2)}})),nc=160;function rc(){var e=Object(a.useContext)(A).user,t=Object(s.h)(),n=Object(a.useState)(!1),i=Object(b.a)(n,2),c=i[0],o=i[1],l=Object(a.useState)(!1),u=Object(b.a)(l,2),h=u[0],f=u[1],v=Object(a.useState)(""),O=Object(b.a)(v,2),x=O[0],m=O[1],g=Object(a.useState)(""),y=Object(b.a)(g,2),k=y[0],_=y[1],w=Object(a.useState)({error:!1,value:""}),S=Object(b.a)(w,2),T=S[0],D=S[1],N=Object(a.useState)({error:!1,value:""}),I=Object(b.a)(N,2),P=I[0],E=I[1],M=Object(a.useState)({error:!1,value:""}),W=Object(b.a)(M,2),R=W[0],F=W[1],B=Object(a.useState)({error:!1,value:""}),q=Object(b.a)(B,2),z=q[0],H=q[1],U=Object(a.useState)({error:!1,value:new Date}),G=Object(b.a)(U,2),Y=G[0],J=G[1],K=Object(a.useState)({error:!1,value:""}),Q=Object(b.a)(K,2),$=Q[0],Z=Q[1],ee=Object(a.useState)({error:!1,value:""}),te=Object(b.a)(ee,2),ne=te[0],re=te[1],ae=Object(a.useState)({error:!1,value:""}),ie=Object(b.a)(ae,2),ce=ie[0],oe=ie[1],le=Object(a.useState)({error:!1,value:""}),se=Object(b.a)(le,2),ue=se[0],de=se[1],je=Object(a.useState)({error:!1,value:new Date}),be=Object(b.a)(je,2),pe=be[0],he=be[1],fe=aa("http://87.98.220.129:1515/api/project/init",r.Get,null,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)}),ve=fe.data,Oe=fe.isLoading,xe=fe.error,me=function(){var n=Object(j.a)(d.a.mark((function n(){var a,i,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!ge()){n.next=19;break}return a={user_code:P.value,client_code:T.value,total_price:Number($.value),project_currency:z.value,estimated_delivery_date:Y.value.getTime(),title:R.value,lost_sales:ne.value},ce.value.length>=1&&(a.down_payment=Number(ce.value),a.payment_collection_date=pe.value.getTime(),a.down_payment_currency=ue.value),"http://87.98.220.129:1515/api/project/new",n.prev=4,o(!0),n.next=8,C("http://87.98.220.129:1515/api/project/new",r.Post,a,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},void 0,!0);case 8:i=n.sent,c=i.id,t("/projects/".concat(c,"/tasks/edit")),n.next=19;break;case 13:n.prev=13,n.t0=n.catch(4),m("Something went wrong"),_(n.t0.message),f(!0),o(!1);case 19:case"end":return n.stop()}}),n,null,[[4,13]])})));return function(){return n.apply(this,arguments)}}();function ge(){var e=!0;return P.value.length<1&&(E({value:P.value,error:!0}),e=!1),T.value.length<1&&(D({value:T.value,error:!0}),e=!1),(Number.isNaN($.value)||$.value.length<1)&&(Z({value:$.value,error:!0}),e=!1),z.value.length<1&&(H({value:z.value,error:!0}),e=!1),null===Y.value&&(J({value:Y.value,error:!0}),e=!1),R.value.length<1&&(F({value:R.value,error:!0}),e=!1),ce.value.length>=1?((Number.isNaN(ce.value)||ce.value.length<1)&&(oe({value:ce.value,error:!0}),e=!1),ue.value.length<1&&(de({value:ue.value,error:!0}),e=!1),null===pe.value&&(he({value:pe.value,error:!0}),e=!1)):(oe({value:ce.value,error:!1}),de({value:ue.value,error:!1}),he({value:pe.value,error:!1})),e}return Object(a.useEffect)((function(){var e=null===ve||void 0===ve?void 0:ve.clients.find((function(e){return e.client_code===T.value}));e&&(H({error:z.error,value:e.currency}),de({error:ue.error,value:e.currency}))}),[T]),Object(L.jsxs)(Sr,{isDataLoaded:null!==ve&&!xe&&!c&&!Oe,children:[Oe&&Object(L.jsx)(nt,{text:"Fetching Data.."}),c&&Object(L.jsx)(nt,{text:"Adding Project.."}),xe&&Object(L.jsx)(Ze,{text:xe}),ve&&!c&&Object(L.jsx)(mn.b,{dateAdapter:xn.a,children:Object(L.jsxs)(Zi,{children:[Object(L.jsx)(ec,{children:Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h5",children:"New Project"})}),Object(L.jsx)(X.a,{style:{backgroundColor:"black",marginBottom:"1rem"}}),Object(L.jsx)(wr,{children:Object(L.jsxs)(tc,{children:[Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Title: \xa0\xa0"}),Object(L.jsx)(ln.a,{required:!0,type:"text",variant:"outlined",onChange:function(e){return F({value:e.target.value,error:R.error})},value:R.value,error:R.error,label:"Title"})]}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Client: \xa0\xa0"}),Object(L.jsx)(sn.a,{sx:{minWidth:nc},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:"client-label",children:"Client"}),Object(L.jsx)(un.a,{labelId:"client-label",id:"client-select",value:T.value,error:T.error,label:"Client",onChange:function(e){return D({error:T.error,value:e.target.value})},children:ve.clients.map((function(e){return Object(L.jsx)(bn.a,{value:e.client_code,children:e.description},e.client_code)}))})]})})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Project Owner: \xa0\xa0"}),Object(L.jsx)(sn.a,{sx:{minWidth:nc},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:"user-label",children:"User"}),Object(L.jsx)(un.a,{labelId:"user-label",id:"user-select",value:P.value,error:P.error,label:"user",onChange:function(e){return E({value:e.target.value,error:P.error})},children:ve.users.map((function(e){return Object(L.jsx)(bn.a,{value:e.user_code,children:e.description},e.user_code)}))})]})})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Currency: \xa0\xa0"}),Object(L.jsx)(sn.a,{sx:{minWidth:nc},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:"currency-label",children:"Currency"}),Object(L.jsx)(un.a,{labelId:"currency-label",id:"currency-select",value:z.value,error:z.error,label:"Currency",onChange:function(e){return H({error:z.error,value:e.target.value})},children:ve.currencies.map((function(e){return Object(L.jsx)(bn.a,{value:e.currency_code,children:e.currency_symbol},e.currency_code)}))})]})})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Delivery: \xa0\xa0"}),Object(L.jsx)(gn.a,{label:"Estimated Delivery",openTo:"month",views:["year","month","day"],value:Y.value,onChange:function(e){J({value:e,error:Y.error})},renderInput:function(e){return Object(L.jsx)(ln.a,Object(p.a)({},e))}})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Price: \xa0\xa0"}),Object(L.jsx)(ln.a,{required:!0,type:"number",variant:"outlined",onChange:function(e){return Z({value:Math.abs(Number(e.target.value)).toString(),error:$.error})},value:$.value,error:$.error,label:"Project Price"})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Lost Sales: \xa0\xa0"}),Object(L.jsx)(ln.a,{type:"text",variant:"outlined",onChange:function(e){return re({value:e.target.value,error:ne.error})},value:ne.value,error:ne.error,label:"Lost Sales"})]})]})}),Object(L.jsx)(Tr,{}),Object(L.jsx)(wr,{children:Object(L.jsxs)(tc,{children:[Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Amount: \xa0\xa0"}),Object(L.jsx)(ln.a,{type:"number",required:!0,label:"Amount",variant:"outlined",value:ce.value,error:ce.error,onChange:function(e){return oe({value:Math.abs(Number(e.target.value)).toString(),error:ce.error})}})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Currency: \xa0\xa0"}),Object(L.jsx)(sn.a,{sx:{minWidth:nc},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:"currency-label",children:"Currency"}),Object(L.jsx)(un.a,{labelId:"currency-label",id:"currency-select",value:ue.value,error:ue.error,label:"Currency",onChange:function(e){return de({value:e.target.value,error:ue.error})},children:ve.currencies.map((function(e){return Object(L.jsx)(bn.a,{value:e.currency_code,children:e.currency_symbol},e.currency_code)}))})]})})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Collection Date: \xa0\xa0"}),Object(L.jsx)(gn.a,{label:"Collection Date",openTo:"month",views:["year","month","day"],value:pe.value,onChange:function(e){he({value:e,error:pe.error})},renderInput:function(e){return Object(L.jsx)(ln.a,Object(p.a)({},e))}})]})]})}),Object(L.jsx)(tn.a,{color:"success",style:{alignSelf:"flex-end",justifySelf:"center",margin:"1rem"},variant:"contained",onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),endIcon:Object(L.jsx)($i.a,{}),children:"Next"})]})}),Object(L.jsx)(sr,{content:k,isOpen:h,title:x,onClose:function(){return f(!1)}})]})}var ac=Object(a.createContext)(null);function ic(e){var t=e.children,n=Object(s.i)().id,i=Object(a.useContext)(A).user,c=Object(s.h)(),o=Sa.a.parse(window.location.search.replace("?",""));Object(a.useEffect)((function(){H(!0),C(function(e,t){var n=D+"/api/project/".concat(e,"/task/edit/init");return t&&t.req&&(t.start||t.end)&&(n+="?req=".concat(t.req),t.start&&(n+="&start=".concat(t.start)),t.end&&(n+="&end=".concat(t.end))),n}(n,o),r.Get,null,{Authorization:"Bearer ".concat(null===i||void 0===i?void 0:i.tokenStr)}).then((function(e){F(e.project);var t=Object.assign({},e.project.task_tree);zt(t.children),x(Object.assign({},t)),te(t),E(e.users),T(e.templates),Q(e.time_units),H(!1),V(null),se(e.autofill_templates),console.log(e.autofill_templates)})).catch((function(e){V(e.message),T(null),F(null),H(!1),E(null)}))}),[]);var l=Object(a.useState)(!1),u=Object(b.a)(l,2),p=u[0],h=u[1],f=Object(a.useState)(null),v=Object(b.a)(f,2),O=v[0],x=v[1],m=Object(a.useState)(null),g=Object(b.a)(m,2),y=g[0],k=g[1],_=Object(a.useState)(null),w=Object(b.a)(_,2),S=w[0],T=w[1],N=Object(a.useState)(null),I=Object(b.a)(N,2),P=I[0],E=I[1],M=Object(a.useState)(null),W=Object(b.a)(M,2),R=W[0],F=W[1],B=Object(a.useState)(!1),q=Object(b.a)(B,2),z=q[0],H=q[1],U=Object(a.useState)(null),G=Object(b.a)(U,2),Y=G[0],V=G[1],X=Object(a.useState)(null),J=Object(b.a)(X,2),K=J[0],Q=J[1],$=Object(a.useState)(null),Z=Object(b.a)($,2),ee=Z[0],te=Z[1],ne=Object(a.useState)(null),re=Object(b.a)(ne,2),ae=re[0],ie=re[1],ce=Object(a.useState)([]),oe=Object(b.a)(ce,2),le=oe[0],se=oe[1],ue=function(){k(null),ie(null),h(!1)},de=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=13;break}return e.prev=1,H(!0),e.next=5,C(Oa(y,!1),r.Get,null,{Authorization:"Bearer ".concat(null===i||void 0===i?void 0:i.tokenStr)},void 0,!0);case 5:t=e.sent,H(!1),t&&(ie(t.task),h(!0)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),H(!1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),je=function e(t,n,r){switch(r){case wa.ChangeStart:ve(t,n);break;case wa.ChangeEnd:!function(e,t){var n=e.planned_start_date,r=e.planned_end_date;if(n&&r){var a=r-n;a>0&&(e.time_unit_id=3,e.estimated_time=Math.floor(a/864e5+1),he(e,t))}}(t,n);break;case wa.ChangeTime:ve(t,n)}var a=[];ye(O,a),a.filter((function(e){return!!e.predecessor&&(e.predecessor.fake_id?e.predecessor.fake_id===t.fake_id:e.predecessor.id===t.id)})).map((function(e){return{task:e,parent:a.find((function(t){return e.parent_fake_id?t.fake_id===e.parent_fake_id:t.id===e.parent}))}})).forEach((function(n){n.task.planned_start_date=t.planned_end_date,e(n.task,n.parent,wa.ChangeStart)})),pe(),x(Object.assign({},O))};function be(e,t){var n=function(e){return K.find((function(t){return t.id===e})).milliseconds}(e.time_unit_id)*e.estimated_time;e.planned_start_date=t,e.planned_end_date=t+n}var pe=function(){var e;null===O||void 0===O||null===(e=O.children)||void 0===e||e.forEach((function(e){0===e.children.length?function(e){var t=fe(e);t&&t.planned_end_date?t.planned_end_date>e.planned_start_date&&be(e,t.planned_end_date):e.planned_start_date&&be(e,e.planned_start_date)}(e):function(e){var t=e.children.find((function(e){return 1===e.sort_order})),n=Bt(e.children.map((function(e){return e.sort_order}))),r=e.children.find((function(e){return e.sort_order===n}));t&&t.planned_start_date&&(e.planned_start_date=t.planned_start_date),r&&(null===r||void 0===r?void 0:r.planned_end_date)&&(e.planned_end_date=r.planned_end_date);var a=e.planned_start_date,i=e.planned_end_date;if(a&&i){var c=i-a;c>0&&(e.time_unit_id=3,e.estimated_time=Math.floor(c/864e5+1))}Ht(e.children)}(e)}))};function he(e,t){t.parent&&function(){for(var n=e.sort_order+1,r=Bt(t.children.map((function(e){return e.sort_order})));n<=r;){var a=t.children.find((function(e){return e.sort_order===n}));if(a)if(a.predecessor){var i=fe(a);i&&i.planned_end_date&&be(a,i.planned_end_date)}else{var c=t.children.find((function(e){return e.sort_order===n-1}));c&&c.planned_end_date&&(a.planned_start_date=c.planned_end_date,be(a,c.planned_end_date))}n++}}()}function fe(e){var t,n=[];return ge(O,n),void 0!==e.predecessor&&(t=e.predecessor.fake_id?n.find((function(t){var n;return t.fake_id===(null===(n=e.predecessor)||void 0===n?void 0:n.fake_id)})):n.find((function(t){var n;return t.id===(null===(n=e.predecessor)||void 0===n?void 0:n.id)}))),t}function ve(e,t){e.planned_start_date&&(be(e,e.planned_start_date),he(e,t))}var Oe=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,H(!0),e.next=4,C(Na(n),r.Post,O,{Authorization:"Bearer ".concat(null===i||void 0===i?void 0:i.tokenStr)},void 0,!1);case 4:H(!1),c("/projects"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),H(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,H(!0),e.next=4,C(Ia(n),r.Post,O,{Authorization:"Bearer ".concat(null===i||void 0===i?void 0:i.tokenStr)},void 0,!1);case 4:H(!1),c("/projects/".concat(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),H(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();function me(e,t){0===e.children.length?void 0!==e.assigned_to_user_code&&null!==e.assigned_to_user_code&&void 0!==e.planned_start_date&&null!==e.planned_start_date&&void 0!==e.planned_end_date&&null!==e.planned_end_date||(t.value=!1):void 0!==e.planned_start_date&&null!==e.planned_start_date&&void 0!==e.planned_end_date&&null!==e.planned_end_date||(t.value=!1),e.children.forEach((function(e){return me(e,t)}))}function ge(e,t){0===e.children.length?t.push(e):e.children.forEach((function(e){return ge(e,t)}))}function ye(e,t){t.push(e),e.children.forEach((function(e){return ye(e,t)}))}var ke={users:P,error:Y,isLoading:z,minifiedTemplates:S,project:R,showingTemplate:p,selectTemplate:de,resetTempSelection:ue,selectedTemplateId:y,setSelectedTemplateId:k,selectedProjectTask:ee,setSelectedProjectTaskCb:function(e){(null===ee||void 0===ee?void 0:ee.id)===(null===e||void 0===e?void 0:e.id)&&(null===ee||void 0===ee?void 0:ee.fake_id)===(null===e||void 0===e?void 0:e.fake_id)?te(O):te(e)},timeUnits:K,addNewTask:function(e){var t,n;n=ee||O,e.parent=n.id,e.sort_order=qt(null!==(t=n.children.map((function(e){return e.sort_order})))&&void 0!==t?t:[]),e.fake_id=Object(Ta.a)(),n.children.push(e),Ht(n.children),x(Object.assign({},O))},updateTask:je,template:ae,pickTemplate:function(){if(ae){var e=Object(Ta.a)(),t={id:-1,estimated_time:ae.estimated_time,task_name:ae.task_name,task_code:ae.task_code,time_unit_id:ae.time_unit_id,fake_id:e,description:ae.description,sort_order:ae.sort_order,children:function e(t,n){return t.map((function(t){var r=Object(Ta.a)();return{id:-1,fake_id:r,task_name:t.task_name,task_code:t.task_code,estimated_time:t.estimated_time,time_unit_id:t.time_unit_id,description:t.description,parent:-1,parent_fake_id:n,sort_order:t.sort_order,children:e(t.children,r),assigned_to_user_code:t.default_assigned_to}}))}(ae.children,e)};x(Object.assign({},t)),te(null),ue()}},taskTree:O,sortOrder:function(e,t,n){var r=n.children.find((function(t){return t.sort_order===e}));r&&(r.sort_order=t,t<e?n.children.forEach((function(e){e.sort_order>=t&&e!==r&&e.sort_order++})):t>e&&n.children.forEach((function(e){e.sort_order<=t&&e!==r&&e.sort_order--})),Ht(n.children),x(Object.assign({},O)))},saveDraft:Oe,startProject:xe,isProjectReadyToStart:function(){if(O&&O.children&&O.children.length>0){var e={value:!0};return O.children.forEach((function(t){return me(t,e)})),e.value}return!1},canDeleteTask:function(e){return!!(null===R||void 0===R?void 0:R.is_draft)||!e.actual_start_date},deleteTask:function(e,t){t.children.includes(e)&&(t.children=t.children.filter((function(t){return t!==e})),x(Object.assign({},O)))},canOrderUp:function(e,t){if(e.actual_start_date)return!1;var n=t.children.find((function(t){return t.sort_order===e.sort_order-1}));return!n||!n.actual_start_date},canOrderDown:function(e,t){if(e.actual_start_date)return!1;var n=t.children.find((function(t){return t.sort_order===e.sort_order+1}));return!n||!n.actual_start_date},autofillTemplates:le,acceptRescheduleStart:function(e,t,n){e.planned_start_date=n.requested_date,n.is_confirmed=!0,je(e,t,wa.ChangeStart)},declineRescheduleStart:function(e){e.is_confirmed=!1,x(Object.assign({},O))},acceptRescheduleEnd:function(e,t,n){e.planned_end_date=n.requested_date,n.is_confirmed=!0,je(e,t,wa.ChangeEnd)},declineRescheduleEnd:function(e){e.is_confirmed=!1,x(Object.assign({},O))},getAvailablePredecessors:function(e,t){var n=[];null===O||void 0===O||O.children.forEach((function(e){return ge(e,n)}));var r=n.filter((function(n){var r,a,i,c;return(!t.parent||!t.children.includes(n))&&n!==e&&(null!==(r=null===(a=n.predecessor)||void 0===a?void 0:a.fake_id)&&void 0!==r?r:null===(i=n.predecessor)||void 0===i?void 0:i.id)!==(null!==(c=e.fake_id)&&void 0!==c?c:e.id)}));return r.length>0&&r.unshift({id:-100,task_name:"None",time_unit_id:1,estimated_time:1,sort_order:1}),r}};return Object(L.jsx)(ac.Provider,{value:ke,children:t})}var cc=Object(F.a)("div")((function(e){return{display:"grid",gridTemplateColumns:"1fr 1fr",gap:e.theme.spacing(2)}}));function oc(e){var t=Object(a.useContext)(ac),n=t.users,r=t.timeUnits,i=t.addNewTask,c=t.autofillTemplates,o=Object(a.useState)({error:!1,value:""}),l=Object(b.a)(o,2),s=l[0],u=l[1],d=Object(a.useState)({error:!1,value:""}),j=Object(b.a)(d,2),h=j[0],f=j[1],v=Object(a.useState)({error:!1,value:""}),O=Object(b.a)(v,2),x=O[0],m=O[1],g=Object(a.useState)({error:!1,value:""}),y=Object(b.a)(g,2),k=y[0],_=y[1],w=Object(a.useState)({error:!1,value:null}),C=Object(b.a)(w,2),S=C[0],T=C[1],D=Object(a.useState)({error:!1,value:null}),N=Object(b.a)(D,2),I=N[0],P=N[1],A=Object(a.useState)(""),E=Object(b.a)(A,2),M=(E[0],E[1],function(){u({error:!1,value:""}),f({error:!1,value:""}),m({error:!1,value:""}),_({error:!1,value:""}),T({error:!1,value:null}),P({error:!1,value:null})});return Object(a.useEffect)((function(){if(S.value&&k.value&&x.value){var e=null===r||void 0===r?void 0:r.find((function(e){return e.id===Number(k.value)}));if(e){var t=e.milliseconds*(0===Number(x.value)?0:Number(x.value)-1);P({error:I.error,value:new Date(Number(S.value)+t)})}}}),[S.value,k.value,x.value]),Object(L.jsxs)(nn.a,{open:e.open,onClose:function(){e.handleClose(),M()},children:[Object(L.jsxs)(on.a,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[e.title,Object(L.jsx)(ti.a,{disablePortal:!0,id:"combo-box-demo",onChange:function(e,t){var n,r,a,i,c,o;f({error:h.error,value:null!==(n=null===t||void 0===t?void 0:t.task_name)&&void 0!==n?n:""}),m({error:x.error,value:null!==(r=null===t||void 0===t||null===(a=t.estimated_time)||void 0===a?void 0:a.toString())&&void 0!==r?r:""}),_({error:k.error,value:null!==(i=null===t||void 0===t||null===(c=t.time_unit_id)||void 0===c?void 0:c.toString())&&void 0!==i?i:""}),u({error:s.error,value:null!==(o=null===t||void 0===t?void 0:t.default_assigned_to)&&void 0!==o?o:""})},options:c,getOptionLabel:function(e){return e.task_name},sx:{width:300},renderInput:function(e){return Object(L.jsx)(ln.a,Object(p.a)(Object(p.a)({},e),{},{label:"Autofill Template"}))}})]}),Object(L.jsx)(an.a,{style:{padding:"1rem"},children:Object(L.jsx)(mn.b,{dateAdapter:xn.a,locale:yn.a,children:Object(L.jsxs)(cc,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Assigned to: \xa0\xa0"}),Object(L.jsx)(sn.a,{sx:{minWidth:160},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:"assigned-label",children:"Assigned"}),Object(L.jsx)(un.a,{labelId:"client-label",id:"client-select",value:s.value,error:s.error,label:"Client",onChange:function(e){return u({error:s.error,value:e.target.value})},children:n.map((function(e){return Object(L.jsx)(bn.a,{value:e.user_code,children:e.description},e.user_code)}))})]})}),Object(L.jsx)(V.a,{variant:"h6",children:"Task name: \xa0\xa0"}),Object(L.jsx)(ln.a,{label:"Task Name",value:h.value,type:"text",error:h.error,onChange:function(e){f({error:h.error,value:e.target.value})}}),Object(L.jsx)(V.a,{variant:"h6",children:"Estimated time: \xa0\xa0"}),Object(L.jsx)(ln.a,{type:"number",label:"Estimated Time",value:x.value,error:x.error,onChange:function(e){m({error:x.error,value:Math.abs(Number(e.target.value)).toString()})}}),Object(L.jsx)(V.a,{variant:"h6",children:"Time unit: \xa0\xa0"}),Object(L.jsx)(sn.a,{sx:{minWidth:160},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:"assigned-label",children:"Time Unit"}),Object(L.jsx)(un.a,{labelId:"time-unit-label",id:"time-unit-select",value:k.value,error:k.error,label:"Time unit",onChange:function(e){return _({error:k.error,value:e.target.value})},children:null===r||void 0===r?void 0:r.map((function(e){return Object(L.jsx)(bn.a,{value:e.id,children:e.description},e.id)}))})]})}),Object(L.jsx)(V.a,{variant:"h6",children:"Planned start date: \xa0\xa0"}),Object(L.jsx)(gn.a,{label:"Planned Start",openTo:"month",views:["year","month","day"],value:S.value,onChange:function(e){T({value:e,error:S.error})},renderInput:function(e){return Object(L.jsx)(ln.a,Object(p.a)({},e))}}),Object(L.jsx)(V.a,{variant:"h6",children:"Planned end date: \xa0\xa0"}),Object(L.jsx)(gn.a,{label:"Planned End",openTo:"month",views:["year","month","day"],value:I.value,onChange:function(e){P({value:e,error:I.error})},renderInput:function(e){return Object(L.jsx)(ln.a,Object(p.a)({},e))}})]})})}),Object(L.jsxs)(rn.a,{children:[Object(L.jsx)(tn.a,{onClick:function(){e.handleClose(),M()},children:"Cancel"}),Object(L.jsx)(tn.a,{onClick:function(){if(function(){var e=!0;return h.value.length<1&&(f({value:h.value,error:!0}),e=!1),(x.value.length<1||Number.isNaN(x.value))&&(m({value:x.value,error:!0}),e=!1),(k.value.length<1||Number.isNaN(k.value))&&(_({value:k.value,error:!0}),e=!1),e}()){var t,n,r={children:[],id:-1,estimated_time:Number(x.value),task_name:h.value,time_unit_id:Number(k.value),planned_start_date:null===(t=S.value)||void 0===t?void 0:t.getTime(),planned_end_date:null===(n=I.value)||void 0===n?void 0:n.getTime(),assigned_to_user_code:s.value,sort_order:1};i(r),e.handleClose(),M()}},children:"Add"})]})]})}var lc=n(436),sc=Object(F.a)("div")((function(e){return{display:"flex",flexDirection:"column",alignItems:"flex-start",margin:e.theme.spacing(1),justifyContent:"flexs-start",flex:"1"}}));function uc(e){var t=Object(B.a)();return Object(L.jsxs)(sc,{children:[e.isInput&&Object(L.jsx)(mn.b,{dateAdapter:xn.a,locale:yn.a,children:Object(L.jsx)(gn.a,{disabled:!e.editable,label:e.label,openTo:e.openTo,disablePast:e.disablePast,views:["year","month","day"],value:e.value?new Date(e.value):null,shouldDisableDate:e.shouldDisableDate,onChange:function(t){return e.update(null===t||void 0===t?void 0:t.getTime())},renderInput:function(e){return Object(L.jsx)(ln.a,Object(p.a)({},e))}})}),!e.isInput&&Object(L.jsxs)(sc,{style:{cursor:"pointer",userSelect:"none"},children:[Object(L.jsx)(V.a,{variant:"caption",style:{cursor:"pointer",userSelect:"none"},children:e.label}),Object(L.jsx)(V.a,{variant:"body1",style:{cursor:"pointer",userSelect:"none"},children:e.value?It(new Date(e.value)):"N/A"}),e.reschedule&&void 0===e.reschedule.is_confirmed&&Object(L.jsxs)(ie.a,{style:{backgroundColor:"light"===t.palette.mode?ke.a[100]:t.palette.grey[900],padding:"5px"},elevation:0,children:[Object(L.jsx)(V.a,{variant:"body1",style:{cursor:"pointer",userSelect:"none"},children:"Reschedule?"}),Object(L.jsxs)(V.a,{variant:"body2",style:{cursor:"pointer",userSelect:"none",color:Se.a[600]},children:[Object(L.jsx)("span",{style:{color:t.palette.text.primary},children:"By: "}),e.reschedule.requested_by]}),Object(L.jsxs)(V.a,{variant:"body2",style:{cursor:"pointer",userSelect:"none",color:lc.a[700]},children:[Object(L.jsxs)("span",{style:{color:t.palette.text.primary},children:["Till:"," "]}),It(new Date(e.reschedule.requested_date))]}),Object(L.jsx)(tn.a,{color:"success",onClick:function(){e.acceptReschedule&&e.acceptReschedule()},children:"Accept"}),Object(L.jsx)(tn.a,{color:"error",onClick:function(){e.declineReschedule&&e.declineReschedule()},children:"Decline"})]})]})]})}var dc=Object(F.a)("div")((function(e){var t=e.theme,n=e.indent;return{display:"flex",flexDirection:"row",width:"100%",paddingLeft:t.spacing(2*n)}})),jc=Object(F.a)("div")((function(e){var t=e.theme;return{width:"1rem",height:"1rem",background:e.selected?we.a[800]:ce.a[700],borderRadius:"3rem",margin:t.spacing(.5),cursor:"pointer",alignSelf:"center",justifySelf:"center"}})),bc=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column",width:"100%"}})),pc=Object(F.a)("div")((function(e){return{display:"flex",flexDirection:"row",paddingRight:e.theme.spacing(4)}})),hc=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column",alignItems:"flex-end"}}));function fc(e){var t,n,r,i,c,o,l,s,u,d,j,p,h,f=Object(a.useContext)(ac),v=f.updateTask,O=f.timeUnits,x=f.users,m=f.sortOrder,g=f.selectedProjectTask,y=f.taskTree,k=f.canDeleteTask,_=f.setSelectedProjectTaskCb,w=f.deleteTask,C=f.canOrderUp,S=f.canOrderDown,T=f.acceptRescheduleStart,D=f.declineRescheduleStart,N=f.acceptRescheduleEnd,I=f.declineRescheduleEnd,P=f.getAvailablePredecessors,A=Object(a.useState)(e.task.task_name),E=Object(b.a)(A,2),M=E[0],W=E[1],R=Object(a.useState)(!1),F=Object(b.a)(R,2),B=F[0],q=F[1],z=Object(a.useState)(e.task.assigned_to_user_code),H=Object(b.a)(z,2),U=H[0],G=H[1],Y=Object(a.useState)(e.task.estimated_time),V=Object(b.a)(Y,2),K=V[0],Q=V[1],$=Object(a.useState)(!1),Z=Object(b.a)($,2),ee=Z[0],te=Z[1],ne=Object(a.useState)(e.task.time_unit_id),re=Object(b.a)(ne,2),ae=re[0],ie=re[1],ce=Object(a.useState)(!1),oe=Object(b.a)(ce,2),le=oe[0],se=oe[1],ue=Object(a.useState)(e.task.planned_start_date),de=Object(b.a)(ue,2),je=de[0],be=de[1],pe=Object(a.useState)(e.task.planned_start_date),he=Object(b.a)(pe,2),fe=he[0],ve=he[1],Oe=Object(a.useState)(e.task.predecessor),xe=Object(b.a)(Oe,2),me=xe[0],ge=xe[1],ye=Object(a.useState)(!1),ke=Object(b.a)(ye,2),_e=ke[0],we=ke[1],Ce=Object(a.useState)(wa.None),Se=Object(b.a)(Ce,2),Te=Se[0],De=Se[1];Object(a.useEffect)((function(){W(e.task.task_name),G(e.task.assigned_to_user_code),Q(e.task.estimated_time),ie(e.task.time_unit_id),be(e.task.planned_start_date),ve(e.task.planned_end_date)}),[y]);var Ne=function(){var e=!0;return M.length<1&&(q(!0),e=!1),Number.isNaN(ae)&&(se(!0),e=!1),Number.isNaN(K)&&(te(!0),e=!1),e};function Ie(){return!e.task.actual_start_date||!e.task.actual_end_date}return Object(L.jsxs)(bc,{children:[Object(L.jsxs)(hc,{children:[Object(L.jsxs)(dc,{indent:e.indent,children:[!e.isRoot&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(J.a,{disabled:Gt(e.task,e.parent)||!S(e.task,e.parent),onClick:function(){m(e.task.sort_order,e.task.sort_order+1,e.parent)},children:Object(L.jsx)(Ba.a,{})}),Object(L.jsx)(J.a,{disabled:Ut(e.task,e.parent)||!C(e.task,e.parent),onClick:function(){m(e.task.sort_order,e.task.sort_order-1,e.parent)},children:Object(L.jsx)(za.a,{})})]}),e.isRoot&&Object(L.jsx)(jc,{selected:e.task.id===(null===g||void 0===g?void 0:g.id)&&e.task.fake_id===g.fake_id,onClick:function(){return _(e.task)}}),Object(L.jsx)(Ya,{variant:"outlined",maxLength:40,value:M,update:function(e){W(e)},error:B,editable:Ie(),label:"Task Name",type:Kt.Text,isInput:_e,initialValue:M}),Object(L.jsx)(Ya,{variant:"outlined",maxLength:40,value:null!==U&&void 0!==U?U:"",update:function(t){e.task.children.length>0&&e.task.children.forEach((function(e){e.assigned_to_user_code=t})),e.parent.parent&&(e.parent.assigned_to_user_code=void 0),G(t)},isInput:_e,error:!1,editable:Ie()&&(null===e.task.actual_start_date||void 0===e.task.actual_start_date),label:"Assigned To",type:Kt.Dropdown,initialValue:U,values:null!==(t=null===x||void 0===x?void 0:x.map((function(e){var t;return{id:e.user_code,description:null!==(t=e.description)&&void 0!==t?t:""}})))&&void 0!==t?t:[]}),Object(L.jsx)(Ya,{variant:"outlined",maxLength:40,error:ee,value:K.toString(),update:function(e){Q(Math.abs(Number(e))),De(wa.ChangeTime),console.log("PLANNED END FOM ESTIMATED TIME",fe)},isInput:_e,editable:Ie()&&0===e.task.children.length,label:"Estimated Time",type:Kt.Number,initialValue:K.toString()}),Object(L.jsx)(Ya,{variant:"outlined",error:le,maxLength:40,value:ae.toString(),update:function(e){ie(Number(e)),console.log("PLANNED END beforeeee",fe),De(wa.ChangeTime),console.log("PLANNED ENdaftereererer",fe)},isInput:_e,editable:Ie()&&0===e.task.children.length,label:"Time Unit",type:Kt.Dropdown,initialValue:ae.toString(),values:null!==(n=null===O||void 0===O?void 0:O.map((function(e){return{id:e.id.toString(),description:e.description}})))&&void 0!==n?n:[]}),Object(L.jsx)(Ya,{variant:"outlined",error:!1,maxLength:60,value:null!==(r=null===me||void 0===me?void 0:me.fake_id)&&void 0!==r?r:null===me||void 0===me||null===(i=me.id)||void 0===i?void 0:i.toString(),update:function(t){var n;"-100"!==t?(n=t.includes("-")?P(e.task,e.parent).find((function(e){return e.fake_id===t})):P(e.task,e.parent).find((function(e){return e.id.toString()===t})),ge(n)):ge(void 0)},isInput:_e,editable:Ie()&&0===e.task.children.length&&P(e.task,e.parent).length>0,label:"Predecessor",type:Kt.Dropdown,initialValue:null!==(c=null===me||void 0===me?void 0:me.fake_id)&&void 0!==c?c:null===me||void 0===me||null===(o=me.id)||void 0===o?void 0:o.toString(),values:null!==(l=P(e.task,e.parent).map((function(e){var t;return{id:null!==(t=e.fake_id)&&void 0!==t?t:e.id.toString(),description:e.task_name}})))&&void 0!==l?l:[]}),Object(L.jsx)(uc,{variant:"outlined",value:je,update:function(e){be(e),De(wa.ChangeStart)},editable:Ie()&&0===e.task.children.length&&(null===e.task.actual_start_date||void 0===e.task.actual_start_date),disablePast:!0,label:"Planned Start",openTo:"day",shouldDisableDate:function(){return!1},isInput:_e,reschedule:null===(s=e.task.reschedule)||void 0===s?void 0:s.start_request,acceptReschedule:void 0!==(null===(u=e.task.reschedule)||void 0===u?void 0:u.start_request)?function(){return T(e.task,e.parent,e.task.reschedule.start_request)}:void 0,declineReschedule:void 0!==(null===(d=e.task.reschedule)||void 0===d?void 0:d.start_request)?function(){return D(e.task.reschedule.start_request)}:void 0}),Object(L.jsx)(uc,{variant:"outlined",disablePast:!0,value:fe,isInput:_e,update:function(e){ve(e),De(wa.ChangeEnd)},editable:Ie()&&0===e.task.children.length,shouldDisableDate:function(){return!1},label:"Planned End",openTo:"day",reschedule:null===(j=e.task.reschedule)||void 0===j?void 0:j.end_request,acceptReschedule:void 0!==(null===(p=e.task.reschedule)||void 0===p?void 0:p.end_request)?function(){return N(e.task,e.parent,e.task.reschedule.end_request)}:void 0,declineReschedule:void 0!==(null===(h=e.task.reschedule)||void 0===h?void 0:h.end_request)?function(){return I(e.task.reschedule.end_request)}:void 0}),Object(L.jsx)(J.a,{onClick:function(){return w(e.task,e.parent)},disabled:!k(e.task),children:Object(L.jsx)(Ua.a,{color:k(e.task)?"error":"disabled"})}),Object(L.jsx)(J.a,{onClick:function(){return we(!0)},children:Object(L.jsx)(Xa.a,{color:"info"})})]}),_e&&Object(L.jsxs)(pc,{children:[Object(L.jsx)(J.a,{onClick:function(){return console.log("PLANNED END FOM SUBMIT",fe),void(Ne()&&(e.task.task_name=M,e.task.assigned_to_user_code=U,e.task.estimated_time=K,e.task.time_unit_id=ae,e.task.planned_start_date=je,e.task.planned_end_date=fe,e.task.predecessor=me,v(e.task,e.parent,Te),we(!1),De(wa.None)))},children:Object(L.jsx)(Xr.a,{color:"success"})}),Object(L.jsx)(J.a,{color:"error",onClick:function(){return W(e.task.task_name),q(!1),G(e.task.assigned_to_user_code),Q(e.task.estimated_time),te(!1),ie(e.task.time_unit_id),se(!1),be(e.task.planned_start_date),ve(e.task.planned_end_date),we(!1),void De(wa.None)},children:Object(L.jsx)(Kr.a,{})})]})]}),Object(L.jsx)(X.a,{orientation:"horizontal"}),e.task.children.map((function(t){var n;return Object(L.jsx)(fc,{isRoot:!1,indent:e.indent+1,task:t,parent:e.task},null!==(n=t.fake_id)&&void 0!==n?n:t.id)}))]})}var vc=n(258),Oc=n.n(vc),xc=Object(F.a)("div")((function(e){var t=e.theme,n=e.loaded;return{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:n?"flex-start":"center",alignItems:n?"flex-start":"center",overflowY:"scroll",backgroundColor:"light"===t.palette.mode?ce.a[100]:t.palette.background.default,paddingTop:t.spacing(1),paddingBottom:t.spacing(1)}}));function mc(){var e,t,n,r,i=Object(a.useContext)(ac),c=i.taskTree,o=i.saveDraft,l=i.project,s=i.startProject,u=i.isProjectReadyToStart,p=Object(a.useState)(!1),h=Object(b.a)(p,2),f=h[0],v=h[1],O=Object(a.useState)(!1),x=Object(b.a)(O,2),m=x[0],g=x[1];return Object(L.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[Object(L.jsx)(J.a,{onClick:function(){return v(!0)},style:{alignSelf:"flex-end"},children:Object(L.jsx)(Ma.a,{})}),Object(L.jsxs)(xc,{loaded:null!==(null===c||void 0===c?void 0:c.children)&&0!==(null===c||void 0===c||null===(e=c.children)||void 0===e?void 0:e.length),children:[!c||!c.children||(null===c||void 0===c?void 0:c.children)&&0===(null===c||void 0===c||null===(t=c.children)||void 0===t?void 0:t.length)&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("img",{src:St}),Object(L.jsx)(V.a,{children:"You currently have no taskTree."})]}),(null===c||void 0===c?void 0:c.children)&&(null===c||void 0===c||null===(n=c.children)||void 0===n?void 0:n.length)>0&&Object(L.jsx)(L.Fragment,{children:null===c||void 0===c||null===(r=c.children)||void 0===r?void 0:r.map((function(e){var t;return Object(L.jsx)(fc,{indent:0,isRoot:!0,task:e,parent:c},null!==(t=e.fake_id)&&void 0!==t?t:e.id)}))})]}),Object(L.jsxs)("div",{style:{padding:"0.5rem",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},children:[Object(L.jsx)(tn.a,{endIcon:Object(L.jsx)(Ra.a,{}),variant:"contained",color:"error",onClick:function(){return window.location.reload()},style:{marginRight:"2rem"},children:"Reset Changes"}),1===(null===l||void 0===l?void 0:l.is_draft)&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(tn.a,{endIcon:Object(L.jsx)(Oc.a,{}),variant:"contained",color:"warning",onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),style:{marginRight:"2rem"},children:"Save Draft"}),Object(L.jsx)(tn.a,{endIcon:Object(L.jsx)(At.a,{}),variant:"contained",color:"success",disabled:!u(),onClick:function(){return g(!0)},children:"Start Project"})]}),1!=(null===l||void 0===l?void 0:l.is_draft)&&Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(tn.a,{endIcon:Object(L.jsx)(At.a,{}),variant:"contained",color:"success",disabled:!u(),onClick:function(){return g(!0)},children:"Submit Changes"})})]}),Object(L.jsx)(oc,{open:f,handleClose:function(){return v(!1)},title:"New Task"}),Object(L.jsx)(fr,{isOpen:m,title:1===(null===l||void 0===l?void 0:l.is_draft)?"Start Project?":"Submit changes?",content:1===(null===l||void 0===l?void 0:l.is_draft)?"Are you sure you want to start the project?":"Are you sure you want to submit the changes?",dismiss:function(){return g(!1)},positive:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),negativeText:"Cancel",positiveText:1===(null===l||void 0===l?void 0:l.is_draft)?"Start":"Submit"})]})}var gc=n(259),yc=n.n(gc),kc=Object(F.a)("div")((function(e){e.theme;var t=e.empty;return{height:"100%",display:t?"flex":void 0,flexDirection:t?"column":void 0,alignItems:t?"center":void 0,justifyContent:t?"center":void 0}})),_c=Object(F.a)("div")((function(e){var t=e.theme;return{height:"90%",backgroundColor:"light"===t.palette.mode?ce.a[100]:t.palette.grey[900]}}));function wc(){var e,t=Object(a.useContext)(ac),n=t.template,r=t.pickTemplate;Object(a.useEffect)((function(){var e;s(i(null!==(e=null===n||void 0===n?void 0:n.children)&&void 0!==e?e:[]))}),[n]);var i=function e(t){return t.map((function(t){var n;return{title:t.task_name,children:e(null!==(n=t.children)&&void 0!==n?n:[])}}))},c=Object(a.useState)(i(null!==(e=null===n||void 0===n?void 0:n.children)&&void 0!==e?e:[])),o=Object(b.a)(c,2),l=o[0],s=o[1];return Object(L.jsxs)(kc,{empty:0===l.length,children:[0===l.length&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("img",{src:St}),Object(L.jsx)(V.a,{variant:"h6",children:"This template is empty"})]}),l.length>0&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(_c,{children:Object(L.jsx)(Ci.a,{style:{color:"black"},canDrag:function(){return!1},canDrop:function(){return!1},onChange:function(e){s(e)},treeData:l})}),Object(L.jsx)("div",{style:{height:"10%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:Object(L.jsx)(tn.a,{endIcon:Object(L.jsx)(yc.a,{}),variant:"contained",color:"success",onClick:r,children:"Select this template"})})]})]})}var Cc=Object(F.a)("div")((function(e){var t=e.theme;return{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:t.spacing(1),marginBottom:t.spacing(1)}})),Sc=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"}})),Tc=Object(F.a)(ie.a)((function(e){var t=e.theme;return{flex:"4",display:"flex",flexDirection:"column",backgroundColor:"light"===t.palette.mode?ce.a[300]:t.palette.background.paper,height:"100%",overflow:"hidden"}}));function Dc(){var e,t,n,r,i,c,o,l,s=Object(a.useContext)(ac),u=s.isLoading,b=s.error,p=s.minifiedTemplates,h=s.project,f=s.users,v=s.showingTemplate,O=s.selectTemplate,x=s.resetTempSelection,m=s.setSelectedTemplateId,g=s.selectedTemplateId;return Object(L.jsxs)(Sr,{isDataLoaded:!u&&!b&&null!==p&&null!==f,children:[b&&Object(L.jsx)(Ze,{text:b}),u&&Object(L.jsx)(nt,{text:"Loading.."}),!u&&!b&&null!==p&&null!==f&&Object(L.jsxs)(Sc,{children:[Object(L.jsxs)(Cc,{children:[Object(L.jsx)(li,{title:"Client",value:null!==(e=null===h||void 0===h||null===(t=h.client)||void 0===t?void 0:t.description)&&void 0!==e?e:"",lightColor:we.a[100],darkColor:we.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Project Owner",value:null!==(n=null===h||void 0===h||null===(r=h.user)||void 0===r?void 0:r.description)&&void 0!==n?n:"",lightColor:ye.a[100],darkColor:ye.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Price",value:Nt(null!==(i=null===h||void 0===h?void 0:h.total_price)&&void 0!==i?i:0,null!==(c=null===h||void 0===h?void 0:h.currency_code)&&void 0!==c?c:"USD"),lightColor:ke.a[100],darkColor:ke.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Paid",value:Nt(null!==(o=null===h||void 0===h?void 0:h.paid_amount)&&void 0!==o?o:0,null!==(l=null===h||void 0===h?void 0:h.currency_code)&&void 0!==l?l:"USD"),lightColor:ge.a[100],darkColor:ge.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Delivery Date",value:(null===h||void 0===h?void 0:h.estimated_delivery)?It(new Date(h.estimated_delivery)):"N/A",lightColor:Ce.a[100],darkColor:Ce.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Template: \xa0\xa0"}),Object(L.jsx)(q.a,{sx:{minWidth:160},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:"template-label",children:"Template"}),Object(L.jsx)(un.a,{labelId:"template-label",id:"template-select",value:g,label:"Template",onChange:function(e){return m(e.target.value)},children:p.map((function(e){return Object(L.jsx)(bn.a,{value:e.id,children:e.task_name},e.id)}))})]})})]}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(tn.a,{color:"warning",onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Select"}),g&&Object(L.jsx)(tn.a,{color:"error",onClick:x,children:"Reset"})]})]}),Object(L.jsxs)(Tc,{children:[!v&&Object(L.jsx)(mc,{}),v&&Object(L.jsx)(wc,{})]})]})]})}var Nc=function(e){return D+"/api/project/".concat(e,"/payment/new")},Ic=Object(a.createContext)(null);function Pc(e){var t=Object(s.i)().id,n=Object(a.useContext)(A).user;Object(a.useEffect)((function(){N(!0),C(function(e){return D+"/api/project/".concat(e,"/payment/all")}(t),r.Get,null,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!0).then((function(e){_(void 0),m(e.payments),M(e.currencies),B(e.project_currency_code),U(e.client_currency_code),f(e.paid),l(e.price),N(!1)})).catch((function(e){_(e.message),N(!1)}))}),[]);var i=Object(a.useState)(0),c=Object(b.a)(i,2),o=c[0],l=c[1],u=Object(a.useState)(0),p=Object(b.a)(u,2),h=p[0],f=p[1],v=Object(a.useState)([]),O=Object(b.a)(v,2),x=O[0],m=O[1],g=Object(a.useState)(void 0),y=Object(b.a)(g,2),k=y[0],_=y[1],w=Object(a.useState)(!1),S=Object(b.a)(w,2),T=S[0],N=S[1],I=Object(a.useState)([]),P=Object(b.a)(I,2),E=P[0],M=P[1],W=Object(a.useState)(void 0),R=Object(b.a)(W,2),F=R[0],B=R[1],q=Object(a.useState)(void 0),z=Object(b.a)(q,2),H=z[0],U=z[1],G=function(){var e=Object(j.a)(d.a.mark((function e(a,i,c){var o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),o={collection_date:i,payment_amount:a,currency_code:c},e.next=5,C(Nc(t),r.Post,o,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!0);case 5:s=e.sent,_(void 0),m(s.payments),M(s.currencies),B(s.project_currency_code),U(s.client_currency_code),f(s.paid),l(s.price),N(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),_(e.t0.message),N(!1);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Y={payments:x,error:k,isLoading:T,currencies:E,projectCurrency:F,clientCurrency:H,paid:h,price:o,newProjectPayment:G};return Object(L.jsx)(Ic.Provider,{value:Y,children:e.children})}var Lc=n(260),Ac=n.n(Lc),Ec=Object(F.a)(ie.a)((function(e){var t=e.theme;return{display:"flex",flexDirection:"column",margin:t.spacing(2),padding:t.spacing(2),height:"450px"}}));function Mc(){var e=Object(a.useContext)(Ic),t=e.currencies,n=e.projectCurrency,r=e.newProjectPayment,i=e.price,c=e.paid,o=Object(a.useState)(),l=Object(b.a)(o,2),s=l[0],u=l[1],h=Object(a.useState)(!1),f=Object(b.a)(h,2),v=f[0],O=f[1],x=Object(a.useState)(new Date),m=Object(b.a)(x,2),g=m[0],y=m[1],k=Object(a.useState)(!1),_=Object(b.a)(k,2),w=_[0],C=_[1],S=Object(a.useState)(n),T=Object(b.a)(S,2),D=T[0],N=T[1],I=Object(a.useState)(!1),P=Object(b.a)(I,2),A=P[0],E=P[1];function M(){var e=!0;return!s||s<=0||s>i-c?(O(!0),e=!1):O(!1),g?C(!1):(C(!0),e=!1),D?E(!1):(E(!0),e=!1),e}function W(){return R.apply(this,arguments)}function R(){return(R=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M()){e.next=3;break}return e.next=3,r(s,g.getTime(),D);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(L.jsxs)(Ec,{children:[Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h5",children:"New Payment"}),Object(L.jsx)(ln.a,{style:{margin:"1rem"},type:"number",error:v,label:"Amount",value:s,onChange:function(e){Number.isNaN(e.target.value)||u(Number(e.target.value))},required:!0}),Object(L.jsx)(mn.b,{dateAdapter:xn.a,locale:yn.a,children:Object(L.jsx)(gn.a,{label:"Collection Date",openTo:"day",views:["year","month","day"],value:g,onChange:function(e){e&&y(e)},renderInput:function(e){return Object(L.jsx)(ln.a,Object(p.a)({style:{margin:"1rem"},error:w},e))}})}),Object(L.jsx)(q.a,{style:{margin:"1rem"},sx:{minWidth:200},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{children:"Currency"}),Object(L.jsx)(un.a,{fullWidth:!0,error:A,value:D,label:"Currency",onChange:function(e){return N(e.target.value)},children:t.map((function(e){return Object(L.jsx)(bn.a,{value:e.currency_code,children:e.currency_description},e.currency_code)}))})]})}),Object(L.jsx)(tn.a,{style:{height:"60px",margin:"1rem"},color:"success",variant:"contained",endIcon:Object(L.jsx)(Ac.a,{}),onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Submit Payment"})]})}var Wc=Object(F.a)("div")((function(e){var t=e.theme;return{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:t.spacing(1),marginBottom:t.spacing(1)}})),Rc=Object(F.a)("div")((function(e){e.theme;return{display:"grid",gridTemplateColumns:"3fr 1fr",height:"100%"}}));function Fc(){var e=Object(a.useContext)(Ic),t=e.payments,n=e.isLoading,r=e.error,i=e.paid,c=e.price,o=e.projectCurrency,l=e.clientCurrency;return Object(L.jsxs)(Sr,{isDataLoaded:!n&&!r,children:[n&&Object(L.jsx)(nt,{text:"Loading Schema.."}),r&&Object(L.jsx)(Ze,{text:null!==r&&void 0!==r?r:"Something went wrong"}),!n&&!r&&o&&Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[Object(L.jsxs)(Wc,{children:[Object(L.jsx)(li,{title:"Price",value:Nt(c,o),lightColor:we.a[100],darkColor:we.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Paid",value:Nt(i,o),lightColor:ye.a[100],darkColor:ye.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Amount Due",value:Nt(c-i,o),lightColor:Ce.a[100],darkColor:Ce.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Project Currency",value:o,lightColor:ke.a[100],darkColor:ke.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Client Currency",value:l,lightColor:ge.a[100],darkColor:ge.a[800]})]}),Object(L.jsxs)(Rc,{children:[Object(L.jsx)(wt,{table:{heads:["Amount","Currency","Collection Date","Down Payment"],rows:t.map((function(e){return{id:e.id,cells:[e.payment_amount,e.currency,It(new Date(e.collection_date)),e.is_down_payment?"down":""]}}))},onRowClick:function(){},cursor:"default"}),Object(L.jsx)(Mc,{})]})]})]})}var Bc=Object(a.createContext)(null);function qc(e){var t=e.children,n=Object(a.useContext)(A).user,i=Object(a.useState)([]),c=Object(b.a)(i,2),o=c[0],l=c[1],s=Object(a.useState)(null),u=Object(b.a)(s,2),p=u[0],h=u[1],f=Object(a.useState)(!1),v=Object(b.a)(f,2),O=v[0],x=v[1],m=Object(a.useState)(null),g=Object(b.a)(m,2),y=g[0],k=g[1];Object(a.useEffect)((function(){x(!0),C("http://87.98.220.129:1515/api/currency/all",r.Get,null,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!0).then((function(e){l(e),h(null),x(!1)})).catch((function(e){h(e.message),x(!1)}))}),[]);var _=function(){var e=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),e.next=4,C("http://87.98.220.129:1515/api/currency/new",r.Post,t,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!0);case 4:(a=e.sent)&&l(a),x(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),h(e.t0.message),x(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(j.a)(d.a.mark((function e(t,a){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),e.next=4,C(D+"/api/currency/".concat(t),r.Patch,{ratio:a},{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!0);case 4:(i=e.sent)&&l(i),x(!1),k(null),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),h(e.t0.message),x(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),S={isLoading:O,error:p,currencies:o,selectedCurrency:y,updateCurrency:w,newCurrency:_,setSelectedCurrencyCb:function(e){k(e===y?null:e)}};return Object(L.jsx)(Bc.Provider,{value:S,children:t})}var zc=Object(F.a)(ie.a)((function(e){return{display:"flex",flexDirection:"column",padding:e.theme.spacing(1)}})),Hc=Object(F.a)(ln.a)((function(e){return{margin:e.theme.spacing(2)}})),Uc=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}}));function Gc(){var e,t,n=Object(a.useContext)(Bc),r=n.currencies,i=n.newCurrency,c=n.selectedCurrency,o=n.updateCurrency,l=Object(a.useState)(null),s=Object(b.a)(l,2),u=s[0],p=s[1],h=Object(a.useState)(!1),f=Object(b.a)(h,2),v=f[0],O=f[1],x=Object(a.useState)(null),m=Object(b.a)(x,2),g=m[0],y=m[1],k=Object(a.useState)(!1),_=Object(b.a)(k,2),w=_[0],C=_[1],S=Object(a.useState)(null),T=Object(b.a)(S,2),D=T[0],N=T[1],I=Object(a.useState)(!1),P=Object(b.a)(I,2),A=P[0],E=P[1],M=Object(a.useState)(0),W=Object(b.a)(M,2),R=W[0],F=W[1],B=Object(a.useState)(!1),q=Object(b.a)(B,2),z=q[0],H=q[1],U=Object(a.useState)(0),G=Object(b.a)(U,2),Y=G[0],X=G[1];Object(a.useEffect)((function(){c?(p(c.currency_code),y(c.description),N(c.symbol),J(c.ratio.toString())):(p(null),y(null),N(null),J("0"))}),[c]);var J=function(e){var t=Number(e);if(!Number.isNaN(t)){t<0&&(t*=-1),F(t);var n=1/t;X(Number.isFinite(n)?n:0)}},K=function(){return r.find((function(e){return e.is_main}))},Q=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$()){e.next=9;break}if(c){e.next=7;break}return t={currency_code:u,ratio:R,symbol:D,description:g},e.next=5,i(t);case 5:e.next=9;break;case 7:return e.next=9,o(c.currency_code,R);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function $(){var e=!0,t=r.map((function(e){return e.currency_code.toLocaleUpperCase()}));return c||(!u||u.length<1||t.includes(u.toLocaleUpperCase())?(O(!0),e=!1):O(!1),!g||g.length<1?(C(!0),e=!1):C(!1),!D||D.length<1?(E(!0),e=!1):E(!1)),R<=0?(H(!0),e=!1):H(!1),e}var Z={color:we.a[700],fontWeight:"bold"},ee={color:ge.a[700],fontWeight:"bold"};return Object(L.jsxs)(zc,{children:[Object(L.jsx)(V.a,{variant:"h5",gutterBottom:!0,children:c?"Update Currency":"New Currency"}),Object(L.jsx)(Hc,{type:"text",disabled:null!==c,label:"Currency Code",required:!0,value:null!==u&&void 0!==u?u:"",error:v,onChange:function(e){return function(e){p(e.toLocaleUpperCase()),r.map((function(e){return e.currency_code.toLocaleUpperCase()})).includes(e.toLocaleUpperCase())&&!c?O(!0):O(!1)}(e.target.value)}}),Object(L.jsx)(Hc,{type:"text",label:"Description",disabled:null!==c,required:!0,value:null!==g&&void 0!==g?g:"",error:w,onChange:function(e){return y(e.target.value)}}),Object(L.jsx)(Hc,{type:"text",label:"Symbol",disabled:null!==c,required:!0,value:null!==D&&void 0!==D?D:"",error:A,onChange:function(e){return N(e.target.value)}}),Object(L.jsx)(Tr,{orientation:"horizontal"}),Object(L.jsx)(V.a,{style:{marginTop:"1rem"},gutterBottom:!0,variant:"h5",children:"Rate"}),Object(L.jsxs)(Uc,{children:[Object(L.jsx)(V.a,{style:Z,gutterBottom:!0,variant:"h6",children:null===(e=K())||void 0===e?void 0:e.currency_code}),Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h6",style:ee,children:u&&0!==(null===u||void 0===u?void 0:u.length)?u:"\u2014\u2014\u2014"}),Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h6",children:"="}),Object(L.jsx)(Hc,{type:"number",label:"Ratio",required:!0,value:null===R||void 0===R?void 0:R.toString(),error:z,onChange:function(e){return J(e.target.value)}})]}),Object(L.jsxs)(Uc,{children:[Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h6",style:ee,children:u&&0!==(null===u||void 0===u?void 0:u.length)?u:"\u2014\u2014\u2014"}),Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h6",style:Z,children:null===(t=K())||void 0===t?void 0:t.currency_code}),Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h6",children:"="}),Object(L.jsx)(Hc,{type:"number",label:"Ratio",required:!0,value:null===Y||void 0===Y?void 0:Y.toString(),onChange:function(e){return function(e){var t=Number(e);if(!Number.isNaN(t)){t<0&&(t*=-1),X(t);var n=1/t;F(Number.isFinite(n)?n:0)}}(e.target.value)}})]}),Object(L.jsx)(tn.a,{style:{height:"60px",margin:"1rem"},color:"success",variant:"contained",endIcon:Object(L.jsx)(Xr.a,{}),onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:c?"Update":"Submit"})]})}function Yc(){var e,t=Object(a.useContext)(Bc),n=t.currencies,r=t.isLoading,i=t.error,c=t.setSelectedCurrencyCb,o=t.selectedCurrency;return Object(L.jsxs)(Sr,{isDataLoaded:!r&&!i,children:[r&&Object(L.jsx)(nt,{text:"Loading Schema.."}),i&&Object(L.jsx)(Ze,{text:null!==i&&void 0!==i?i:"Something went wrong"}),!r&&!i&&n.length>0&&Object(L.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"3fr 1fr",height:"100%",gap:"1rem"},children:[Object(L.jsx)(wt,{table:{heads:["Currency Code","Description","Symbol","Ratio","Main"],rows:n.map((function(e){return{id:e.currency_code,cells:[e.currency_code,e.description,e.symbol,e.ratio,e.is_main?"Main":""]}}))},selectedRowId:null!==(e=null===o||void 0===o?void 0:o.currency_code)&&void 0!==e?e:void 0,onRowClick:function(e){var t=n.find((function(t){return t.currency_code===e}));t&&!t.is_main&&c(t)},cursor:"pointer"}),Object(L.jsx)(Gc,{})]})]})}var Vc;!function(e){e[e.Client=0]="Client",e[e.User=1]="User"}(Vc||(Vc={}));var Xc=function(e){var t="";return t=e===Vc.Client?"client":"user",D+"/api/settings/".concat(t,"/criteria/new")},Jc=function(e,t){var n="";return n=t===Vc.Client?"client":"user",D+"/api/settings/".concat(n,"/criteria/").concat(e)},Kc=Object(a.createContext)(null);function Qc(e){var t=Object(a.useContext)(A).user,n=Object(a.useState)(null),i=Object(b.a)(n,2),c=i[0],o=i[1],l=Object(a.useState)(null),s=Object(b.a)(l,2),u=s[0],p=s[1],h=Object(a.useState)(null),f=Object(b.a)(h,2),v=f[0],O=f[1],x=Object(a.useState)(!1),m=Object(b.a)(x,2),g=m[0],y=m[1],k=Object(a.useState)(null),_=Object(b.a)(k,2),w=_[0],S=_[1],T=Object(a.useState)(null),D=Object(b.a)(T,2),N=D[0],I=D[1],P=Object(a.useState)(null),E=Object(b.a)(P,2),M=E[0],W=E[1],R=Object(a.useState)(null),F=Object(b.a)(R,2),B=F[0],q=F[1];Object(a.useEffect)((function(){y(!0),C("http://87.98.220.129:1515/api/settings/init",r.Get,null,{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.tokenStr)},"Something went wrong",!0).then((function(e){O(e.positions),o(e.payment_modes),p(e.payment_terms),I(e.positions_id),W(e.payment_modes_id),q(e.payment_terms_id),y(!1)})).catch((function(e){S(e.message),y(!1)}))}),[]);var z=function(){var e=Object(j.a)(d.a.mark((function e(n,a){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,C(Xc(a),r.Post,n,{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.tokenStr)},"Something went wrong",!0);case 4:i=e.sent,O(i.positions),o(i.payment_modes),p(i.payment_terms),I(i.positions_id),W(i.payment_modes_id),q(i.payment_terms_id),y(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),S(e.t0.message),y(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(j.a)(d.a.mark((function e(n,a){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,C(Jc(n,a),r.Delete,U,{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.tokenStr)},"Something went wrong",!0);case 4:i=e.sent,O(i.positions),o(i.payment_modes),p(i.payment_terms),I(i.positions_id),W(i.payment_modes_id),q(i.payment_terms_id),y(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),S(e.t0.message),y(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),U={paymentModes:c,paymentTerms:u,positions:v,isLoading:g,error:w,newCriteriaValue:z,deleteCriteriaValue:H,paymentModesId:M,paymentTermsId:B,positionsId:N};return Object(L.jsx)(Kc.Provider,{value:U,children:e.children})}var $c=n(261),Zc=n.n($c),eo=Object(F.a)("div")((function(){return{display:"flex",flexDirection:"column",overflowY:"hidden"}})),to=Object(F.a)(ie.a)((function(e){var t=e.theme;return{display:"flex",flexDirection:"row",alignItems:"center",marginRight:t.spacing(1),justifyContent:"space-around",marginTop:t.spacing(2),padding:t.spacing(2),backgroundColor:"light"==t.palette.mode?ye.a[100]:t.palette.background.paper,flex:1}}));function no(e){var t=Object(a.useContext)(Kc),n=t.newCriteriaValue,r=t.deleteCriteriaValue,i=Object(a.useState)(""),c=Object(b.a)(i,2),o=c[0],l=c[1],s=Object(a.useState)(!1),u=Object(b.a)(s,2),p=u[0],h=u[1],f=Object(a.useState)(!1),v=Object(b.a)(f,2),O=v[0],x=v[1],m=Object(a.useState)(null),g=Object(b.a)(m,2),y=g[0],k=g[1],_=function(){var t=Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w()){t.next=5;break}return t.next=3,n({criteria_id:e.criteriaId,description:o},e.type);case 3:l(""),h(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function w(){var e=!0;return o.length<1?(e=!1,h(!0)):h(!1),e}var C=function(){var t=Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!y){t.next=3;break}return t.next=3,r(y.criteria_value_id,e.type);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(L.jsxs)(eo,{children:[Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h5",children:e.title}),Object(L.jsx)("div",{style:{flex:"8",flexGrow:8,overflowY:"scroll"},children:Object(L.jsx)(wt,{table:{heads:["Description","Action"],rows:e.values.map((function(e){return{id:e.criteria_value_id,cells:[e.description,Object(L.jsx)(J.a,{onClick:function(){k(e),x(!0)},children:Object(L.jsx)(Zc.a,{style:{color:Ce.a[800]}})})]}}))},onRowClick:function(){},cursor:"default"})}),Object(L.jsxs)(to,{children:[Object(L.jsx)(V.a,{variant:"h5",children:"New Value:"}),Object(L.jsx)(ln.a,{label:"Description",value:o,onChange:function(e){return l(e.target.value)},error:p}),Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:Object(L.jsx)(Xr.a,{style:{color:we.a[800]}})})]}),Object(L.jsx)(fr,{negativeText:"Cancel",positiveText:"Delete",positive:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),title:"Delete ".concat(null===y||void 0===y?void 0:y.description,"?"),content:"Are you sure you want to delete ".concat(null===y||void 0===y?void 0:y.description,"?"),dismiss:function(){return x(!1)},isOpen:O})]})}var ro=Object(F.a)("div")((function(e){return{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",height:"100%",gap:e.theme.spacing(1),overflowY:"hidden"}}));function ao(){var e=Object(a.useContext)(Kc),t=e.isLoading,n=e.error,r=e.paymentModes,i=e.paymentTerms,c=e.positions,o=e.positionsId,l=e.paymentTermsId,s=e.paymentModesId;return Object(L.jsxs)(Sr,{isDataLoaded:!t&&!n,children:[t&&Object(L.jsx)(nt,{text:"Loading Schema.."}),n&&Object(L.jsx)(Ze,{text:null!==n&&void 0!==n?n:"Something went wrong"}),!t&&r&&i&&c&&Object(L.jsxs)(ro,{children:[Object(L.jsx)(no,{title:"Payment Modes",type:Vc.Client,values:r,criteriaId:s}),Object(L.jsx)(no,{title:"Payment Terms",type:Vc.Client,values:i,criteriaId:l}),Object(L.jsx)(no,{title:"Positions",type:Vc.User,values:c,criteriaId:o})]})]})}var io=n(262),co=n.n(io);Object(F.a)("div")((function(e){return{display:"grid",gridTemplateRows:"1fr 1fr",height:"100%",gap:e.theme.spacing(1)}}));function oo(){var e,t=Object(s.i)().id,n=Object(a.useContext)(A).user,i=Object(s.h)(),c=aa(function(e){return D+"/api/project/".concat(e,"/requests")}(t),r.Get,null,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)}),o=c.data,l=c.isLoading,u=c.error;return Object(L.jsxs)(Sr,{isDataLoaded:!l&&!u,children:[l&&Object(L.jsx)(nt,{text:"Loading Requests.."}),u&&Object(L.jsx)(Ze,{text:null!==u&&void 0!==u?u:"Something went wrong"}),!l&&o&&Object(L.jsx)(wt,{table:(e=function(){var e=[];if(null===o||void 0===o?void 0:o.start_requests){var t=o.start_requests.map((function(e){return e.type="start",e})).sort((function(e,t){return t.date_added-e.date_added}));e.push.apply(e,Object(Ge.a)(t))}if(null===o||void 0===o?void 0:o.end_requests){var n=o.end_requests.map((function(e){return e.type="end",e})).sort((function(e,t){return t.date_added-e.date_added}));e.push.apply(e,Object(Ge.a)(n))}return e}(),{heads:["Task Name","Requested By","Requested Date","Requested On","Date Added","Last Edited","Status","Actions"],rows:e.map((function(e){return{id:e.id,cells:[e.task_name,e.user_code,It(new Date(e.requested_date)),"start"===e.type?"Start Date":"End Date",It(new Date(e.date_added)),It(new Date(e.last_edited)),void 0===e.is_confirmed?Object(L.jsx)(Ni.a,{style:{color:ge.a[700]}}):!0===e.is_confirmed?Object(L.jsx)(Xr.a,{style:{color:we.a[700]}}):Object(L.jsx)(Kr.a,{style:{color:Ce.a[700]}}),Object(L.jsx)(J.a,{disabled:e.is_confirmed||!1===e.is_confirmed,onClick:function(){return i("/projects/".concat(e.project_id,"/tasks/edit?req=").concat(e.task_id,"&").concat(e.type,"=").concat(e.id))},children:Object(L.jsx)(co.a,{style:{color:e.is_confirmed||!1===e.is_confirmed?ce.a[500]:ye.a[700]}})})]}}))}),onRowClick:function(){},cursor:"default"})]})}var lo=function(e,t){return D+"/api/project/".concat(e,"/preview/").concat(t,"/start")},so=function(e,t){return D+"/api/project/".concat(e,"/preview/").concat(t,"/end")},uo=function(e,t){return D+"/api/project/".concat(e,"/preview/").concat(t,"/comment")},jo=function(e,t){return D+"/api/project/".concat(e,"/preview/").concat(t,"/progress")},bo=function(e,t){return D+"/api/project/".concat(e,"/preview/").concat(t,"/reschedule")},po=Object(a.createContext)(null);function ho(e){var t=Object(s.i)().id,n=Object(a.useContext)(A).user,i=Object(a.useState)(!1),c=Object(b.a)(i,2),o=c[0],l=c[1],u=Object(a.useState)(null),p=Object(b.a)(u,2),h=p[0],f=p[1],v=Object(a.useState)(null),O=Object(b.a)(v,2),x=O[0],m=O[1],g=Object(a.useState)(null),y=Object(b.a)(g,2),k=y[0],_=y[1],w=Object(a.useState)(),S=Object(b.a)(w,2),T=S[0],N=S[1],I=Object(a.useState)(null),P=Object(b.a)(I,2),E=P[0],M=P[1],W=Object(a.useState)(null),R=Object(b.a)(W,2),F=R[0],B=R[1];function q(e,t,n){return z.apply(this,arguments)}function z(){return(z=Object(j.a)(d.a.mark((function e(t,r,a){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,C(t,r,a,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!0);case 4:i=e.sent,f(null),m(i.time_units),_(i.task_status),N(i.client_description),M(i.project_title),B(i.tasks),l(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l(!1),f(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}Object(a.useEffect)((function(){var e;l(!0),C((e=t,D+"/api/project/".concat(e,"/preview")),r.Get,null,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!0).then((function(e){f(null),m(e.time_units),_(e.task_status),N(e.client_description),M(e.project_title),B(e.tasks),l(!1)})).catch((function(e){f(e.message),l(!1)}))}),[]);var H=function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(lo(t,n),r.Get,null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(so(t,n),r.Get,null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(d.a.mark((function e(n,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(uo(t,n),r.Post,{comment:a});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(j.a)(d.a.mark((function e(n,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(jo(t,n),r.Post,{progress:a});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(j.a)(d.a.mark((function e(n,a,i){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(bo(t,n),r.Post,{request_start:a,request_end:i});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),X={isLoading:o,error:h,timeUnits:x,taskStatus:k,taskTree:F,clientDescription:T,projectTitle:E,getPredecessor:function(e){var t,n=function e(t,n){n.push(t),t.children.forEach((function(t){return e(t,n)}))},r=[];return null===F||void 0===F||F.children.forEach((function(e){n(e,r)})),null!==(t=r.find((function(t){return t.id===e})))&&void 0!==t?t:null},startTask:H,endTask:U,updateComment:G,updateProgress:Y,rescheduleTask:V};return Object(L.jsx)(po.Provider,{value:X,children:e.children})}var fo=Object(F.a)("div")((function(e){return{display:"flex",flexDirection:"column",alignItems:"flex-start",margin:e.theme.spacing(1),justifyContent:"flexs-start",flex:"1"}}));function vo(e){return Object(L.jsxs)(fo,{style:{cursor:"pointer",userSelect:"none"},children:[Object(L.jsx)(V.a,{variant:"caption",style:{cursor:"pointer",userSelect:"none"},children:e.title}),Object(L.jsx)(V.a,{variant:"body1",style:{cursor:"pointer",userSelect:"none"},children:e.value})]})}var Oo=Object(F.a)("div")((function(e){var t=e.theme,n=e.indent;return{display:"flex",flexDirection:"row",width:"100%",paddingLeft:t.spacing(3*n)}})),xo=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column",width:"100%"}})),mo=Object(F.a)("div")((function(e){return{display:"flex",flexDirection:"row",paddingRight:e.theme.spacing(4),flex:1}})),go=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column",alignItems:"flex-end"}}));function yo(e){var t,n,r,i,c,o,l,s,u,p,h,f=Object(B.a)(),v=Object(a.useContext)(po),O=v.timeUnits,x=v.getPredecessor,m=v.taskStatus,g=v.startTask,y=v.endTask,k=v.updateProgress,_=v.updateComment,w=v.rescheduleTask,C=Object(a.useState)(!1),S=Object(b.a)(C,2),T=S[0],D=S[1],N=Object(a.useState)(!1),I=Object(b.a)(N,2),P=I[0],A=I[1],E=Object(a.useState)(!1),M=Object(b.a)(E,2),W=M[0],R=M[1];return 23===e.task.estimated_time&&console.log(e.task),Object(L.jsxs)(xo,{children:[Object(L.jsx)(go,{children:Object(L.jsxs)(Oo,{indent:e.indent,children:[Object(L.jsx)(vo,{value:null!==(t=e.task.task_code)&&void 0!==t?t:"N/A",title:"Task Code"}),Object(L.jsx)(vo,{value:e.task.task_name,title:"Task Name"}),Object(L.jsx)(vo,{value:null!==(n=e.task.assigned_to)&&void 0!==n?n:"N/A",title:"Assigned To"}),Object(L.jsx)(vo,{value:e.task.estimated_time.toString(),title:"Estimated Time"}),Object(L.jsx)(vo,{value:null!==(r=null===O||void 0===O||null===(i=O.find((function(t){return t.id===e.task.time_unit_id})))||void 0===i?void 0:i.description)&&void 0!==r?r:"",title:"Time Unit"}),Object(L.jsx)(vo,{value:e.task.predecessor_id&&null!==(c=null===(o=x(e.task.predecessor_id))||void 0===o?void 0:o.task_name)&&void 0!==c?c:"N/A",title:"Predecessor"}),Object(L.jsx)(vo,{value:It(new Date(e.task.planned_start_date)),title:"Planned Start"}),Object(L.jsx)(vo,{value:It(new Date(e.task.planned_end_date)),title:"Planned End"}),Object(L.jsx)(vo,{value:e.task.task_progress.toString()+"%",title:"Progress"}),Object(L.jsx)(mo,{children:e.task.is_owner&&0===e.task.children.length&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e.task.id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),disabled:!Yt(e.task,m)||!e.task.can_start||e.task.children.length>0,children:Object(L.jsx)(At.a,{style:{color:!Yt(e.task,m)||!e.task.can_start||e.task.children.length>0?In(f.palette.mode):we.a[700]}})}),Object(L.jsx)(J.a,{onClick:Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e.task.id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),disabled:Vt(e.task,m)||e.task.children.length>0,children:Object(L.jsx)(Mt.a,{style:{color:Vt(e.task,m)||e.task.children.length>0?In(f.palette.mode):Ce.a[700]}})}),Object(L.jsx)(J.a,{onClick:function(){R(!0)},disabled:!e.task.can_reschedule,children:Object(L.jsx)(Rt.a,{style:{color:e.task.can_reschedule?Te.a[800]:In(f.palette.mode)}})}),Object(L.jsx)(J.a,{onClick:function(){D(!0)},children:Object(L.jsx)(en.a,{style:{color:ge.a[700]}})}),Object(L.jsx)(J.a,{onClick:function(){A(!0)},disabled:!e.task.can_update_progress||100!=(null===(l=x(e.task.predecessor_id))||void 0===l?void 0:l.task_progress),children:Object(L.jsx)(Sn.a,{style:{color:e.task.can_update_progress?Se.a[800]:In(f.palette.mode)}})})]})})]})}),Object(L.jsx)(X.a,{orientation:"horizontal"}),e.task.children.map((function(t){return Object(L.jsx)(yo,{isRoot:!1,indent:e.indent+1,task:t,parent:e.task},t.id)})),Object(L.jsx)(vn,{isOpen:T,onClose:function(){return D(!1)},title:"Comment",comment:null!==(s=e.task.comment)&&void 0!==s?s:"",submit:function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D(!1),t.next=3,_(e.task.id,n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),Object(L.jsx)(On,{isOpen:P,onClose:function(){return A(!1)},title:"Progress",progress:null!==(u=e.task.task_progress)&&void 0!==u?u:0,submit:function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return A(!1),t.next=3,k(e.task.id,n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),Object(L.jsx)(kn,{isOpen:W,onClose:function(){return R(!1)},title:"Reschedule Task",start:null!==(p=e.task.planned_start_date)&&void 0!==p?p:(new Date).getTime(),end:null!==(h=e.task.planned_end_date)&&void 0!==h?h:(new Date).getTime(),submit:function(){var t=Object(j.a)(d.a.mark((function t(n,r){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return R(!1),t.next=3,w(e.task.id,n,r);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),isStartEditable:void 0===e.task.actual_start_date,isEndEditable:void 0===e.task.actual_end_date})]})}var ko=Object(F.a)("div")((function(e){var t=e.theme;return{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:t.spacing(1),marginBottom:t.spacing(1)}})),_o=Object(F.a)("div")((function(e){e.theme;return{display:"flex",height:"100%",flexDirection:"column",overflowY:"hidden"}})),wo=Object(F.a)(ie.a)((function(e){var t=e.theme;return{backgroundColor:"dark"===t.palette.mode?t.palette.background.default:ce.a[300],overflowY:"hidden",height:"100%",paddingBottom:t.spacing(12)}})),Co=Object(F.a)("div")((function(e){var t=e.theme;return{backgroundColor:"dark"===t.palette.mode?t.palette.background.paper:ce.a[200],overflowY:"scroll",height:"100%"}}));function So(){var e=Object(a.useContext)(po),t=e.taskTree,n=e.isLoading,r=e.error,i=(e.timeUnits,e.clientDescription),c=(e.taskStatus,e.projectTitle),o=Object(B.a)();return Object(L.jsxs)(Sr,{isDataLoaded:!n&&!r,children:[n&&Object(L.jsx)(nt,{text:"Loading Schema.."}),r&&Object(L.jsx)(Ze,{text:null!==r&&void 0!==r?r:"Something went wrong"}),!n&&t&&Object(L.jsxs)(_o,{children:[Object(L.jsxs)(ko,{children:[Object(L.jsx)(li,{title:"Project Title",value:null!==c&&void 0!==c?c:"",lightColor:we.a[100],darkColor:we.a[800]}),Object(L.jsx)(Dr,{flexItem:!0,orientation:"vertical"}),Object(L.jsx)(li,{title:"Client",value:null!==i&&void 0!==i?i:"",lightColor:_e.a[100],darkColor:_e.a[800]})]}),Object(L.jsxs)(wo,{children:[Object(L.jsx)(V.a,{style:{padding:o.spacing(2)},variant:"h5",children:"Project Overview"}),Object(L.jsx)(Co,{children:t.children.map((function(e){return Object(L.jsx)(yo,{indent:0,isRoot:!0,task:e,parent:t},e.id)}))})]})]})]})}var To=n(448),Do=n(473),No=n(474),Io=n(263),Po=n.n(Io),Lo=Object(F.a)(ie.a)((function(e){var t=e.theme,n=e.header,r={display:"flex",flexDirection:"row",margin:t.spacing(1),padding:n?t.spacing(3):t.spacing(2)};return"light"===t.palette.mode&&(r.backgroundColor=n?t.palette.grey[400]:t.palette.grey[300]),r})),Ao=Object(F.a)(V.a)((function(e){var t=e.theme,n=e.flexcount,r=e.insertpadding,a=e.header,i={flex:null!==n&&void 0!==n?n:"1"};return r&&(i.padding=t.spacing(1)),a&&(i.fontWeight="bold"),i})),Eo=Object(F.a)("div")((function(e){var t=e.theme,n=e.index;return{display:"flex",flexDirection:"row",backgroundColor:-1===n?"light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800]:n%2===0?void 0:t.palette.action.hover}}));function Mo(e){var t,n=Object(B.a)(),r=Object(a.useState)(!1),i=Object(b.a)(r,2),c=i[0],o=i[1];return Object(L.jsxs)(Lo,{header:e.isHeader,children:[e.isHeader&&!e.orderStatus&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(Ao,{header:!0,children:"Customer Account"}),Object(L.jsx)(Ao,{header:!0,children:"Customer Name"}),Object(L.jsx)(Ao,{header:!0,children:"Order Number"}),Object(L.jsx)(Ao,{header:!0,children:"Expected Ship Date"}),Object(L.jsx)(Ao,{header:!0,children:"Expected Payment"}),Object(L.jsx)(Ao,{header:!0,flexcount:"3",children:"Current Tasks"})]}),e.orderStatus&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(Ao,{children:e.orderStatus.customer_account}),Object(L.jsx)(Ao,{children:e.orderStatus.customer_name}),Object(L.jsx)(Ao,{children:e.orderStatus.order_number}),Object(L.jsx)(Ao,{style:{color:(new Date).getTime()>e.orderStatus.expected_ship_date?n.palette.error.main:n.palette.text.primary},children:It(new Date(e.orderStatus.expected_ship_date))}),Object(L.jsx)(Ao,{children:null!==(t=e.orderStatus.expected_payment)&&void 0!==t?t:"N/A"}),Object(L.jsxs)(Ao,{flexcount:"3",children:[0===e.orderStatus.current_tasks.length&&Object(L.jsx)(V.a,{style:{paddingLeft:n.spacing(2)},children:"No Tasks In Progress"}),e.orderStatus.current_tasks.length>0&&Object(L.jsxs)(To.a,{expanded:c,onChange:function(){return o(!c)},elevation:0,children:[Object(L.jsx)(Do.a,{expandIcon:Object(L.jsx)(Po.a,{}),children:Object(L.jsxs)(V.a,{children:[Object(L.jsxs)("span",{style:{color:n.palette.success.light,fontWeight:"bold"},children:[" ",e.orderStatus.current_tasks.length]}),1===e.orderStatus.current_tasks.length?" Task ":" Tasks ","In Progress"]})}),Object(L.jsx)(No.a,{children:Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(Eo,{index:-1,children:[Object(L.jsx)(Ao,{insertpadding:!0,children:"Task Name"}),Object(L.jsx)(Ao,{insertpadding:!0,children:"Task Owner"}),Object(L.jsx)(Ao,{insertpadding:!0,children:"Due Date"})]}),e.orderStatus.current_tasks.map((function(e,t){var r;return Object(L.jsxs)(Eo,{index:t,children:[Object(L.jsx)(Ao,{insertpadding:!0,children:e.task_name}),Object(L.jsx)(Ao,{insertpadding:!0,children:null!==(r=e.task_owner)&&void 0!==r?r:"N/A"}),Object(L.jsx)(Ao,{insertpadding:!0,style:{color:(new Date).getTime()>e.due_date?n.palette.error.main:n.palette.text.primary},children:It(new Date(e.due_date))})]},t)}))]})})]})]})]})]})}function Wo(){var e=Object(a.useContext)(A).user,t=Object(a.useState)(!1),n=Object(b.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)(null),l=Object(b.a)(o,2),s=l[0],u=l[1],d=Object(a.useState)(null),j=Object(b.a)(d,2),p=j[0],h=j[1];return Object(a.useEffect)((function(){c(!0),C("http://87.98.220.129:1515/api/report/order-status",r.Get,null,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},"Something went wrong.",!0).then((function(e){h(e),u(null),c(!1)})).catch((function(e){c(!1),u(e.message)}))}),[]),Object(L.jsxs)(Sr,{isDataLoaded:!i&&!s,children:[i&&Object(L.jsx)(nt,{text:"Loading Schema.."}),s&&Object(L.jsx)(Ze,{text:null!==s&&void 0!==s?s:"Something went wrong"}),!i&&!s&&p&&Object(L.jsxs)("div",{children:[Object(L.jsx)(Mo,{isHeader:!0}),p.map((function(e){return Object(L.jsx)(Mo,{isHeader:!1,orderStatus:e},e.order_number)}))]})]})}var Ro=n.p+"static/media/no_task_selected.5a7afd64.png",Fo=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"row",height:"100%"}})),Bo=Object(F.a)(ie.a)((function(e){var t=e.theme;return{display:"flex",flexDirection:"column",flex:"1",overflowY:"scroll",marginRight:e.delmarginright?void 0:t.spacing(1)}})),qo=Object(F.a)(ie.a)((function(e){var t=e.theme,n=e.center;return{display:"flex",flexDirection:"column",flex:"4",marginLeft:e.delmarginleft?void 0:t.spacing(1),overflowY:"scroll",alignItems:n?"center":"stretch",justifyContent:n?"center":"flex-start"}})),zo=Object(F.a)(V.a)((function(e){var t=e.theme,n=e.flexcount,r=e.insertpadding,a=e.header,i={flex:null!==n&&void 0!==n?n:"1",color:e.color};return r&&(i.padding=t.spacing(1)),a&&(i.fontWeight="bold"),i})),Ho=Object(F.a)(ie.a)((function(e){var t=e.theme,n=e.header,r=e.warning,a=e.margin,i={display:"flex",flexDirection:"row",margin:t.spacing(null!==a&&void 0!==a?a:1),padding:n?t.spacing(3):t.spacing(2)};return r?i.backgroundColor="light"===t.palette.mode?t.palette.error.light:t.palette.error.dark:"light"===t.palette.mode&&(i.backgroundColor=n?t.palette.grey[400]:t.palette.grey[300]),i}));function Uo(){var e,t=Object(a.useContext)(A).user,n=Object(B.a)(),i=Object(a.useState)(null),c=Object(b.a)(i,2),o=c[0],l=c[1],s=Object(a.useState)(!1),u=Object(b.a)(s,2),d=u[0],j=u[1],p=Object(a.useState)(null),h=Object(b.a)(p,2),f=h[0],v=h[1],O=Object(a.useState)(null),x=Object(b.a)(O,2),m=x[0],g=x[1],y=Object(a.useState)(!1),k=Object(b.a)(y,2),_=k[0],w=k[1],S=Object(a.useState)(null),T=Object(b.a)(S,2),N=T[0],I=T[1],P=Object(a.useState)(null),E=Object(b.a)(P,2),M=E[0],W=E[1];return Object(a.useEffect)((function(){v(null),j(!0),C("http://87.98.220.129:1515/api/report/tasks-by-employee/init",r.Get,null,{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.tokenStr)},"Something went wrong",!0).then((function(e){l(e),v(null),j(!1)})).catch((function(e){j(!1),v(e.message)}))}),[]),Object(a.useEffect)((function(){var e;N&&(W(null),w(!0),C((e=N,D+"/api/report/tasks-by-employee/".concat(e)),r.Get,null,{Authorization:"Bearer ".concat(null===t||void 0===t?void 0:t.tokenStr)},"Something went wrong",!0).then((function(e){g(e),w(!1)})).catch((function(e){w(!1),W(e.message)})))}),[N]),Object(L.jsxs)(Sr,{style:{overflowY:"hidden"},isDataLoaded:!d&&!f,children:[d&&Object(L.jsx)(nt,{text:"Loading Schema.."}),f&&Object(L.jsx)(Ze,{text:null!==f&&void 0!==f?f:"Something went wrong"}),!d&&!f&&o&&Object(L.jsxs)(Fo,{children:[Object(L.jsxs)(Bo,{children:[Object(L.jsx)(V.a,{style:{margin:n.spacing(1)},variant:"h5",gutterBottom:!0,children:"Employees"}),Object(L.jsx)(X.a,{style:{margin:n.spacing(1)}}),Object(L.jsx)(Y.a,{children:o.map((function(e){return Object(L.jsx)(ne.a,{button:!0,onClick:function(){return I(e.user_code)},children:Object(L.jsx)(V.a,{variant:"h6",children:e.description})},e.user_code)}))})]}),Object(L.jsxs)(qo,{center:null===N,children:[!N&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("img",{src:Ro,width:260}),Object(L.jsx)(V.a,{style:{marginTop:n.spacing(2)},variant:"h5",children:"No Selected Employee"})]}),_&&Object(L.jsx)(nt,{text:"Getting Tasks"}),M&&Object(L.jsx)(Ze,{text:M}),!_&&!M&&m&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(V.a,{style:{margin:n.spacing(1)},variant:"h5",children:["Assigned Tasks For"," ",Object(L.jsx)("span",{style:{color:n.palette.success.main},children:null===(e=o.find((function(e){return e.user_code===N})))||void 0===e?void 0:e.description})]}),Object(L.jsxs)(Ho,{header:!0,elevation:0,children:[Object(L.jsx)(zo,{header:!0,children:"Task Name"}),Object(L.jsx)(zo,{header:!0,children:"Task Code"}),Object(L.jsx)(zo,{header:!0,children:"Start Date"}),Object(L.jsx)(zo,{header:!0,children:"Due Date"}),Object(L.jsx)(zo,{header:!0,children:"Order Number"}),Object(L.jsx)(zo,{header:!0,children:"Project Title"}),Object(L.jsx)(zo,{header:!0,children:"Assigned To"})]}),m.map((function(e,t){var r;return Object(L.jsxs)(Ho,{elevation:0,children:[Object(L.jsx)(zo,{children:e.task_name}),Object(L.jsx)(zo,{children:null!==(r=e.task_code)&&void 0!==r?r:"N/A"}),Object(L.jsx)(zo,{children:e.start_date?It(new Date(e.start_date)):"N/A"}),Object(L.jsx)(zo,{style:{color:e.due_date&&(new Date).getTime()>e.due_date?n.palette.error.main:n.palette.text.primary},children:e.due_date?It(new Date(e.due_date)):"N/A"}),Object(L.jsx)(zo,{children:e.order_number}),Object(L.jsx)(zo,{children:e.project_title}),Object(L.jsx)(zo,{children:e.assigned_to})]},t)}))]})]})]})]})}var Go=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column"}}));function Yo(){var e=Object(a.useContext)(A).user,t=(Object(B.a)(),Object(a.useState)(!1)),n=Object(b.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)(null),l=Object(b.a)(o,2),s=l[0],u=l[1],d=Object(a.useState)(null),j=Object(b.a)(d,2),p=j[0],h=j[1];return Object(a.useEffect)((function(){c(!0),u(null),C("http://87.98.220.129:1515/api/report/pipeline-orders",r.Get,null,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},"Something went wrong",!0).then((function(e){h(e),c(!1)})).catch((function(e){u(e.message),c(!1)}))}),[]),Object(L.jsxs)(Sr,{style:{overflowY:"hidden"},isDataLoaded:!i&&!s,children:[i&&Object(L.jsx)(nt,{text:"Loading Schema.."}),s&&Object(L.jsx)(Ze,{text:null!==s&&void 0!==s?s:"Something went wrong"}),!i&&!s&&p&&Object(L.jsxs)(Go,{children:[Object(L.jsxs)(Ho,{header:!0,children:[Object(L.jsx)(zo,{header:!0,children:"Order Number"}),Object(L.jsx)(zo,{header:!0,children:"Project Title"}),Object(L.jsx)(zo,{header:!0,children:"Customer Account"}),Object(L.jsx)(zo,{header:!0,children:"Customer Name"}),Object(L.jsx)(zo,{header:!0,children:"Planned Date"}),Object(L.jsx)(zo,{header:!0,children:"Expected Date"})]}),p.map((function(e,t){return Object(L.jsxs)(Ho,{warning:e.planned_date<e.expected_date,children:[Object(L.jsx)(zo,{children:e.order_number}),Object(L.jsx)(zo,{children:e.project_title}),Object(L.jsx)(zo,{children:e.customer_account}),Object(L.jsx)(zo,{children:e.customer_name}),Object(L.jsx)(zo,{children:e.planned_date?It(new Date(e.planned_date)):"N/A"}),Object(L.jsx)(zo,{children:e.expected_date?It(new Date(e.expected_date)):"N/A"})]},t)}))]})]})}var Vo;!function(e){e.QuarterDay="Quarter Day",e.HalfDay="Half Day",e.Day="Day",e.Week="Week",e.Month="Month"}(Vo||(Vo={}));Intl.DateTimeFormatOptions,Intl.DateTimeFormat;var Xo={},Jo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=JSON.stringify([e,t]),r=Xo[n];return r||(r=new Intl.DateTimeFormat(e,t),Xo[n]=r),r},Ko=function(e,t,n){return new Date(e.getFullYear()+("year"===n?t:0),e.getMonth()+("month"===n?t:0),e.getDate()+("day"===n?t:0),e.getHours()+("hour"===n?t:0),e.getMinutes()+("minute"===n?t:0),e.getSeconds()+("second"===n?t:0),e.getMilliseconds()+("millisecond"===n?t:0))},Qo=function(e,t){var n=["millisecond","second","minute","hour","day","month","year"],r=function(e){var r=n.indexOf(t);return n.indexOf(e)<=r};return new Date(e.getFullYear(),r("year")?0:e.getMonth(),r("month")?1:e.getDate(),r("day")?0:e.getHours(),r("hour")?0:e.getMinutes(),r("minute")?0:e.getSeconds(),r("second")?0:e.getMilliseconds())},$o=function(e,t){var n,r=e[0].start,a=e[0].start,i=Object(Ft.a)(e);try{for(i.s();!(n=i.n()).done;){var c=n.value;c.start<r&&(r=c.start),c.end>a&&(a=c.end)}}catch(o){i.e(o)}finally{i.f()}switch(t){case Vo.Month:r=Ko(r,-1,"month"),r=Qo(r,"month"),a=Ko(a,1,"year"),a=Qo(a,"year");break;case Vo.Week:r=Qo(r,"day"),a=Qo(a,"day"),r=Ko(tl(r),-7,"day"),a=Ko(a,1.5,"month");break;case Vo.Day:r=Qo(r,"day"),a=Qo(a,"day"),r=Ko(r,-1,"day"),a=Ko(a,19,"day");break;case Vo.QuarterDay:r=Qo(r,"day"),a=Qo(a,"day"),r=Ko(r,-1,"day"),a=Ko(a,66,"hour");break;case Vo.HalfDay:r=Qo(r,"day"),a=Qo(a,"day"),r=Ko(r,-1,"day"),a=Ko(a,108,"hour")}return[r,a]},Zo=function(e,t,n){for(var r=new Date(e),a=[r];r<t;){switch(n){case Vo.Month:r=Ko(r,1,"month");break;case Vo.Week:r=Ko(r,7,"day");break;case Vo.Day:r=Ko(r,1,"day");break;case Vo.HalfDay:r=Ko(r,12,"hour");break;case Vo.QuarterDay:r=Ko(r,6,"hour")}a.push(r)}return a},el=function(e,t){var n=Jo(t,{month:"long"}).format(e);return n=n.replace(n[0],n[0].toLocaleUpperCase())},tl=function(e){var t=e.getDay(),n=e.getDate()-t+(0===t?-6:1);return new Date(e.setDate(n))},nl=function(e){var t=new Date(e.valueOf()),n=(t.getDay()+6)%7;t.setDate(t.getDate()-n+3);var r=t.valueOf();t.setMonth(0,1),4!==t.getDay()&&t.setMonth(0,1+(4-t.getDay()+7)%7);var a=(1+Math.ceil((r-t.valueOf())/6048e5)).toString();return 1===a.length?"0".concat(a):a},rl=n(113),al=n.n(rl),il=function(e){var t=e.headerHeight,n=e.fontFamily,r=e.fontSize,a=e.rowWidth,i=Object(B.a)();return Object(L.jsx)(ie.a,{elevation:0,style:{fontFamily:n,fontSize:r,backgroundColor:"light"===i.palette.mode?i.palette.grey[400]:i.palette.grey[800]},children:Object(L.jsxs)("div",{className:al.a.ganttTable_Header,style:{height:t-2,textAlign:"center"},children:[Object(L.jsx)(V.a,{className:al.a.ganttTable_HeaderItem,style:{minWidth:a},children:"\xa0Name"}),Object(L.jsx)("div",{className:al.a.ganttTable_HeaderSeparator,style:{height:.5*t,marginTop:.2*t,textAlign:"center"}}),Object(L.jsx)(V.a,{className:al.a.ganttTable_HeaderItem,style:{minWidth:a},children:"\xa0From"}),Object(L.jsx)("div",{className:al.a.ganttTable_HeaderSeparator,style:{height:.5*t,marginTop:.25*t,textAlign:"center"}}),Object(L.jsx)(V.a,{className:al.a.ganttTable_HeaderItem,style:{minWidth:a},children:"\xa0To"})]})})},cl=n(101),ol=n.n(cl),ll={},sl={weekday:"short",year:"numeric",month:"long",day:"numeric"},ul=function(e){var t=e.rowHeight,n=e.rowWidth,r=e.tasks,i=e.fontFamily,c=e.fontSize,o=e.locale,l=e.onExpanderClick,s=Object(a.useMemo)((function(){return function(e){return function(t,n){var r=t.toString(),a=ll[r];return a||(a=t.toLocaleDateString(e,n),ll[r]=a),a}}(o)}),[o]),u=Object(B.a)();return Object(L.jsx)("div",{style:{fontFamily:i,fontSize:c},children:r.map((function(e,r){var a="";return!1===e.hideChildren?a="\u25bc":!0===e.hideChildren&&(a="\u25b6"),Object(L.jsxs)("div",{className:ol.a.taskListTableRow,style:{height:t,backgroundColor:r%2===0?u.palette.background.paper:u.palette.action.hover},children:[Object(L.jsx)("div",{className:ol.a.taskListCell,style:{minWidth:n,maxWidth:n},title:e.name,children:Object(L.jsxs)("div",{className:ol.a.taskListNameWrapper,children:[Object(L.jsx)("div",{className:a?ol.a.taskListExpander:ol.a.taskListEmptyExpander,onClick:function(){return l(e)},children:a}),Object(L.jsx)("div",{children:e.name})]})}),Object(L.jsxs)("div",{className:ol.a.taskListCell,style:{minWidth:n,maxWidth:n},children:["\xa0",s(e.start,sl)]}),Object(L.jsxs)("div",{className:ol.a.taskListCell,style:{minWidth:n,maxWidth:n},children:["\xa0",s(e.end,sl)]})]},"".concat(e.id,"row"))}))})},dl=n(207),jl=n.n(dl),bl=function(e){var t=e.task,n=e.rowHeight,r=e.rtl,i=e.svgContainerHeight,c=e.svgContainerWidth,o=e.scrollX,l=e.scrollY,s=e.arrowIndent,u=e.fontSize,d=e.fontFamily,j=e.headerHeight,p=e.taskListWidth,h=e.TooltipContent,f=Object(a.useRef)(null),v=Object(a.useState)(0),O=Object(b.a)(v,2),x=O[0],m=O[1],g=Object(a.useState)(0),y=Object(b.a)(g,2),k=y[0],_=y[1];return Object(a.useEffect)((function(){if(f.current){var e,a=1.1*f.current.offsetHeight,u=1.1*f.current.offsetWidth,d=t.index*n-l+j;if(r)(e=t.x1-1.5*s-u-o)<0&&(e=t.x2+1.5*s-o),u+e>c&&(e=c-u,d+=n);else u+(e=t.x2+1.5*s+p-o)>p+c&&(e=t.x1+p-1.5*s-o-u),e<p&&(e=c+p-u,d+=n);a+d-l>i-l&&(d=i-a),m(d),_(e)}}),[f.current,t,s,o,l,j,p,n,i,c]),Object(L.jsx)("div",{ref:f,className:k?jl.a.tooltipDetailsContainer:jl.a.tooltipDetailsContainerHidden,style:{left:k,top:x},children:Object(L.jsx)(h,{task:t,fontSize:u,fontFamily:d})})},pl=function(e){var t=e.task,n=e.fontSize,r=(e.fontFamily,Object(B.a)());return Object(L.jsxs)(ie.a,{style:{padding:r.spacing(2)},children:[Object(L.jsx)(V.a,{component:"b",variant:"body1",style:{fontSize:n+6},children:"".concat(t.name,": ").concat(t.start.getDate(),"-").concat(t.start.getMonth()+1,"-").concat(t.start.getFullYear()," - ").concat(t.end.getDate(),"-").concat(t.end.getMonth()+1,"-").concat(t.end.getFullYear())}),t.end.getTime()-t.start.getTime()!==0&&Object(L.jsx)(V.a,{variant:"body2",component:"p",children:"Duration: ".concat(~~((t.end.getTime()-t.start.getTime())/864e5)," day(s)")}),Object(L.jsx)(V.a,{variant:"body2",component:"p",children:!!t.progress&&"Progress: ".concat(t.progress," %")})]})},hl=n(264),fl=n.n(hl),vl=function(e){var t=e.scroll,n=e.ganttHeight,r=e.ganttFullHeight,i=e.headerHeight,c=e.rtl,o=e.onScroll,l=Object(a.useRef)(null);return Object(a.useEffect)((function(){l.current&&(l.current.scrollTop=t)}),[t]),Object(L.jsx)("div",{style:{height:n,marginTop:i,marginLeft:c?"":"-17px"},className:fl.a.scroll,onScroll:o,ref:l,children:Object(L.jsx)("div",{style:{height:r,width:1}})})},Ol=function(e){var t=e.headerHeight,n=e.fontFamily,r=e.fontSize,i=e.rowWidth,c=e.rowHeight,o=e.scrollY,l=e.tasks,s=e.selectedTask,u=e.setSelectedTask,d=e.onExpanderClick,j=e.locale,b=e.ganttHeight,h=e.taskListRef,f=e.horizontalContainerClass,v=e.TaskListHeader,O=e.TaskListTable,x=Object(a.useRef)(null);Object(a.useEffect)((function(){x.current&&(x.current.scrollTop=o)}),[o]);var m={headerHeight:t,fontFamily:n,fontSize:r,rowWidth:i},g={rowHeight:c,rowWidth:i,fontFamily:n,fontSize:r,tasks:l,locale:j,selectedTaskId:s?s.id:"",setSelectedTask:u,onExpanderClick:d};return Object(L.jsxs)("div",{ref:h,children:[Object(L.jsx)(v,Object(p.a)({},m)),Object(L.jsx)("div",{ref:x,className:f,style:b?{height:b}:{},children:Object(L.jsx)(O,Object(p.a)({},g))})]})},xl=n(184),ml=n.n(xl),gl=function(e){var t,n=e.tasks,r=e.dates,a=e.rowHeight,i=e.svgWidth,c=e.columnWidth,o=e.todayColor,l=e.rtl,s=Object(B.a)(),u=0,d=[],j=[Object(L.jsx)("line",{x:"0",y1:0,x2:i,y2:0,className:ml.a.gridRowLine},"RowLineFirst")],b=Object(Ft.a)(n);try{for(b.s();!(t=b.n()).done;){var p=t.value;d.push(Object(L.jsx)("rect",{x:"0",y:u,width:i,height:a,fill:s.palette.background.default},"Row"+p.id)),j.push(Object(L.jsx)("line",{x:"0",y1:u+a,x2:i,y2:u+a,className:ml.a.gridRowLine},"RowLine"+p.id)),u+=a}}catch(g){b.e(g)}finally{b.f()}for(var h=new Date,f=0,v=[],O=Object(L.jsx)("rect",{}),x=0;x<r.length;x++){var m=r[x];v.push(Object(L.jsx)("line",{x1:f,y1:0,x2:f,y2:u,className:ml.a.gridTick},m.getTime())),(x+1!==r.length&&m.getTime()<h.getTime()&&r[x+1].getTime()>=h.getTime()||0!==x&&x+1===r.length&&m.getTime()<h.getTime()&&Ko(m,m.getTime()-r[x-1].getTime(),"millisecond").getTime()>=h.getTime())&&(O=Object(L.jsx)("rect",{x:f,y:0,width:c,height:u,fill:o})),l&&x+1!==r.length&&m.getTime()>=h.getTime()&&r[x+1].getTime()<h.getTime()&&(O=Object(L.jsx)("rect",{x:f+c,y:0,width:c,height:u,fill:o})),f+=c}return Object(L.jsxs)("g",{className:"gridBody",children:[Object(L.jsx)("g",{className:"rows",children:d}),Object(L.jsx)("g",{className:"rowLines",children:j}),Object(L.jsx)("g",{className:"ticks",children:v}),Object(L.jsx)("g",{className:"today",children:O})]})},yl=function(e){return Object(L.jsx)("g",{className:"grid",children:Object(L.jsx)(gl,Object(p.a)({},e))})},kl=n(265),_l=n.n(kl),wl=function(e){var t=e.value,n=e.x1Line,r=e.y1Line,a=e.y2Line,i=e.xText,c=e.yText;return Object(L.jsxs)("g",{className:"calendarTop",children:[Object(L.jsx)("line",{x1:n,y1:r,x2:n,y2:a,className:_l.a.calendarTopTick},t+"line"),Object(L.jsx)(V.a,{component:"text",variant:"body2",y:c,x:i,children:t},t+"text")]})},Cl=function(e){var t=e.dateSetup,n=e.locale,r=e.viewMode,a=e.rtl,i=e.headerHeight,c=e.columnWidth,o=e.fontFamily,l=(e.fontSize,[]),s=[];switch(t.viewMode){case Vo.Month:var u=function(){for(var e=[],r=[],o=.5*i,l=0;l<t.dates.length;l++){var s=t.dates[l],u=el(s,n);if(r.push(Object(L.jsx)(V.a,{component:"text",y:.8*i,x:c*l+.5*c,children:u},u+s.getFullYear())),0===l||s.getFullYear()!==t.dates[l-1].getFullYear()){var d=s.getFullYear().toString(),j=void 0;j=a?(6+l+s.getMonth()+1)*c:(6+l-s.getMonth())*c,e.push(Object(L.jsx)(wl,{value:d,x1Line:c*l,y1Line:0,y2Line:o,xText:j,yText:.9*o},d))}}return[e,r]}(),d=Object(b.a)(u,2);l=d[0],s=d[1];break;case Vo.Week:var j=function(){for(var e=[],r=[],o=1,l=.5*i,s=t.dates,u=s.length-1;u>=0;u--){var d=s[u],j="";0!==u&&d.getMonth()===s[u-1].getMonth()||(j="".concat(el(d,n),", ").concat(d.getFullYear()));var b="W".concat(nl(d));r.push(Object(L.jsx)(V.a,{component:"text",y:.8*i,x:c*(u+ +a),children:b},d.getTime())),j&&(u!==s.length-1&&e.push(Object(L.jsx)(wl,{value:j,x1Line:c*u+o*c,y1Line:0,y2Line:l,xText:c*u+c*o*.5,yText:.9*l},j)),o=0),o++}return[e,r]}(),p=Object(b.a)(j,2);l=p[0],s=p[1];break;case Vo.Day:var h=function(){for(var e,r,a=[],o=[],l=.5*i,s=t.dates,u=0;u<s.length;u++){var d=s[u],j=d.getDate().toString();if(o.push(Object(L.jsx)(V.a,{component:"text",variant:"body2",y:.8*i,x:c*u+.5*c,children:j})),u+1!==s.length&&d.getMonth()!==s[u+1].getMonth()){var b=el(d,n);a.push(Object(L.jsx)(wl,{value:b,x1Line:c*(u+1),y1Line:0,y2Line:l,xText:c*(u+1)-.5*(e=d.getMonth(),r=d.getFullYear(),new Date(r,e+1,0).getDate()*c),yText:.9*l},b+d.getFullYear()))}}return[a,o]}(),f=Object(b.a)(h,2);l=f[0],s=f[1];break;default:var v=function(){for(var e=[],l=[],s=r===Vo.HalfDay?2:4,u=.5*i,d=t.dates,j=0;j<d.length;j++){var b=d[j],p=Jo(n,{hour:"numeric"}).format(b);if(l.push(Object(L.jsx)(V.a,{component:"text",y:.8*i,x:c*(j+ +a),fontFamily:o,children:p},b.getTime())),0===j||b.getDate()!==d[j-1].getDate()){var h="".concat(b.getDate()," ").concat(el(b,n));e.push(Object(L.jsx)(wl,{value:h,x1Line:c*j+s*c,y1Line:0,y2Line:u,xText:c*j+s*c*.5,yText:.9*u},h+b.getFullYear()))}}return[e,l]}(),O=Object(b.a)(v,2);l=O[0],s=O[1]}var x=Object(B.a)();return Object(L.jsxs)("g",{fill:x.palette.text.primary,children:[Object(L.jsx)("rect",{fill:x.palette.background.default,x:0,y:0,width:c*t.dates.length,height:i}),s," ",l]})},Sl=function(e){var t,n,r=e.taskFrom,a=e.taskTo,i=e.rowHeight,c=e.taskHeight,o=e.arrowIndent;if(e.rtl){var l=Dl(r,a,i,c,o),s=Object(b.a)(l,2);t=s[0],n=s[1]}else{var u=Tl(r,a,i,c,o),d=Object(b.a)(u,2);t=d[0],n=d[1]}return Object(L.jsxs)("g",{className:"arrow",children:[Object(L.jsx)("path",{strokeWidth:"1.5",d:t,fill:"none"}),Object(L.jsx)("polygon",{points:n})]})},Tl=function(e,t,n,r,a){var i=e.index>t.index?-1:1,c=t.y+r/2,o=e.x2+2*a,l=o<t.x1?"":"H ".concat(t.x1-a),s=o>t.x1?a:t.x1-e.x2-a;return["M ".concat(e.x2," ").concat(e.y+r/2," \n  h ").concat(a," \n  v ").concat(i*n/2," \n  ").concat(l,"\n  V ").concat(c," \n  h ").concat(s),"".concat(t.x1,",").concat(c," \n  ").concat(t.x1-5,",").concat(c-5," \n  ").concat(t.x1-5,",").concat(c+5)]},Dl=function(e,t,n,r,a){var i=e.index>t.index?-1:1,c=t.y+r/2,o=e.x1-2*a,l=o>t.x2?"":"H ".concat(t.x2+a),s=o<t.x2?-a:t.x2-e.x1+a;return["M ".concat(e.x1," ").concat(e.y+r/2," \n  h ").concat(-a," \n  v ").concat(i*n/2," \n  ").concat(l,"\n  V ").concat(c," \n  h ").concat(s),"".concat(t.x2,",").concat(c," \n  ").concat(t.x2+5,",").concat(c+5," \n  ").concat(t.x2+5,",").concat(c-5)]},Nl=function(e,t,n,r,a,i,c,o,l,s,u,d,j,b,p,h,f,v,O,x){var m;switch(e.type){case"milestone":m=Pl(e,t,n,r,a,i,c,o,l,O,x);break;case"project":m=Il(e,t,n,r,a,i,c,o,l,s,p,h,f,v);break;default:m=Il(e,t,n,r,a,i,c,o,l,s,u,d,j,b)}return m},Il=function(e,t,n,r,a,i,c,o,l,s,u,d,j,h){var f,v;s?(v=Al(e.start,n,r,a),f=Al(e.end,n,r,a)):(f=Ll(e.start,n,r,a),v=Ll(e.end,n,r,a));var O=e.type;"task"===O&&v-f<2*l&&(O="smalltask",v=f+2*l);var x=Ml(f,v,e.progress,s),m=Object(b.a)(x,2),g=m[0],y=m[1],k=El(t,i,c),_="project"===e.type?e.hideChildren:void 0,w=Object(p.a)({backgroundColor:j,backgroundSelectedColor:h,progressColor:u,progressSelectedColor:d},e.styles);return Object(p.a)(Object(p.a)({},e),{},{typeInternal:O,x1:f,x2:v,y:k,index:t,progressX:y,progressWidth:g,barCornerRadius:o,handleWidth:l,hideChildren:_,height:c,barChildren:[],styles:w})},Pl=function(e,t,n,r,a,i,c,o,l,s,u){var d=Ll(e.start,n,r,a),j=El(t,i,c),b=d-.5*c,h=d+.5*c,f=c/1.414,v=Object(p.a)({backgroundColor:s,backgroundSelectedColor:u,progressColor:"",progressSelectedColor:""},e.styles);return Object(p.a)(Object(p.a)({},e),{},{end:e.start,x1:b,x2:h,y:j,index:t,progressX:0,progressWidth:0,barCornerRadius:o,handleWidth:l,typeInternal:e.type,progress:0,height:f,hideChildren:void 0,barChildren:[],styles:v})},Ll=function(e,t,n,r){var a=~~((e.getTime()-t[0].getTime()+e.getTimezoneOffset()-t[0].getTimezoneOffset())/n);return Math.round((a+(e.getTime()-t[a].getTime()-60*e.getTimezoneOffset()*1e3+60*t[a].getTimezoneOffset()*1e3)/n)*r)},Al=function(e,t,n,r){var a=Ll(e,t,n,r);return a+=r},El=function(e,t,n){return e*t+(t-n)/2},Ml=function(e,t,n,r){var a=(t-e)*n*.01;return[a,r?t-a:e]},Wl=function(e,t,n){return[e-5,t+n,e+5,t+n,e,t+n-8.66].join(",")},Rl=function(e,t,n){var r=Math.round((e-n.x1)/t)*t,a=n.x1+r;return[a,a+n.x2-n.x1]},Fl=function(e,t,n,r,a){var i=new Date((e-t)/r*a+n.getTime());return i=new Date(i.getTime()+6e4*(i.getTimezoneOffset()-n.getTimezoneOffset()))},Bl=function(e,t,n,r,a,i,c){var o;if("milestone"===n.type)o=zl(e,t,n,r,a,i);else o=ql(e,t,n,r,a,i,c);return o},ql=function(e,t,n,r,a,i,c){var o=Object(p.a)({},n),l=!1;switch(t){case"progress":if(o.progress=c?function(e,t){if(e>=t.x2)return 0;if(e<=t.x1)return 100;var n=t.x2-t.x1;return Math.round(100*(t.x2-e)/n)}(e,n):function(e,t){if(e>=t.x2)return 100;if(e<=t.x1)return 0;var n=t.x2-t.x1;return Math.round(100*(e-t.x1)/n)}(e,n),l=o.progress!==n.progress){var s=Ml(o.x1,o.x2,o.progress,c),u=Object(b.a)(s,2),d=u[0],j=u[1];o.progressWidth=d,o.progressX=j}break;case"start":var h=function(e,t,n){e>=n.x2-2*n.handleWidth&&(e=n.x2-2*n.handleWidth);var r=Math.round((e-n.x1)/t)*t;return n.x1+r}(e,r,n);if(o.x1=h,l=o.x1!==n.x1){c?o.end=Fl(h,n.x1,n.end,r,a):o.start=Fl(h,n.x1,n.start,r,a);var f=Ml(o.x1,o.x2,o.progress,c),v=Object(b.a)(f,2),O=v[0],x=v[1];o.progressWidth=O,o.progressX=x}break;case"end":var m=function(e,t,n){e<=n.x1+2*n.handleWidth&&(e=n.x1+2*n.handleWidth);var r=Math.round((e-n.x2)/t)*t;return n.x2+r}(e,r,n);if(o.x2=m,l=o.x2!==n.x2){c?o.start=Fl(m,n.x2,n.start,r,a):o.end=Fl(m,n.x2,n.end,r,a);var g=Ml(o.x1,o.x2,o.progress,c),y=Object(b.a)(g,2),k=y[0],_=y[1];o.progressWidth=k,o.progressX=_}break;case"move":var w=Rl(e-i,r,n),C=Object(b.a)(w,2),S=C[0],T=C[1];if(l=S!==n.x1){o.start=Fl(S,n.x1,n.start,r,a),o.end=Fl(T,n.x2,n.end,r,a),o.x1=S,o.x2=T;var D=Ml(o.x1,o.x2,o.progress,c),N=Object(b.a)(D,2),I=N[0],P=N[1];o.progressWidth=I,o.progressX=P}}return{isChanged:l,changedTask:o}},zl=function(e,t,n,r,a,i){var c=Object(p.a)({},n),o=!1;if("move"===t){var l=Rl(e-i,r,n),s=Object(b.a)(l,2),u=s[0],d=s[1];(o=u!==n.x1)&&(c.start=Fl(u,n.x1,n.start,r,a),c.end=c.start,c.x1=u,c.x2=d)}return{isChanged:o,changedTask:c}};function Hl(e){return void 0!==e.key}function Ul(e){var t=e.filter((function(e){return e.hideChildren&&"project"===e.type}));if(t.length>0)for(var n=function(n){var r=t[n],a=Gl(e,r);e=e.filter((function(e){return-1===a.indexOf(e)}))},r=0;t.length>r;r++)n(r);return e}function Gl(e,t){var n=[],r=(n="project"!==t.type?e.filter((function(e){return e.dependencies&&-1!==e.dependencies.indexOf(t.id)})):e.filter((function(e){return e.project&&e.project===t.id}))).reduce((function(t,n){return t.concat(t,Gl(e,n))}),[]);return n=n.concat(n,r)}var Yl=n(74),Vl=n.n(Yl),Xl=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.isSelected,c=e.progressX,o=e.progressWidth,l=e.barCornerRadius,s=e.styles,u=e.onMouseDown;return Object(L.jsxs)("g",{onMouseDown:u,children:[Object(L.jsx)("rect",{x:t,width:r,y:n,height:a,ry:l,rx:l,fill:i?s.backgroundSelectedColor:s.backgroundColor,className:Vl.a.barBackground}),Object(L.jsx)("rect",{x:c,width:o,y:n,height:a,ry:l,rx:l,fill:i?s.progressSelectedColor:s.progressColor})]})},Jl=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.barCornerRadius,c=e.onMouseDown;return Object(L.jsx)("rect",{x:t,y:n,width:r,height:a,className:Vl.a.barHandle,ry:i,rx:i,onMouseDown:c})},Kl=function(e){var t=e.progressPoint,n=e.onMouseDown;return Object(L.jsx)("polygon",{className:Vl.a.barHandle,points:t,onMouseDown:n})},Ql=function(e){var t=e.task,n=e.isProgressChangeable,r=e.isDateChangeable,a=e.rtl,i=e.onEventStart,c=e.isSelected,o=Wl(+!a*t.progressWidth+t.progressX,t.y,t.height),l=t.height-2;return Object(L.jsxs)("g",{className:Vl.a.barWrapper,tabIndex:0,children:[Object(L.jsx)(Xl,{x:t.x1,y:t.y,width:t.x2-t.x1,height:t.height,progressX:t.progressX,progressWidth:t.progressWidth,barCornerRadius:t.barCornerRadius,styles:t.styles,isSelected:c,onMouseDown:function(e){r&&i("move",t,e)}}),Object(L.jsxs)("g",{className:"handleGroup",children:[r&&Object(L.jsxs)("g",{children:[Object(L.jsx)(Jl,{x:t.x1+1,y:t.y+1,width:t.handleWidth,height:l,barCornerRadius:t.barCornerRadius,onMouseDown:function(e){i("start",t,e)}}),Object(L.jsx)(Jl,{x:t.x2-t.handleWidth-1,y:t.y+1,width:t.handleWidth,height:l,barCornerRadius:t.barCornerRadius,onMouseDown:function(e){i("end",t,e)}})]}),n&&Object(L.jsx)(Kl,{progressPoint:o,onMouseDown:function(e){i("progress",t,e)}})]})]})},$l=function(e){var t=e.task,n=e.isProgressChangeable,r=e.isDateChangeable,a=e.onEventStart,i=e.isSelected,c=Wl(t.progressWidth+t.x1,t.y,t.height);return Object(L.jsxs)("g",{className:Vl.a.barWrapper,tabIndex:0,children:[Object(L.jsx)(Xl,{x:t.x1,y:t.y,width:t.x2-t.x1,height:t.height,progressX:t.progressX,progressWidth:t.progressWidth,barCornerRadius:t.barCornerRadius,styles:t.styles,isSelected:i,onMouseDown:function(e){r&&a("move",t,e)}}),Object(L.jsx)("g",{className:"handleGroup",children:n&&Object(L.jsx)(Kl,{progressPoint:c,onMouseDown:function(e){a("progress",t,e)}})})]})},Zl=n(208),es=n.n(Zl),ts=function(e){var t=e.task,n=e.isDateChangeable,r=e.onEventStart,a=e.isSelected,i="rotate(45 ".concat(t.x1+.356*t.height," \n    ").concat(t.y+.85*t.height,")");return Object(L.jsx)("g",{tabIndex:0,className:es.a.milestoneWrapper,children:Object(L.jsx)("rect",{fill:a?t.styles.backgroundSelectedColor:t.styles.backgroundColor,x:t.x1,width:t.height,y:t.y,height:t.height,rx:t.barCornerRadius,ry:t.barCornerRadius,transform:i,className:es.a.milestoneBackground,onMouseDown:function(e){n&&r("move",t,e)}})})},ns=n(132),rs=n.n(ns),as=function(e){var t=e.task,n=e.isSelected,r=n?t.styles.backgroundSelectedColor:t.styles.backgroundColor,a=n?t.styles.progressSelectedColor:t.styles.progressColor,i=t.x2-t.x1,c=[t.x1,t.y+t.height/2-1,t.x1,t.y+t.height,t.x1+15,t.y+t.height/2-1].join(","),o=[t.x2,t.y+t.height/2-1,t.x2,t.y+t.height,t.x2-15,t.y+t.height/2-1].join(",");return Object(L.jsxs)("g",{tabIndex:0,className:rs.a.projectWrapper,children:[Object(L.jsx)("rect",{fill:r,x:t.x1,width:i,y:t.y,height:t.height,rx:t.barCornerRadius,ry:t.barCornerRadius,className:rs.a.projectBackground}),Object(L.jsx)("rect",{x:t.progressX,width:t.progressWidth,y:t.y,height:t.height,ry:t.barCornerRadius,rx:t.barCornerRadius,fill:a}),Object(L.jsx)("rect",{fill:r,x:t.x1,width:i,y:t.y,height:t.height/2,rx:t.barCornerRadius,ry:t.barCornerRadius,className:rs.a.projectTop}),Object(L.jsx)("polygon",{className:rs.a.projectTop,points:c,fill:r}),Object(L.jsx)("polygon",{className:rs.a.projectTop,points:o,fill:r})]})},is=n(185),cs=n.n(is),os=function(e){var t=Object(p.a)({},e),n=t.task,r=t.arrowIndent,i=t.isDelete,c=t.taskHeight,o=t.isSelected,l=t.rtl,s=t.onEventStart,u=Object(a.useRef)(null),d=Object(a.useState)(Object(L.jsx)("div",{})),j=Object(b.a)(d,2),h=j[0],f=j[1],v=Object(a.useState)(!0),O=Object(b.a)(v,2),x=O[0],m=O[1];Object(a.useEffect)((function(){switch(n.typeInternal){case"milestone":f(Object(L.jsx)(ts,Object(p.a)({},e)));break;case"project":f(Object(L.jsx)(as,Object(p.a)({},e)));break;case"smalltask":f(Object(L.jsx)($l,Object(p.a)({},e)));break;default:f(Object(L.jsx)(Ql,Object(p.a)({},e)))}}),[n,o]),Object(a.useEffect)((function(){u.current&&m(u.current.getBBox().width<n.x2-n.x1)}),[u,n]);return Object(L.jsxs)("g",{onKeyDown:function(e){if("Delete"===e.key)i&&s("delete",n,e);e.stopPropagation()},onMouseEnter:function(e){s("mouseenter",n,e)},onMouseLeave:function(e){s("mouseleave",n,e)},onDoubleClick:function(e){s("dblclick",n,e)},onFocus:function(){s("select",n)},children:[h,Object(L.jsx)(V.a,{component:"text",variant:"caption",style:{padding:0,margin:0},x:function(){var e=n.x2-n.x1,t=n.barChildren.length>0;return x?n.x1+.5*e:l&&u.current?n.x1-u.current.getBBox().width-r*+t-.2*r:n.x1+e+r*+t+.2*r}(),y:n.y+.5*c,className:x?cs.a.barLabel:cs.a.barLabel&&cs.a.barLabelOutside,ref:u,children:n.name})]})},ls=function(e){var t,n=e.tasks,r=e.dates,i=e.ganttEvent,c=e.selectedTask,o=e.rowHeight,l=e.columnWidth,s=e.timeStep,u=e.svg,p=e.taskHeight,h=e.arrowColor,f=e.arrowIndent,v=e.fontFamily,O=e.fontSize,x=e.rtl,m=e.setGanttEvent,g=e.setFailedTask,y=e.setSelectedTask,k=e.onDateChange,_=e.onProgressChange,w=e.onDoubleClick,C=e.onDelete,S=null===u||void 0===u||null===(t=u.current)||void 0===t?void 0:t.createSVGPoint(),T=Object(a.useState)(0),D=Object(b.a)(T,2),N=D[0],I=D[1],P=Object(a.useState)(0),A=Object(b.a)(P,2),E=A[0],M=A[1],W=Object(a.useState)(!1),R=Object(b.a)(W,2),F=R[0],B=R[1];Object(a.useEffect)((function(){var e=r[1].getTime()-r[0].getTime()-60*r[1].getTimezoneOffset()*1e3+60*r[0].getTimezoneOffset()*1e3;I(s*l/e)}),[l,r,s]),Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r,a,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.changedTask&&S&&(null===u||void 0===u?void 0:u.current)){e.next=2;break}return e.abrupt("return");case 2:t.preventDefault(),S.x=t.clientX,r=S.matrixTransform(null===u||void 0===u||null===(n=u.current.getScreenCTM())||void 0===n?void 0:n.inverse()),a=Bl(r.x,i.action,i.changedTask,N,s,E,x),c=a.isChanged,o=a.changedTask,c&&m({action:i.action,changedTask:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){var n=Object(j.a)(d.a.mark((function n(r){var a,c,o,l,j,b,p,h,f,v,O;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=i.action,o=i.originalSelectedTask,(l=i.changedTask)&&S&&(null===u||void 0===u?void 0:u.current)&&o){n.next=3;break}return n.abrupt("return");case 3:if(r.preventDefault(),S.x=r.clientX,j=S.matrixTransform(null===u||void 0===u||null===(a=u.current.getScreenCTM())||void 0===a?void 0:a.inverse()),b=Bl(j.x,c,l,N,s,E,x),p=b.changedTask,h=o.start!==p.start||o.end!==p.end||o.progress!==p.progress,u.current.removeEventListener("mousemove",e),u.current.removeEventListener("mouseup",t),m({action:""}),B(!1),f=!0,"move"!==c&&"end"!==c&&"start"!==c||!k||!h){n.next=26;break}return n.prev=14,n.next=17,k(p,p.barChildren);case 17:void 0!==(v=n.sent)&&(f=v),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(14),f=!1;case 24:n.next=37;break;case 26:if(!_||!h){n.next=37;break}return n.prev=27,n.next=30,_(p,p.barChildren);case 30:void 0!==(O=n.sent)&&(f=O),n.next=37;break;case 34:n.prev=34,n.t1=n.catch(27),f=!1;case 37:f||g(o);case 38:case"end":return n.stop()}}),n,null,[[14,21],[27,34]])})));return function(e){return n.apply(this,arguments)}}();F||"move"!==i.action&&"end"!==i.action&&"start"!==i.action&&"progress"!==i.action||!(null===u||void 0===u?void 0:u.current)||(u.current.addEventListener("mousemove",e),u.current.addEventListener("mouseup",t),B(!0))}),[i,N,E,_,s,k,u,F]);var q=function(){var e=Object(j.a)(d.a.mark((function e(t,n,r){var a,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}"select"===t&&y(n.id),e.next=41;break;case 4:if(!Hl(r)){e.next=19;break}if("delete"!==t){e.next=17;break}if(!C){e.next=17;break}return e.prev=7,e.next=10,C(n);case 10:void 0!==(a=e.sent)&&a&&m({action:t,changedTask:n}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.error("Error on Delete. "+e.t0);case 17:e.next=41;break;case 19:if("mouseenter"!==t){e.next=23;break}i.action||m({action:t,changedTask:n,originalSelectedTask:n}),e.next=41;break;case 23:if("mouseleave"!==t){e.next=27;break}"mouseenter"===i.action&&m({action:""}),e.next=41;break;case 27:if("dblclick"!==t){e.next=31;break}w&&w(n),e.next=41;break;case 31:if("move"!==t){e.next=40;break}if((null===u||void 0===u?void 0:u.current)&&S){e.next=34;break}return e.abrupt("return");case 34:S.x=r.clientX,o=S.matrixTransform(null===(c=u.current.getScreenCTM())||void 0===c?void 0:c.inverse()),M(o.x-n.x1),m({action:t,changedTask:n,originalSelectedTask:n}),e.next=41;break;case 40:m({action:t,changedTask:n,originalSelectedTask:n});case 41:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(L.jsxs)("g",{className:"content",children:[Object(L.jsx)("g",{className:"arrows",fill:h,stroke:h,children:n.map((function(e){return e.barChildren.map((function(t){return Object(L.jsx)(Sl,{taskFrom:e,taskTo:n[t.index],rowHeight:o,taskHeight:p,arrowIndent:f,rtl:x},"Arrow from ".concat(e.id," to ").concat(n[t.index].id))}))}))}),Object(L.jsx)("g",{className:"bar",fontFamily:v,fontSize:O,children:n.map((function(e){return Object(L.jsx)(os,{task:e,arrowIndent:f,taskHeight:p,isProgressChangeable:!!_&&!e.isDisabled,isDateChangeable:!!k&&!e.isDisabled,isDelete:!e.isDisabled,onEventStart:q,isSelected:!!c&&e.id===c.id,rtl:x},e.id)}))})]})},ss=n(128),us=n.n(ss),ds=function(e){var t=e.gridProps,n=e.calendarProps,r=e.barProps,i=e.ganttHeight,c=e.scrollY,o=e.scrollX,l=Object(a.useRef)(null),s=Object(a.useRef)(null),u=Object(a.useRef)(null),d=Object(p.a)(Object(p.a)({},r),{},{svg:l});return Object(a.useEffect)((function(){s.current&&(s.current.scrollTop=c)}),[c]),Object(a.useEffect)((function(){u.current&&(u.current.scrollLeft=o)}),[o]),Object(L.jsxs)("div",{className:us.a.ganttVerticalContainer,ref:u,dir:"ltr",children:[Object(L.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t.svgWidth,height:n.headerHeight,fontFamily:r.fontFamily,children:Object(L.jsx)(Cl,Object(p.a)({},n))}),Object(L.jsx)("div",{ref:s,className:us.a.horizontalContainer,style:i?{height:i,width:t.svgWidth}:{width:t.svgWidth},children:Object(L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t.svgWidth,height:r.rowHeight*r.tasks.length,fontFamily:r.fontFamily,ref:l,children:[Object(L.jsx)(yl,Object(p.a)({},t)),Object(L.jsx)(ls,Object(p.a)({},d))]})})]})},js=n(266),bs=n.n(js),ps=function(e){var t=e.scroll,n=e.svgWidth,r=e.taskListWidth,i=e.rtl,c=e.onScroll,o=Object(a.useRef)(null);return Object(a.useEffect)((function(){o.current&&(o.current.scrollLeft=t)}),[t]),Object(L.jsx)("div",{dir:"ltr",style:{margin:i?"0px ".concat(r,"px 0px 0px"):"0px 0px 0px ".concat(r,"px")},className:bs.a.scroll,onScroll:c,ref:o,children:Object(L.jsx)("div",{style:{width:n,height:1}})})},hs=function(e){var t=e.tasks,n=e.headerHeight,r=void 0===n?50:n,i=e.columnWidth,c=void 0===i?60:i,o=e.listCellWidth,l=void 0===o?"155px":o,s=e.rowHeight,u=void 0===s?50:s,d=e.ganttHeight,j=void 0===d?0:d,h=e.viewMode,f=void 0===h?Vo.Day:h,v=e.locale,O=void 0===v?"en-GB":v,x=e.barFill,m=void 0===x?60:x,g=e.barCornerRadius,y=void 0===g?3:g,k=e.barProgressColor,_=void 0===k?"#a3a3ff":k,w=e.barProgressSelectedColor,C=void 0===w?"#8282f5":w,S=e.barBackgroundColor,T=void 0===S?"#b8c2cc":S,D=e.barBackgroundSelectedColor,N=void 0===D?"#aeb8c2":D,I=e.projectProgressColor,P=void 0===I?"#7db59a":I,A=e.projectProgressSelectedColor,E=void 0===A?"#59a985":A,M=e.projectBackgroundColor,W=void 0===M?"#fac465":M,R=e.projectBackgroundSelectedColor,F=void 0===R?"#f7bb53":R,q=e.milestoneBackgroundColor,z=void 0===q?"#f1c453":q,H=e.milestoneBackgroundSelectedColor,U=void 0===H?"#f29e4c":H,G=e.rtl,Y=void 0!==G&&G,V=e.handleWidth,X=void 0===V?8:V,J=e.timeStep,K=void 0===J?3e5:J,Q=e.arrowColor,$=void 0===Q?"grey":Q,Z=e.fontFamily,ee=void 0===Z?"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue":Z,te=e.fontSize,ne=void 0===te?"14px":te,re=e.arrowIndent,ae=void 0===re?20:re,ie=e.todayColor,ce=void 0===ie?"rgba(252, 248, 227, 0.5)":ie,oe=e.TooltipContent,le=void 0===oe?pl:oe,se=e.TaskListHeader,ue=void 0===se?il:se,de=e.TaskListTable,je=void 0===de?ul:de,be=e.onDateChange,pe=e.onProgressChange,he=e.onDoubleClick,fe=e.onDelete,ve=e.onSelect,Oe=e.onExpanderClick,xe=Object(a.useRef)(null),me=Object(a.useRef)(null),ge=Object(a.useState)((function(){var e=$o(t,f),n=Object(b.a)(e,2),r=n[0],a=n[1];return{viewMode:f,dates:Zo(r,a,f)}})),ye=Object(b.a)(ge,2),ke=ye[0],_e=ye[1],we=Object(a.useState)(u*m/100),Ce=Object(b.a)(we,2),Se=Ce[0],Te=Ce[1],De=Object(a.useState)(0),Ne=Object(b.a)(De,2),Ie=Ne[0],Pe=Ne[1],Le=Object(a.useState)(0),Ae=Object(b.a)(Le,2),Ee=Ae[0],Me=Ae[1],We=Object(a.useState)(j),Re=Object(b.a)(We,2),Fe=Re[0],Be=Re[1],qe=Object(a.useState)([]),ze=Object(b.a)(qe,2),He=ze[0],Ue=ze[1],Ge=Object(a.useState)({action:""}),Ye=Object(b.a)(Ge,2),Ve=Ye[0],Xe=Ye[1],Je=Object(a.useState)(),Ke=Object(b.a)(Je,2),Qe=Ke[0],$e=Ke[1],Ze=Object(a.useState)(null),et=Object(b.a)(Ze,2),tt=et[0],nt=et[1],rt=ke.dates.length*c,at=He.length*u,it=Object(a.useState)(0),ct=Object(b.a)(it,2),ot=ct[0],lt=ct[1],st=Object(a.useState)(-1),ut=Object(b.a)(st,2),dt=ut[0],jt=ut[1],bt=Object(a.useState)(!1),pt=Object(b.a)(bt,2),ht=pt[0],ft=pt[1];Object(a.useEffect)((function(){var e;e=Oe?Ul(t):t;var n=$o(e,f),r=Object(b.a)(n,2),a=r[0],i=r[1],o=Zo(a,i,f);Y&&(o=o.reverse(),-1===dt&&jt(o.length*c)),_e({dates:o,viewMode:f}),Ue(function(e,t,n,r,a,i,c,o,l,s,u,d,j,b,p,h,f,v){var O=t[1].getTime()-t[0].getTime()-60*t[1].getTimezoneOffset()*1e3+60*t[0].getTimezoneOffset()*1e3,x=e.map((function(e,x){return Nl(e,x,t,O,n,r,a,i,c,o,l,s,u,d,j,b,p,h,f,v)}));return x=x.map((function(e){for(var t=e.dependencies||[],n=function(n){var r=x.findIndex((function(e){return e.id===t[n]}));-1!==r&&x[r].barChildren.push(e)},r=0;r<t.length;r++)n(r);return e}))}(e,o,c,u,Se,y,X,Y,_,C,T,N,P,E,W,F,z,U))}),[t,f,u,y,c,Se,X,_,C,T,N,P,E,W,F,z,U,Y,dt,Oe]),Object(a.useEffect)((function(){var e=Ve.changedTask,t=Ve.action;if(e)if("delete"===t)Xe({action:""}),Ue(He.filter((function(t){return t.id!==e.id})));else if("move"===t||"end"===t||"start"===t||"progress"===t){var n=He.find((function(t){return t.id===e.id}));if(n&&(n.start.getTime()!==e.start.getTime()||n.end.getTime()!==e.end.getTime()||n.progress!==e.progress)){var r=He.map((function(t){return t.id===e.id?e:t}));Ue(r)}}}),[Ve,He]),Object(a.useEffect)((function(){tt&&(Ue(He.map((function(e){return e.id!==tt.id?e:tt}))),nt(null))}),[tt,He]),Object(a.useEffect)((function(){var e=u*m/100;e!==Se&&Te(e)}),[u,m,Se]),Object(a.useEffect)((function(){l||Pe(0),me.current&&Pe(me.current.offsetWidth)}),[me,l]),Object(a.useEffect)((function(){xe.current&&Me(xe.current.offsetWidth-Ie)}),[xe,Ie]),Object(a.useEffect)((function(){Be(j?j+r:t.length*u+r)}),[j,t]),Object(a.useEffect)((function(){var e=function(e){if(e.shiftKey||e.deltaX){var t=e.deltaX?e.deltaX:e.deltaY,n=dt+t;n<0?n=0:n>rt&&(n=rt),jt(n),e.preventDefault()}else if(j){var r=ot+e.deltaY;r<0?r=0:r>at-j&&(r=at-j),r!==ot&&(lt(r),e.preventDefault())}ft(!0)};return xe.current&&xe.current.addEventListener("wheel",e,{passive:!1}),function(){xe.current&&xe.current.removeEventListener("wheel",e)}}),[xe.current,ot,dt,j,rt,Y]);var vt=function(e){var t=He.find((function(t){return t.id===e})),n=He.find((function(e){return!!Qe&&e.id===Qe.id}));ve&&(n&&ve(n,!1),t&&ve(t,!0)),$e(t)},Ot={columnWidth:c,svgWidth:rt,tasks:t,rowHeight:u,dates:ke.dates,todayColor:ce,rtl:Y},xt={dateSetup:ke,locale:O,viewMode:f,headerHeight:r,columnWidth:c,fontFamily:ee,fontSize:ne,rtl:Y},mt={tasks:He,dates:ke.dates,ganttEvent:Ve,selectedTask:Qe,rowHeight:u,taskHeight:Se,columnWidth:c,arrowColor:$,timeStep:K,fontFamily:ee,fontSize:ne,arrowIndent:ae,svgWidth:rt,rtl:Y,setGanttEvent:Xe,setFailedTask:nt,setSelectedTask:vt,onDateChange:be,onProgressChange:pe,onDoubleClick:he,onDelete:fe},gt={rowHeight:u,rowWidth:l,fontFamily:ee,fontSize:ne,tasks:He,locale:O,headerHeight:r,scrollY:ot,ganttHeight:j,horizontalContainerClass:us.a.horizontalContainer,selectedTask:Qe,taskListRef:me,setSelectedTask:vt,onExpanderClick:function(e){Oe&&void 0!==e.hideChildren&&Oe(Object(p.a)(Object(p.a)({},e),{},{hideChildren:!e.hideChildren}))},TaskListHeader:ue,TaskListTable:je},yt=Object(B.a)();return Object(L.jsxs)("div",{style:{backgroundColor:yt.palette.background.default},children:[Object(L.jsxs)("div",{className:us.a.wrapper,onKeyDown:function(e){e.preventDefault();var t=ot,n=dt,r=!0;switch(e.key){case"Down":case"ArrowDown":t+=u,r=!1;break;case"Up":case"ArrowUp":t-=u,r=!1;break;case"Left":case"ArrowLeft":n-=c;break;case"Right":case"ArrowRight":n+=c}r?(n<0?n=0:n>rt&&(n=rt),jt(n)):(t<0?t=0:t>at-j&&(t=at-j),lt(t)),ft(!0)},tabIndex:0,ref:xe,children:[l&&Object(L.jsx)(Ol,Object(p.a)({},gt)),Object(L.jsx)(ds,{gridProps:Ot,calendarProps:xt,barProps:mt,ganttHeight:j,scrollY:ot,scrollX:dt}),Ve.changedTask&&Object(L.jsx)(bl,{arrowIndent:ae,rowHeight:u,svgContainerHeight:Fe,svgContainerWidth:Ee,fontFamily:ee,fontSize:ne,scrollX:dt,scrollY:ot,task:Ve.changedTask,headerHeight:r,taskListWidth:Ie,TooltipContent:le,rtl:Y,svgWidth:rt}),Object(L.jsx)(vl,{ganttFullHeight:at,ganttHeight:j,headerHeight:r,scroll:ot,onScroll:function(e){ot===e.currentTarget.scrollTop||ht||lt(e.currentTarget.scrollTop),ft(!1)},rtl:Y})]}),Object(L.jsx)(ps,{svgWidth:rt,taskListWidth:Ie,scroll:dt,rtl:Y,onScroll:function(e){dt===e.currentTarget.scrollLeft||ht||jt(e.currentTarget.scrollLeft),ft(!1)}})]})},fs=Object(F.a)("div")((function(e){return{display:"grid",gridTemplateColumns:"1fr 3fr",gap:e.theme.spacing(1),gridTemplateRows:"1fr 2fr"}}));function vs(){var e,t,n=Object(a.useContext)(A).user,i=Object(B.a)(),c=Object(a.useState)(null),o=Object(b.a)(c,2),l=o[0],s=o[1],u=Object(a.useState)(!1),d=Object(b.a)(u,2),j=d[0],p=d[1],h=Object(a.useState)(null),f=Object(b.a)(h,2),v=f[0],O=f[1],x=Object(a.useState)(null),m=Object(b.a)(x,2),g=m[0],y=m[1],k=Object(a.useState)(!1),_=Object(b.a)(k,2),w=_[0],S=_[1],T=Object(a.useState)(null),D=Object(b.a)(T,2),N=D[0],I=D[1],P=Object(a.useState)(null),E=Object(b.a)(P,2),M=E[0],W=E[1];Object(a.useEffect)((function(){O(null),p(!0),C("http://87.98.220.129:1515/api/report/gantt/init",r.Get,null,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!0).then((function(e){s(e),O(null),p(!1)})).catch((function(e){p(!1),O(e.message)}))}),[]),Object(a.useEffect)((function(){N&&(W(null),S(!0),C(Da(N),r.Get,null,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!0).then((function(e){y(e),S(!1),console.log(e)})).catch((function(e){S(!1),W(e.message)})))}),[N]);new Date(2020,1,1),new Date(2020,1,2);return Object(L.jsxs)(Sr,{style:{overflowY:"hidden",width:"100%",height:"100%"},isDataLoaded:!j&&!v,children:[j&&Object(L.jsx)(nt,{text:"Loading Schema.."}),v&&Object(L.jsx)(Ze,{text:null!==v&&void 0!==v?v:"Something went wrong"}),!j&&!v&&l&&Object(L.jsxs)(fs,{style:{overflow:"hidden",width:"100%",height:"100%"},children:[Object(L.jsxs)(Bo,{delmarginright:!0,children:[Object(L.jsx)(V.a,{style:{margin:i.spacing(1)},variant:"h5",gutterBottom:!0,children:"Projects"}),Object(L.jsx)(X.a,{style:{margin:i.spacing(1)}}),Object(L.jsx)(Y.a,{children:l.map((function(e){return Object(L.jsx)(ne.a,{button:!0,onClick:function(){return I(e.id)},children:Object(L.jsxs)(V.a,{variant:"h6",children:[e.id,e.title.length>0&&" - ".concat(e.title)]})},e.user_code)}))})]}),Object(L.jsxs)(qo,{center:null===N,delmarginleft:!0,children:[!N&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("img",{src:Ro,width:200}),Object(L.jsx)(V.a,{style:{marginTop:i.spacing(2)},variant:"h5",children:"No Selected Project"})]}),w&&Object(L.jsx)(nt,{text:"Getting Project"}),M&&Object(L.jsx)(Ze,{text:M}),!w&&!M&&g&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(V.a,{style:{margin:i.spacing(1)},variant:"h5",gutterBottom:!0,children:"Info"}),Object(L.jsx)(X.a,{style:{margin:i.spacing(1)}}),Object(L.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr"},children:[Object(L.jsx)(vo,{title:"Title",value:g.project.title}),Object(L.jsx)(vo,{title:"Client",value:g.project.client.description}),Object(L.jsx)(vo,{title:"Client",value:g.project.client.description}),Object(L.jsx)(vo,{title:"Order Number",value:g.project.id.toString()}),Object(L.jsx)(vo,{title:"Project Owner",value:null!==(e=g.project.user.description)&&void 0!==e?e:"N/A"}),Object(L.jsx)(vo,{title:"Expected Delivery",value:It(new Date(g.project.estimated_delivery))}),Object(L.jsx)(vo,{title:"No. of Tasks",value:function(){var e=[];return g&&function e(t,n){n.push(t),t.children.forEach((function(t){return e(t,n)}))}(g.project.task_tree,e),e}().filter((function(e){return 0===e.children.length})).length.toString()})]})]})]}),Object(L.jsxs)(qo,{delmarginleft:!0,id:"gantt-container",style:{gridColumn:"1 / span 2"},center:null===N,children:[!N&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("img",{src:Ro,width:260}),Object(L.jsx)(V.a,{style:{marginTop:i.spacing(2)},variant:"h5",children:"No Selected Project"})]}),w&&Object(L.jsx)(nt,{text:"Getting Project"}),M&&Object(L.jsx)(Ze,{text:M}),!w&&!M&&g&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)(V.a,{style:{margin:i.spacing(1)},variant:"h5",children:["Gantt Chart For Project \xa0",Object(L.jsx)("span",{style:{color:i.palette.success.main},children:null===(t=l.find((function(e){return e.id===N})))||void 0===t?void 0:t.title})]}),Object(L.jsx)(hs,{tasks:function(){var e=[];g&&function e(t,n){n.push(t),t.children.forEach((function(t){return e(t,n)}))}(g.project.task_tree,e);var t=function(t,n){if(0===t.children.length&&t.parent){var r=e.find((function(e){return e.parent===t.parent}));if(r){var a=[];if(r.parent&&1!==t.sort_order){var i=e.find((function(e){return e.parent===t.parent&&e.sort_order===t.sort_order-1}));i&&a.push(i.id.toString())}t.predecessor&&a.push(t.predecessor.id.toString());var c=function(e,t){return{type:"task",id:e.id.toString(),start:new Date(e.planned_start_date),end:new Date(e.planned_end_date),name:e.task_name,progress:e.task_progress,dependencies:t}}(t,a);n.push(c)}}},n=[];return e.forEach((function(e){return t(e,n)})),n}(),viewMode:Vo.Day,ganttHeight:function(){var e,t=null===(e=document.getElementById("gantt-container"))||void 0===e?void 0:e.clientHeight;if(t)return t-200}(),barBackgroundColor:i.palette.primary.main})]})]})]})]})}var Os=n(40),xs=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column"}}));function ms(){var e=Object(a.useContext)(A).user,t=(Object(Os.i)(),Object(s.i)().id),n=Object(a.useState)(!1),i=Object(b.a)(n,2),c=i[0],o=i[1],l=Object(a.useState)(null),u=Object(b.a)(l,2),d=u[0],j=u[1],p=Object(a.useState)(null),h=Object(b.a)(p,2),f=h[0],v=h[1];function O(){var e=[];return f&&function e(t,n){n.push(t),t.children.forEach((function(t){return e(t,n)}))}(f.project.task_tree,e),e.filter((function(e){return e.parent&&0===e.children.length&&e.planned_start_date&&e.planned_end_date&&e.actual_start_date&&e.actual_end_date}))}function x(e){return Math.floor((e.planned_end_date-e.planned_end_date)/864e5+1)}function m(e){return Math.floor((e.actual_end_date-e.actual_start_date)/864e5)+1}return Object(a.useEffect)((function(){o(!0),j(null),C(D+"/api/report/task-duration/".concat(t),r.Get,null,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},"Something went wrong",!0).then((function(e){v(e),o(!1)})).catch((function(e){j(e.message),o(!1)}))}),[]),Object(L.jsxs)(Sr,{style:{overflowY:"hidden"},isDataLoaded:!c&&!d,children:[c&&Object(L.jsx)(nt,{text:"Loading Schema.."}),d&&Object(L.jsx)(Ze,{text:null!==d&&void 0!==d?d:"Something went wrong"}),!c&&!d&&f&&Object(L.jsxs)(xs,{children:[Object(L.jsxs)(Ho,{header:!0,children:[Object(L.jsx)(zo,{header:!0,children:"Task Name"}),Object(L.jsx)(zo,{header:!0,children:"Task Code"}),Object(L.jsx)(zo,{header:!0,children:"Order Number"}),Object(L.jsx)(zo,{header:!0,children:"Assigned To"}),Object(L.jsx)(zo,{header:!0,children:"Duration"}),Object(L.jsx)(zo,{header:!0,children:"Actual"})]}),O().map((function(e){var n;return{taskName:e.task_name,taskCode:e.task_code,assignedTo:null===(n=e.assigned_to)||void 0===n?void 0:n.description,orderNumber:t,duration:x(e)+"d",actual:m(e)+"d"}})).map((function(e,t){var n;return Object(L.jsxs)(Ho,{children:[Object(L.jsx)(zo,{children:e.taskName}),Object(L.jsx)(zo,{children:null!==(n=e.taskCode)&&void 0!==n?n:"N/A"}),Object(L.jsx)(zo,{children:e.orderNumber}),Object(L.jsx)(zo,{children:e.assignedTo}),Object(L.jsx)(zo,{children:e.duration}),Object(L.jsx)(zo,{children:e.actual})]},t)})),Object(L.jsxs)(Ho,{header:!0,children:[Object(L.jsx)(zo,{header:!0,children:"Average"}),Object(L.jsx)(zo,{header:!0}),Object(L.jsx)(zo,{header:!0}),Object(L.jsx)(zo,{header:!0}),Object(L.jsx)(zo,{header:!0,children:function(){var e=O();return e.reduce((function(e,t){return e+x(t)}),0)/e.length}().toFixed(2)+"d"}),Object(L.jsx)(zo,{header:!0,children:function(){var e=O();return e.reduce((function(e,t){return e+m(t)}),0)/e.length}().toFixed(2)+"d"})]})]})]})}var gs=Object(F.a)("div")((function(e){e.theme;return{display:"flex",flexDirection:"column",overflow:"scroll"}}));function ys(){var e=Object(a.useContext)(A).user,t=Object(B.a)(),n=Object(a.useState)(!1),i=Object(b.a)(n,2),c=i[0],o=i[1],l=Object(a.useState)(null),s=Object(b.a)(l,2),u=s[0],d=s[1],j=Object(a.useState)(null),p=Object(b.a)(j,2),h=p[0],f=p[1];return Object(a.useEffect)((function(){o(!0),d(null),C(D+"/api/report/cash-forecast",r.Get,null,{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},"Something went wrong",!0).then((function(e){f(e),o(!1)})).catch((function(e){d(e.message),o(!1)}))}),[]),Object(L.jsxs)(Sr,{style:{overflowY:"hidden"},isDataLoaded:!c&&!u,children:[c&&Object(L.jsx)(nt,{text:"Loading Schema.."}),u&&Object(L.jsx)(Ze,{text:null!==u&&void 0!==u?u:"Something went wrong"}),!c&&!u&&h&&Object(L.jsxs)(gs,{children:[Object(L.jsxs)(Ho,{margin:.5,header:!0,children:[Object(L.jsx)(zo,{header:!0,children:"Order Number"}),Object(L.jsx)(zo,{header:!0,children:"Project Title"}),Object(L.jsx)(zo,{header:!0,children:"Customer Account"}),Object(L.jsx)(zo,{header:!0,children:"Customer Name"}),Object(L.jsx)(zo,{header:!0,children:"Total Price"}),Object(L.jsx)(zo,{header:!0,children:"Amount Paid"}),Object(L.jsx)(zo,{header:!0,children:"Remaining"})]}),h.map((function(e,n){return Object(L.jsxs)(Ho,{margin:.5,children:[Object(L.jsx)(zo,{children:e.project_id}),Object(L.jsx)(zo,{children:e.title}),Object(L.jsx)(zo,{children:e.customer_account}),Object(L.jsx)(zo,{children:e.customer_name}),Object(L.jsx)(zo,{header:!0,color:t.palette.warning.dark,children:Nt(e.total_price,e.currency.currency_code)}),Object(L.jsx)(zo,{header:!0,color:t.palette.success.dark,children:Nt(e.paid_amount,e.currency.currency_code)}),Object(L.jsx)(zo,{header:!0,color:t.palette.error.dark,children:Nt(e.total_price-e.paid_amount,e.currency.currency_code)})]},n)}))]})]})}var ks=Object(F.a)(ie.a)((function(e){var t=e.theme;return{backgroundColor:t.palette.background.paper,padding:t.spacing(2),display:"flex",flexDirection:"column",width:"600px",height:"400px",justifyContent:"space-between"}})),_s=Object(F.a)("div")((function(e){var t=e.theme;return{display:"flex",flexDirection:"column",height:"100%",alignItems:"center",justifyContent:e.loaded?"space-evenly":"center",backgroundColor:t.palette.background.default}})),ws=Object(F.a)(tn.a)((function(e){return{height:e.theme.spacing(6)}}));function Cs(){var e=Object(a.useContext)(A).user,t=Object(a.useState)(!1),n=Object(b.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)(!1),l=Object(b.a)(o,2),s=l[0],u=l[1],p=Object(a.useState)(""),h=Object(b.a)(p,2),f=h[0],v=h[1],O=Object(a.useState)(""),x=Object(b.a)(O,2),m=x[0],g=x[1],y=Object(a.useState)(!1),k=Object(b.a)(y,2),_=k[0],w=k[1],S=Object(a.useState)(""),T=Object(b.a)(S,2),N=T[0],I=T[1],P=Object(a.useState)(""),E=Object(b.a)(P,2),M=E[0],W=E[1],R=Object(a.useState)(""),F=Object(b.a)(R,2),q=F[0],z=F[1],H=function(){var t=Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!U()){t.next=15;break}return t.prev=1,c(!0),t.next=5,C(D+"/api/user/password",r.Post,{old_password:N,new_password:M},{Authorization:"Bearer ".concat(null===e||void 0===e?void 0:e.tokenStr)},void 0,!1);case 5:c(!1),w(!0),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(1),c(!1),u(!0),g(t.t0.message),v("Oops, something went wrong!");case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();function U(){return N.length>1&&Ue(M,q)}var G=Object(B.a)();return Object(L.jsxs)(_s,{loaded:!i,children:[i&&Object(L.jsx)(nt,{text:"Changing Password.."}),!i&&_&&Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(L.jsx)(Xr.a,{style:{color:G.palette.success.main,height:"100px",width:"100px"}}),Object(L.jsx)(V.a,{children:"Password Changed Successfully"})]}),!i&&!_&&Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(ks,{children:[Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h4",children:"Change Password"}),Object(L.jsx)(V.a,{gutterBottom:!0,variant:"caption",children:He}),Object(L.jsx)(ln.a,{label:"Old Password",value:N,fullWidth:!0,required:!0,type:"password",onChange:function(e){I(e.target.value)}}),Object(L.jsx)(ln.a,{required:!0,fullWidth:!0,label:"New Password",value:M,type:"password",onChange:function(e){W(e.target.value)}}),Object(L.jsx)(ln.a,{required:!0,fullWidth:!0,label:"Re-enter Password",value:q,type:"password",onChange:function(e){z(e.target.value)},onSubmit:H,onKeyDown:function(e){"Enter"===e.key&&H()}}),Object(L.jsx)(ws,{onClick:H,variant:"contained",color:"success",disabled:!U(),children:"Submit"})]})}),Object(L.jsx)(sr,{isOpen:s,onClose:function(){return u(!1)},content:m,title:f})]})}var Ss=function(e){return D+"/api/project/".concat(e)},Ts=Object(a.createContext)(null);var Ds=function(e){var t=e.children,n=Object(a.useContext)(A).user,i=Object(s.i)().id,c=Object(s.h)(),o=Object(a.useState)(!1),l=Object(b.a)(o,2),u=l[0],p=l[1],h=Object(a.useState)(null),f=Object(b.a)(h,2),v=f[0],O=f[1],x=Object(a.useState)(null),m=Object(b.a)(x,2),g=m[0],y=m[1];function k(){y(Object.assign({},g))}var _=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=15;break}return e.prev=1,p(!0),t={user_code:g.user_code,client_code:g.client_code,total_price:g.total_price,estimated_delivery_date:g.estimated_delivery_date,title:g.title,lost_sales:g.lost_sales},e.next=6,C(Ss(i),r.Patch,t,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)},"Something went wrong",!1);case 6:O(null),p(!1),c("/projects/".concat(i)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),O(e.t0.message),p(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),w={isLoading:u,error:v,headers:g,setTitle:function(e){g&&(g.title=e,k())},setEstimatedDelivery:function(e){g&&(g.estimated_delivery_date=e,k())},setProjectOwner:function(e){g&&(g.user_code=e,k())},setTotalAmount:function(e){g&&(g.total_price=e,k())},setLostSales:function(e){g&&(g.lost_sales=e,k())},update:_};return Object(a.useEffect)((function(){p(!0),C(function(e){return D+"/api/project/".concat(e,"/headers")}(i),r.Get,null,{Authorization:"Bearer ".concat(null===n||void 0===n?void 0:n.tokenStr)}).then((function(e){console.log("HEADERS",e),y(e),p(!1),O(null)})).catch((function(e){p(!1),O(e.message)}))}),[]),Object(L.jsx)(Ts.Provider,{value:w,children:t})},Ns=n(267),Is=n.n(Ns),Ps=Object(F.a)(ie.a)((function(e){var t=e.theme;return{backgroundColor:"light"===t.palette.mode?ce.a[200]:t.palette.background.paper,display:"flex",flexDirection:"column",padding:t.spacing(1)}})),Ls=Object(F.a)("div")((function(){return{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}})),As=Object(F.a)("div")((function(e){var t=e.theme;return{display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:t.spacing(2),marginBottom:t.spacing(2)}}));function Es(){var e=Object(a.useContext)(Ts),t=e.isLoading,n=e.error,r=e.headers,i=e.setTitle,c=e.setEstimatedDelivery,o=e.setProjectOwner,l=e.setTotalAmount,s=e.setLostSales,u=e.update;return Object(L.jsxs)(Sr,{isDataLoaded:!t&&!n,children:[t&&Object(L.jsx)(nt,{text:"Loading Schema.."}),n&&Object(L.jsx)(Ze,{text:null!==n&&void 0!==n?n:"Something went wrong"}),!t&&!n&&r&&Object(L.jsx)(mn.b,{dateAdapter:xn.a,locale:yn.a,children:Object(L.jsxs)(Ps,{children:[Object(L.jsx)(Ls,{children:Object(L.jsx)(V.a,{gutterBottom:!0,variant:"h5",children:"Edit Project Headers"})}),Object(L.jsx)(X.a,{style:{backgroundColor:"black",marginBottom:"1rem"}}),Object(L.jsx)(wr,{children:Object(L.jsxs)(As,{children:[Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Title: \xa0\xa0"}),Object(L.jsx)(ln.a,{required:!0,type:"text",variant:"outlined",onChange:function(e){return i(e.target.value)},value:r.title,label:"Title"})]}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Client: \xa0\xa0"}),Object(L.jsx)(q.a,{sx:{minWidth:160},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:"client-label",children:"Client"}),Object(L.jsx)(un.a,{labelId:"client-label",id:"client-select",value:r.client_code,label:"Client",disabled:!0,children:r.clients.map((function(e){return Object(L.jsx)(bn.a,{value:e.client_code,children:e.description},e.client_code)}))})]})})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Project Owner: \xa0\xa0"}),Object(L.jsx)(q.a,{sx:{minWidth:160},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:"user-label",children:"User"}),Object(L.jsx)(un.a,{labelId:"user-label",id:"user-select",value:r.user_code,label:"User",onChange:function(e){return o(e.target.value)},children:r.users.map((function(e){return Object(L.jsx)(bn.a,{value:e.user_code,children:e.description},e.user_code)}))})]})})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Currency: \xa0\xa0"}),Object(L.jsx)(q.a,{sx:{minWidth:160},children:Object(L.jsxs)(dn.a,{fullWidth:!0,children:[Object(L.jsx)(jn.a,{id:"currency-label",children:"Currency"}),Object(L.jsx)(un.a,{labelId:"currency-label",id:"currency-select",value:r.project_currency,label:"Currency",disabled:!0,children:r.currencies.map((function(e){return Object(L.jsx)(bn.a,{value:e.currency_code,children:e.currency_symbol},e.currency_code)}))})]})})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Delivery: \xa0\xa0"}),Object(L.jsx)(gn.a,{label:"Estimated Delivery",openTo:"month",views:["year","month","day"],value:r.estimated_delivery_date,onChange:function(e){e&&c(e)},renderInput:function(e){return Object(L.jsx)(ln.a,Object(p.a)({},e))}})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Price: \xa0\xa0"}),Object(L.jsx)(ln.a,{required:!0,type:"number",variant:"outlined",onChange:function(e){return l(Math.abs(Number(e.target.value)))},value:r.total_price,label:"Project Price"})]}),Object(L.jsx)(Dr,{orientation:"vertical",flexItem:!0}),Object(L.jsxs)(wr,{children:[Object(L.jsx)(V.a,{variant:"h6",children:"Lost sales: \xa0\xa0"}),Object(L.jsx)(ln.a,{type:"text",variant:"outlined",onChange:function(e){return s(e.target.value)},value:r.lost_sales,label:"Lost Sales"})]})]})}),Object(L.jsx)(tn.a,{color:"success",style:{alignSelf:"flex-end",justifySelf:"center",margin:"1rem"},variant:"contained",onClick:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),endIcon:Object(L.jsx)(Is.a,{}),children:"Update"})]})})]})}var Ms=function(){return Object(L.jsx)(Pn,{children:Object(L.jsx)(l.a,{children:Object(L.jsx)(E,{children:Object(L.jsx)("div",{className:"App",children:Object(L.jsxs)(s.e,{children:[Object(L.jsxs)(s.c,{path:"/",element:Object(L.jsx)(M,{children:Object(L.jsx)(lr,{})}),children:[Object(L.jsx)(s.c,{path:"/clients",element:Object(L.jsx)(M,{children:Object(L.jsx)($r,{})})}),Object(L.jsx)(s.c,{path:"/clients/:id",element:Object(L.jsx)(M,{children:Object(L.jsx)(va,{})})}),Object(L.jsx)(s.c,{path:"/clients/new",element:Object(L.jsx)(M,{children:Object(L.jsx)(ia,{})})}),Object(L.jsx)(s.c,{path:"/users",element:Object(L.jsx)(M,{children:Object(L.jsx)(la,{})})}),Object(L.jsx)(s.c,{path:"/users/:id",element:Object(L.jsx)(M,{children:Object(L.jsx)(ha,{})})}),Object(L.jsx)(s.c,{path:"/users/new",element:Object(L.jsx)(M,{children:Object(L.jsx)(fa,{})})}),Object(L.jsx)(s.c,{path:"/tasks/templates",element:Object(L.jsx)(M,{children:Object(L.jsx)(_a,{})})}),Object(L.jsx)(s.c,{path:"/tasks/templates/:id",element:Object(L.jsx)(M,{children:Object(L.jsx)(Aa,{children:Object(L.jsx)(ji,{})})})}),Object(L.jsx)(s.c,{path:"/tasks/templates/new",element:Object(L.jsx)(M,{children:Object(L.jsx)(bi,{})})}),Object(L.jsx)(s.c,{path:"/projects",element:Object(L.jsx)(M,{children:Object(L.jsx)(Oi,{})})}),Object(L.jsx)(s.c,{path:"/projects/:id",element:Object(L.jsx)(M,{children:Object(L.jsx)(mi,{children:Object(L.jsx)(Ki,{})})})}),Object(L.jsx)(s.c,{path:"/projects/:id/tasks/edit",element:Object(L.jsx)(M,{children:Object(L.jsx)(ic,{children:Object(L.jsx)(Dc,{})})})}),Object(L.jsx)(s.c,{path:"/projects/:id/tasks/duration/report",element:Object(L.jsx)(M,{children:Object(L.jsx)(ms,{})})}),Object(L.jsx)(s.c,{path:"/projects/:id/payments",element:Object(L.jsx)(M,{children:Object(L.jsx)(Pc,{children:Object(L.jsx)(Fc,{})})})}),Object(L.jsx)(s.c,{path:"/projects/:id/reschedule",element:Object(L.jsx)(M,{children:Object(L.jsx)(oo,{})})}),Object(L.jsx)(s.c,{path:"/projects/new",element:Object(L.jsx)(M,{children:Object(L.jsx)(rc,{})})}),Object(L.jsx)(s.c,{path:"/projects/:id/preview",element:Object(L.jsx)(M,{children:Object(L.jsx)(ho,{children:Object(L.jsx)(So,{})})})}),Object(L.jsx)(s.c,{path:"/projects/:id/edit",element:Object(L.jsx)(M,{children:Object(L.jsx)(Ds,{children:Object(L.jsx)(Es,{})})})}),Object(L.jsx)(s.c,{path:"/currencies",element:Object(L.jsx)(M,{children:Object(L.jsx)(qc,{children:Object(L.jsx)(Yc,{})})})}),Object(L.jsx)(s.c,{path:"/settings/dropdown",element:Object(L.jsx)(M,{children:Object(L.jsx)(Qc,{children:Object(L.jsx)(ao,{})})})}),Object(L.jsx)(s.c,{path:"/reports/order-status",element:Object(L.jsx)(M,{children:Object(L.jsx)(Wo,{})})}),Object(L.jsx)(s.c,{path:"/reports/tasks-by-employee",element:Object(L.jsx)(M,{children:Object(L.jsx)(Uo,{})})}),Object(L.jsx)(s.c,{path:"/reports/pipeline-orders",element:Object(L.jsx)(M,{children:Object(L.jsx)(Yo,{})})}),Object(L.jsx)(s.c,{path:"/reports/gantt",element:Object(L.jsx)(M,{children:Object(L.jsx)(vs,{})})}),Object(L.jsx)(s.c,{path:"/reports/cash-forecast",element:Object(L.jsx)(M,{children:Object(L.jsx)(ys,{})})}),Object(L.jsx)(s.c,{path:"/change-password",element:Object(L.jsx)(M,{children:Object(L.jsx)(Cs,{})})})]}),Object(L.jsx)(s.c,{path:"/login",element:Object(L.jsx)(W,{children:Object(L.jsx)(mr,{})})}),Object(L.jsx)(s.c,{path:"/*",element:Object(L.jsx)(M,{children:Object(L.jsx)(hi,{})})})]})})})})})},Ws=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,476)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};o.a.render(Object(L.jsx)(i.a.StrictMode,{children:Object(L.jsx)(Ms,{})}),document.getElementById("root")),Ws()},74:function(e,t,n){e.exports={barWrapper:"bar_barWrapper__3xfTc",barHandle:"bar_barHandle__jRs2Z",barBackground:"bar_barBackground__aBSU8"}}},[[356,1,2]]]);
//# sourceMappingURL=main.073429d7.chunk.js.map